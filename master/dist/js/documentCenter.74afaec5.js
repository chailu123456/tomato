(window.webpackJsonp=window.webpackJsonp||[]).push([["documentCenter"],{"11be":function(e,t,n){"use strict";n("cc67")},"1f63":function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return j})),n.d(t,"a",(function(){return v}));var r=n("3835"),c=n("1da1"),a=(n("96cf"),n("8b6f")),u=n("afbc"),o=n("d257"),i=n("7b31"),l=n("6b59"),s=n("3740");function d(e,t){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.D)({type:t,wiki_id:n});case 2:if(200!==e.sent.code){e.next=7;break}return i.a.success({type:"success",message:1===t?"已添加至 “收藏”":"已取消收藏"}),e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t){return p.apply(this,arguments)}function p(){return(p=Object(c.a)(regeneratorRuntime.mark((function e(t,n){var r,c,o,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.confirm("删除的内容将无法回收，请确认是否删除？","是否删除：".concat(n,"？"),{confirmButtonText:"删除",cancelButtonText:"取消",type:"error",confirmButtonClass:"el-button--danger-box"});case 3:r=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0);case 9:if("confirm"===r){e.next=11;break}return e.abrupt("return",!1);case 11:return c=s.a.service(),e.next=14,Object(a.g)({id:t});case 14:if(o=e.sent,d=o.code,c.close(),200!==d){e.next=21;break}return i.a.success({type:"success",message:"删除成功"}),setTimeout((function(){u.a.back()}),1500),e.abrupt("return",!0);case 21:return e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function m(e,t){return O.apply(this,arguments)}function O(){return(O=Object(c.a)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.F)({id:t,status:n});case 2:if(200!==e.sent.code){e.next=7;break}return i.a.success({type:"success",message:1===n?"已通过权限申请":"已拒绝申请"}),e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n="",r=0;r<e;r++){var c=Math.floor(Math.random()*t.length);n+=t.substring(c,c+1)}return n}function v(){var e=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var n,c,u,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.w)({asyncFunc:a.l,args:t});case 2:if(n=e.sent,c=Object(r.a)(n,2),u=c[0],i=c[1],!u&&i){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.w)({asyncFunc:a.e,args:t});case 2:if(n=e.sent,!Object(r.a)(n,1)[0]){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.w)({asyncFunc:a.H,args:t});case 2:if(n=e.sent,!Object(r.a)(n,1)[0]){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var n,c,u,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.w)({asyncFunc:a.c,args:t});case 2:if(n=e.sent,c=Object(r.a)(n,2),u=c[0],i=c[1],!u&&i){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var n,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.w)({asyncFunc:a.x,args:t,needCode:!0});case 2:if(n=e.sent,c=Object(r.a)(n,1),"number"!=typeof(u=c[0])){e.next=9;break}return e.abrupt("return",200===u);case 9:if(!u){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(){var t,n,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.w)({asyncFunc:a.p});case 2:if(t=e.sent,n=Object(r.a)(t,2),c=n[0],u=n[1],!c&&u){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(){var t,n,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.w)({asyncFunc:a.n});case 2:if(t=e.sent,n=Object(r.a)(t,2),c=n[0],u=n[1],!c&&u){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{useGetTagList:function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var n,c,u,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.w)({asyncFunc:a.w,args:t});case 2:if(n=e.sent,c=Object(r.a)(n,2),u=c[0],i=c[1],!u&&i){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),useMoveWikiSort:function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var n,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.w)({asyncFunc:a.z,args:t,needCode:!0});case 2:if(n=e.sent,c=Object(r.a)(n,1),"number"!=typeof(u=c[0])){e.next=9;break}return e.abrupt("return",200===u);case 9:if(!u){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),useGetModifyWikiList:s,useModifyWikiSort:i,useGetShareList:l,useGetDocTreeList:e,useDelWikiDoc:t,useUpdateDocTitle:n,useCreateChildren:u}}},"5c11":function(e,t,n){"use strict";n.r(t);var r=n("1da1"),c=(n("96cf"),n("caad"),n("2532"),n("b0c0"),n("159b"),n("7a23")),a=n("3bd7"),u=n("8b6f"),o=n("d296"),i=n("eaf6"),l=n("d257"),s=n("5f12"),d=n("fc88"),b={class:"rp-document-center"},f={class:"menu-title"},p=Object(c.createElementVNode)("div",{class:"ment-title-left"},"文档分类",-1),m={class:"ment-title-right-icon"},O=["tip"],j={class:"menu-list"},v={class:"menu-tree-node"},y={key:0,style:{"font-size":"14px","margin-right":"10px","margin-top":"2px"},class:"iconfont icon-document"},k={class:"more-list-option"},h=["onClick"],g=[Object(c.createElementVNode)("i",{class:"iconfont icon-bianji"},null,-1),Object(c.createElementVNode)("em",null,"重命名",-1)],x=["onClick"],C=[Object(c.createElementVNode)("i",{class:"iconfont icon-jiahao"},null,-1),Object(c.createElementVNode)("em",null,"新增子分类",-1)],w=["onClick"],N=Object(c.createElementVNode)("em",null,"删除",-1),V={class:"document-right-header"},E={key:1,class:"header-line"},_=["onClick"],B={key:0,style:{"margin-bottom":"10px"}},T=Object(c.createElementVNode)("div",{style:{"margin-bottom":"6px"}},"所属父分类",-1),R={key:1,style:{"line-height":"26px"}},S={class:"dialog-footer"},z=Object(c.createTextVNode)("取 消"),D=Object(c.createTextVNode)("确 定"),F=Object(c.defineComponent)({setup:function(e){var t=Object(i.a)().tipMessage,n=Object(c.ref)(!1),F=Object(c.ref)(!1),M=Object(c.ref)(!1),K=Object(c.reactive)([]),q=Object(c.ref)(),G=Object(c.ref)([0,2]),J=Object(c.ref)(["新建分类","重命名","新建子分类","删除分类"]),L=Object(c.ref)(J.value[0]),U=Object(c.ref)([]),W=Object(c.ref)(0),A=Object(c.ref)({name:"所有分类",id:94}),I=Object(c.ref)(0),H=function(e){I.value=e},P=Object(c.ref)(!1),Q=Object(c.ref)(!1),X=Object(c.reactive)({id:0,label:""}),Y=Object(c.reactive)({label:"",parent_label:""}),Z=Object(c.reactive)({id:0,label:""}),$=Object(c.ref)([{name:"所有分类",id:94}]),ee=Object(c.ref)([{name:"所有分类",id:94}]),te=Object(c.reactive)([]),ne=Object(c.reactive)([]),re=Object(c.reactive)([]),ce=Object(c.reactive)({id:0,name:"",parent_id:0}),ae=Object(c.ref)(!1),ue=Object(l.G)("docCenterkey",!0);window.location.href.includes("guifan")?setTimeout((function(){null==q||q.value.setCurrentKey(te[0].id),oe({id:te[0].id,label:te[0].label})}),100):null!=ue&&ue.id?setTimeout((function(){W.value=ue.id,null==q||q.value.setCurrentKey(ue.id),oe(ue)}),1e3):setTimeout((function(){W.value=te[0].id,null==q||q.value.setCurrentKey(te[0].id)}),1e3);var oe=function(e){W.value=e.id,X.id=e.id,X.label=e.label,X.wiki_count=e.wiki_count,Object(l.M)("docCenterkey",JSON.stringify(X)),A.value={name:e.label,id:e.id},ie(e)},ie=function(e,t){Object(u.i)({id:e.id}).then((function(e){200===e.code?(t||($.value=e.data||[]),ee.value=e.data||[]):($.value=[],ee.value=e.data||[])}))},le=[{id:0,request:u.a},{id:1,request:u.C},{id:2,request:u.a},{id:3,request:u.f}],se=function(e,t){return ae.value?t.wiki_count>0&&t.level<2:t},de=function(){ae.value=!ae.value,te[0]=ae.value?ne[0]:re[0],setTimeout((function(){var e=Object(l.G)("docCenterkey",!0);null==q||q.value.setCurrentKey(e.id)}),500)},be=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L.value=J.value[2],e.next=3,ie(t,!0);case 3:ce.parent_id=t.id,ce.name="",F.value=!0;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){n.value=!0},pe=function(){if(!Q.value)return t(400,"仅管理员可操作分类，请联系各项目负责人或文档管理员");L.value=J.value[0],ce.parent_id=te[0].id,ce.id=0,ce.name="",F.value=!0},me=function(){if(!Q.value)return t(400,"仅管理员可操作分类，请联系各项目负责人或文档管理员");M.value=!0},Oe=function e(t){for(var n=[],r=0;r<t.length;r+=1){var c=t[r],a=c.wiki_count,u=c.id,o=c.label,i=c.node_type,l=c.order,s=c.parent_id,d=c.parent_label,b=c.level,f=c.children,p={};a&&(p.id=u,p.label=o,p.node_type=i,p.order=l,p.parent_id=s,p.parent_label=d,p.wiki_count=a,p.level=b,f&&Array.isArray(f)&&f.length&&(p.children=e(f)),n.push(p))}return n};Object(c.watch)((function(){return M.value}),(function(){if(!M.value&&P.value){te[0]=ae.value?ne[0]:re[0];var e=Object(l.G)("docCenterkey",!0);null!=e&&e.id?(W.value=e.id,oe(e),setTimeout((function(){null==q||q.value.setCurrentKey(e.id)}),1e3)):(oe({id:te[0].id,label:te[0].label}),setTimeout((function(){null==q||q.value.setCurrentKey(te[0].id)}),100))}}));var je=function(e){Object(u.h)().then((function(t){if(200===t.code){var n=t.data.tree;ne[0]=JSON.parse(JSON.stringify(n)),Q.value=t.data.permission;var r=JSON.parse(JSON.stringify(n));r.children.pop(),K[0]=r;var c=n.id,a=n.label,u=n.level,o=n.node_type,i=n.order,l=n.parent_id,s=n.children,d={id:c,label:a,level:u,node_type:o,order:i,parent_id:l,wiki_count:n.wiki_count,children:Oe(s)};re[0]=d,"dragTree"===e?P.value=!0:(te[0]=ae.value?ne[0]:d,null==q||q.value.defaultExpandedKeys.push(te[0].id),"remove"===e&&(null!=ue&&ue.id?setTimeout((function(){null==q||q.value.setCurrentKey(ue.id)}),100):setTimeout((function(){null==q||q.value.setCurrentKey(te[0].id)}),100)))}}))};return je(),function(e,t){var r=Object(c.resolveComponent)("el-icon"),u=Object(c.resolveComponent)("el-popover"),i=Object(c.resolveComponent)("el-tree"),l=Object(c.resolveComponent)("el-input"),P=Object(c.resolveComponent)("el-form-item"),X=Object(c.resolveComponent)("el-form"),ne=Object(c.resolveComponent)("el-button"),re=Object(c.resolveComponent)("el-dialog");return Object(c.openBlock)(),Object(c.createElementBlock)("div",b,[Object(c.createElementVNode)("div",{class:Object(c.normalizeClass)([n.value?"document-center-left-hide":"document-center-left"])},[Object(c.createElementVNode)("div",f,[p,Object(c.createElementVNode)("div",m,[Object(c.createElementVNode)("i",{onClick:pe,tip:"新增分类",class:"iconfont icon-jiahao"}),Object(c.createElementVNode)("i",{onClick:me,tip:"分类排序",class:"iconfont icon-zhiyou-fenzupaixu"}),Object(c.createElementVNode)("i",{onClick:de,tip:ae.value?"隐藏空分类":"显示空分类",class:Object(c.normalizeClass)([ae.value?"icon-yanjing_open":"icon-yanjing_close","iconfont"])},null,10,O),Object(c.createElementVNode)("i",{onClick:fe,tip:"收起",class:"iconfont icon-zuoceshouqiyoucezhankai"})])]),Object(c.createElementVNode)("div",j,[Object(c.createVNode)(i,{data:Object(c.unref)(te),"highlight-current":!0,"expand-on-click-node":!1,ref_key:"menuRef",ref:q,"node-key":"id",indent:6,"default-expanded-keys":U.value,"current-node-key":W.value,props:{children:"children",label:"label"},onNodeClick:oe,"filter-node-method":se},{default:Object(c.withCtx)((function(e){var t=e.node,n=e.data;return[Object(c.createElementVNode)("span",v,[1!=n.level?(Object(c.openBlock)(),Object(c.createElementBlock)("i",y)):Object(c.createCommentVNode)("",!0),Object(c.createElementVNode)("span",{style:{"font-size":"14px"},class:Object(c.normalizeClass)(["node-name",{"current-node-name":n.id===W.value}])},[Object(c.createTextVNode)(Object(c.toDisplayString)(t.label)+" ",1),Object(c.createElementVNode)("i",{class:"num",style:Object(c.normalizeStyle)({color:n.id===W.value?"#1d9f85":""})}," ("+Object(c.toDisplayString)(n.wiki_count)+")",5)],2),Q.value?(Object(c.openBlock)(),Object(c.createBlock)(u,{key:1,width:100,placement:"right",trigger:"click"},{reference:Object(c.withCtx)((function(){return[Object(c.createVNode)(r,{class:"menu-more-option",style:Object(c.normalizeStyle)({display:G.value.includes(n.node_type)?"none":""})},{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(Object(c.unref)(s.a))]})),_:2},1032,["style"])]})),default:Object(c.withCtx)((function(){return[Object(c.createElementVNode)("ul",k,[Object(c.createElementVNode)("li",{onClick:function(e){return t=n,L.value=J.value[1],ce.id=t.id,ce.name=t.label,void(F.value=!0);var t}},g,8,h),n.level<6?(Object(c.openBlock)(),Object(c.createElementBlock)("li",{key:0,onClick:function(e){return be(n)}},C,8,x)):Object(c.createCommentVNode)("",!0),Q.value?(Object(c.openBlock)(),Object(c.createElementBlock)("li",{key:1,onClick:function(e){return t=n,Z.id=t.parent_id,Y.label=t.label,Y.parent_label=t.parent_label,L.value=J.value[3],ce.id=t.id,ce.name="",void(F.value=!0);var t}},[Object(c.createVNode)(r,null,{default:Object(c.withCtx)((function(){return[Object(c.createVNode)(Object(c.unref)(d.a))]})),_:1}),N],8,w)):Object(c.createCommentVNode)("",!0)])]})),_:2},1024)):Object(c.createCommentVNode)("",!0)])]})),_:1},8,["data","default-expanded-keys","current-node-key"])])],2),Object(c.createElementVNode)("div",{class:Object(c.normalizeClass)([n.value?"document-center-right-hide":"document-center-right","document-center-right-normal"])},[Object(c.createElementVNode)("div",V,[n.value?(Object(c.openBlock)(),Object(c.createElementBlock)("i",{key:0,onClick:t[0]||(t[0]=function(e){n.value=!1}),tip:"展开",class:"iconfont icon-youceshouqizuocezhankai"})):Object(c.createCommentVNode)("",!0),n.value?(Object(c.openBlock)(),Object(c.createElementBlock)("em",E)):Object(c.createCommentVNode)("",!0),(Object(c.openBlock)(!0),Object(c.createElementBlock)(c.Fragment,null,Object(c.renderList)($.value,(function(e,t){return Object(c.openBlock)(),Object(c.createElementBlock)("div",{class:"header-tree-list",key:t},[Object(c.createElementVNode)("span",null,[Object(c.createElementVNode)("em",{onClick:function(t){return function(e){W.value=e.id,Object(c.nextTick)((function(){A.value={name:e.name,id:e.id},null==q||q.value.setCurrentKey({name:e.name,id:e.id}),oe({label:e.name,id:e.id})}))}(e)}},Object(c.toDisplayString)(e.name),9,_),Object(c.createElementVNode)("i",{class:"iconfont icon-youjiantou",style:Object(c.normalizeStyle)({display:t===$.value.length-1?"none":"inline-block"})},null,4),Object(c.createElementVNode)("span",null,Object(c.toDisplayString)(t===$.value.length-1?" ("+I.value+")":""),1)])])})),128))]),Object(c.createVNode)(a.a,{defauldMenuId:A.value,onTreeList:t[1]||(t[1]=function(e){return je("remove")}),onArticalNum:H},null,8,["defauldMenuId"])],2),Object(c.createVNode)(re,{title:L.value,modelValue:F.value,"onUpdate:modelValue":t[7]||(t[7]=function(e){return F.value=e}),width:"40%"},{footer:Object(c.withCtx)((function(){return[Object(c.createElementVNode)("span",S,[Object(c.createVNode)(ne,{onClick:t[5]||(t[5]=function(e){return F.value=!1})},{default:Object(c.withCtx)((function(){return[z]})),_:1}),Object(c.createVNode)(ne,{type:3!=J.value.indexOf(L.value)?"primary":"danger",onClick:t[6]||(t[6]=function(e){return t=J.value.indexOf(L.value),le.forEach((function(e){e.id===t&&e.request(ce).then((function(e){200===e.code&&(F.value=!1,je(),t<3&&(oe({id:e.data.id,label:e.data.name}),setTimeout((function(){null==q||q.value.setCurrentKey(e.data.id)}),1e3)),3===t&&(oe(Z),setTimeout((function(){null==q||q.value.setCurrentKey(Z.id)}),1e3)))}))})),void(1!==t&&(ae.value=!0));var t})},{default:Object(c.withCtx)((function(){return[D]})),_:1},8,["type"])])]})),default:Object(c.withCtx)((function(){return[3!=J.value.indexOf(L.value)?(Object(c.openBlock)(),Object(c.createBlock)(X,{key:0,onSubmit:t[4]||(t[4]=Object(c.withModifiers)((function(){}),["prevent"])),model:Object(c.unref)(ce)},{default:Object(c.withCtx)((function(){return[2===J.value.indexOf(L.value)?(Object(c.openBlock)(),Object(c.createElementBlock)("div",B,[T,(Object(c.openBlock)(!0),Object(c.createElementBlock)(c.Fragment,null,Object(c.renderList)(ee.value,(function(e,t){return Object(c.openBlock)(),Object(c.createElementBlock)("span",{style:{color:"#989898","font-size":"12px"},key:t},[t?(Object(c.openBlock)(),Object(c.createElementBlock)("i",{key:0,class:"iconfont icon-youjiantou",style:Object(c.normalizeStyle)({display:t===ee.value.length?"none":"inline-block"})},null,4)):Object(c.createCommentVNode)("",!0),Object(c.createElementVNode)("em",null,Object(c.toDisplayString)(t===ee.value.length?"":e.name),1)])})),128))])):Object(c.createCommentVNode)("",!0),Object(c.createVNode)(P,{model:Object(c.unref)(ce),onSubmit:t[3]||(t[3]=Object(c.withModifiers)((function(){}),["prevent"])),rules:{required:!0,message:"请输入分类名称",trigger:"blur"},label:""},{default:Object(c.withCtx)((function(){return[Object(c.createElementVNode)("div",null,"分类名称 ("+Object(c.toDisplayString)(Object(c.unref)(ce).name.length)+"/32)",1),Object(c.createVNode)(l,{prop:"name",modelValue:Object(c.unref)(ce).name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Object(c.unref)(ce).name=e}),modelModifiers:{trim:!0},placeholder:"请输入",maxlength:"32",autocomplete:"off"},null,8,["modelValue"])]})),_:1},8,["model"])]})),_:1},8,["model"])):(Object(c.openBlock)(),Object(c.createElementBlock)("div",R," 分类 「 "+Object(c.toDisplayString)(Object(c.unref)(Y).label)+" 」会被删除。当前分类及其子分类下的文档会被移动到「 "+Object(c.toDisplayString)(Object(c.unref)(Y).parent_label)+" 」。此操作不可撤销，是否确定？ ",1))]})),_:1},8,["title","modelValue"]),M.value?(Object(c.openBlock)(),Object(c.createBlock)(o.a,{key:0,visible:M.value,"onUpdate:visible":t[8]||(t[8]=function(e){return M.value=e}),onUpdateTree:t[9]||(t[9]=function(e){return je("dragTree")}),sortTreeDate:Object(c.unref)(K)},null,8,["visible","sortTreeDate"])):Object(c.createCommentVNode)("",!0)])}}});n("b636f");const M=F;t.default=M},7733:function(e,t,n){},b636f:function(e,t,n){"use strict";n("7733")},cc67:function(e,t,n){},d296:function(e,t,n){"use strict";var r=n("1da1"),c=(n("96cf"),n("a9e3"),n("d81d"),n("159b"),n("7a23")),a=n("d257"),u=n("8b6f"),o=n("1f63"),i={class:"rp-classify-list"},l={key:0,class:"drag-title"},s={class:"document-classify-content"},d={key:0,style:{"font-size":"14px","margin-right":"10px","margin-top":"2px"},class:"iconfont icon-document-artical"},b={key:1,style:{"font-size":"14px","margin-right":"10px","margin-top":"2px"},class:"iconfont icon-document"},f={style:{"font-size":"14px"},class:"el-tree-node__label node-name"},p={class:"dialog-footer"},m=Object(c.createTextVNode)("关 闭"),O=Object(c.defineComponent)({props:{visible:{type:Boolean,default:!1},sortTreeDate:{type:Object,default:function(){return{}}},type:{type:Number,default:0}},emits:["update:visible","updateTree"],setup:function(e,t){var n=t.emit,O=e,j=Object(c.ref)(),v=Object(o.a)().useModifyWikiSort,y=Object(c.reactive)({id:0,order:0,parent_id:0}),k=Object(c.computed)({get:function(){return O.visible},set:function(e){n("update:visible",e)}}),h=Object(c.computed)((function(){return["调整分类排序","调整子文档位置"][O.type]})),g=Object(c.computed)((function(){return O.sortTreeDate.map((function(e){return Object.assign(e,{})}))})),x=function(){n("update:visible",!1)},C=function(e){y.id=e.data.id},w=function(e,t){var n=t.data;if(t.parent.data.children&&t.parent.data.children.forEach((function(e){e.id===y.id&&(n=t.parent.data)})),t.data.children&&t.data.children.forEach((function(e){e.id===y.id&&(n=t.data)})),n.children&&n.children.length){var r=n.children;y.parent_id=n.id,1===r.length?y.order=1:r.forEach((function(e,t){var n,c,a;e.id===y.id&&(y.order=null!==(n=r[t-1])&&void 0!==n&&n.order?null===(c=r[t-1])||void 0===c?void 0:c.order:1,null!==(a=r[t-1])&&void 0!==a&&a.order&&++y.order)}))}if(t.data.parent_id||(y.parent_id=0,y.order=1),0===O.type)V(y);else{var c=y.id,a=y.order,u=y.parent_id;E({current_id:c,seq:a,target_id:u})}},N=function(e){return 1!==e.data.level},V=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.w)({asyncFunc:u.y,args:t});case 2:n("updateTree");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:return e.abrupt("return",n("updateTree"));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return function(t,n){var r=Object(c.resolveComponent)("el-tree"),a=Object(c.resolveComponent)("el-button"),u=Object(c.resolveComponent)("el-dialog");return Object(c.openBlock)(),Object(c.createElementBlock)("div",i,[Object(c.createVNode)(u,{top:"6vh",title:Object(c.unref)(h),modelValue:Object(c.unref)(k),"onUpdate:modelValue":n[1]||(n[1]=function(e){return Object(c.isRef)(k)?k.value=e:null}),onClose:x,width:"40%"},{footer:Object(c.withCtx)((function(){return[Object(c.createElementVNode)("span",p,[Object(c.createVNode)(a,{onClick:n[0]||(n[0]=function(e){return k.value=!1})},{default:Object(c.withCtx)((function(){return[m]})),_:1})])]})),default:Object(c.withCtx)((function(){return[1===e.type?(Object(c.openBlock)(),Object(c.createElementBlock)("span",l,"拖拽子文档，调整它在文档树导航的顺序和位置")):Object(c.createCommentVNode)("",!0),Object(c.createElementVNode)("div",s,[Object(c.createVNode)(r,{data:Object(c.unref)(g),"node-key":"id",draggable:"",ref_key:"classifyTree",ref:j,onNodeDrop:w,onNodeDragEnd:C,"default-expand-all":!0,props:{children:"children",label:"label"},"allow-drag":N,"highlight-current":!0},{default:Object(c.withCtx)((function(t){var n=t.node,r=t.data;return[r.parent_id&&1===e.type?(Object(c.openBlock)(),Object(c.createElementBlock)("i",d)):Object(c.createCommentVNode)("",!0),r.parent_id&&0===e.type?(Object(c.openBlock)(),Object(c.createElementBlock)("i",b)):Object(c.createCommentVNode)("",!0),Object(c.createElementVNode)("span",f,Object(c.toDisplayString)(n.label),1)]})),_:1},8,["data"])])]})),_:1},8,["title","modelValue"])])}}});n("11be");const j=O;t.a=j}}]);