(window.webpackJsonp=window.webpackJsonp||[]).push([["padIframe"],{"01e7":function(e,t,n){"use strict";n("7620")},"0cb0":function(e,t,n){"use strict";n("782f")},"11be":function(e,t,n){"use strict";n("cc67")},1602:function(e,t,n){"use strict";n("19a4")},"182a":function(e,t,n){},"19a4":function(e,t,n){},"41e0":function(e,t,n){},"50c7":function(e,t){e.exports="data:image/png;base64,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"},"5d28":function(e,t,n){"use strict";var r=n("7b31");t.a=function(e){if(e){var t=document.createElement("input");t.setAttribute("type","text"),t.setAttribute("style","position:absolute;top:0;left:0;z-index:-999"),t.setAttribute("value",e),document.body.appendChild(t),t.select(),document.execCommand("Copy"),Object(r.a)({type:"success",message:"复制成功"}),setTimeout((function(){document.body.removeChild(t)}),200)}else Object(r.a)({type:"warning",message:"字段为空，无法复制"})}},"5f12":function(e,t,n){"use strict";var r=n("7a23"),c=Object(r.defineComponent)({name:"MoreFilled"});const a={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},o=Object(r.createVNode)("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224z"},null,-1);c.render=function(e,t,n,c,i,l){return Object(r.openBlock)(),Object(r.createBlock)("svg",a,[o])},c.__file="packages/components/MoreFilled.vue",t.a=c},7620:function(e,t,n){},7676:function(e,t,n){"use strict";var r=n("7a23"),c=Object(r.defineComponent)({name:"Close"});const a={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},o=Object(r.createVNode)("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1);c.render=function(e,t,n,c,i,l){return Object(r.openBlock)(),Object(r.createBlock)("svg",a,[o])},c.__file="packages/components/Close.vue",t.a=c},"782f":function(e,t,n){},"910b":function(e,t,n){"use strict";n.r(t),n("b0c0");var r=n("7a23"),c=n("50c7"),a=n.n(c),o=function(e){return Object(r.pushScopeId)("data-v-47b75cea"),e=e(),Object(r.popScopeId)(),e},i={class:"pad"},l={class:"pad-top"},u={class:"pad-top__left"},s={key:0,class:"pad-top__members"},d={class:"pad-top__tools"},b=Object(r.createTextVNode)("分享"),p=o((function(){return Object(r.createElementVNode)("span",{class:"pad-top__tools-more el-dropdown-link"},"...",-1)})),f={style:{margin:"0",padding:"5px 0"}},m={key:0,class:"pad-container"},j=["src"],O={key:0,class:"pad-empty pad-empty__text"},v={key:1,class:"pad-empty pad-empty__text"},h={key:2,class:"pad-empty"},k=Object(r.createTextVNode)("申请查看权限"),g=Object(r.createTextVNode)("申请编辑权限"),C={class:"rp-share-select"},w={key:0,class:"rp-share-select__column"},y={key:1,class:"rp-share-tag"},x=o((function(){return Object(r.createElementVNode)("div",{class:"rp-classify"},"标签",-1)})),V={key:2,class:"rp-share-cooperation"},N=o((function(){return Object(r.createElementVNode)("div",{class:"rp-classify"},"邀请协作者",-1)})),E={class:"rp-people-list"},B={class:"people-list-show"},_={class:"rp-select-jurisdiction"},A={class:"rp-classify"},R=Object(r.createTextVNode)(" 链接分享 "),S={key:0,class:"rp-select-jurisdiction__permiss"},D=Object(r.createTextVNode)(" 复制链接"),T={key:1,class:"rp-close"},I={class:"rp-select-jurisdiction"},M={class:"rp-classify"},Q=Object(r.createTextVNode)(" 公开分享 "),U={key:1,class:"rp-close"},K={key:0,class:"load-container"},H=[o((function(){return Object(r.createElementVNode)("div",{class:"load"},null,-1)}))],L={key:1},P={class:"dialog-footer"},F=Object(r.createTextVNode)("确 定"),G=n("2909"),J=n("1da1"),Y=(n("96cf"),n("caad"),n("2532"),n("7db0"),n("159b"),n("a434"),n("d81d"),n("4de4"),n("99af"),n("ac1f"),n("1276"),n("5319"),n("8b6f")),q=n("6c02"),W=n("d257"),z=n("5d28"),X=n("1f63"),Z=n("9fe0"),$=n("d6c0"),ee=n("5530"),te=(n("a15b"),n("7b31")),ne=Object(r.createElementVNode)("div",null,"所属父文档",-1),re={class:"docHandle-title"},ce={key:1},ae=Object(r.createTextVNode)("取 消"),oe=Object(r.createTextVNode)("确 定"),ie=Object(r.defineComponent)(Object(ee.a)(Object(ee.a)({},{name:""}),{},{props:{visible:{type:Boolean,default:!1},item:null},emits:["update:visible","updateData"],setup:function(e,t){var n=t.emit,c=e,a=Object(r.reactive)({id:0,name:"",parent_id:0}),o=Object(r.ref)(),i=Object(r.ref)(!1);Object(r.watch)((function(){return c.visible}),(function(e){var t;e?"rename"!==c.item.target&&"create"!==c.item.target||("rename"===c.item.target&&(a.name=null===(t=c.item.node)||void 0===t?void 0:t.label),Object(r.nextTick)((function(){o.value.focus()}))):Object(r.nextTick)((function(){a.name=""}))}));var l=Object(X.a)(),u=l.useDelWikiDoc,s=l.useUpdateDocTitle,d=function(){i.value=!1,n("update:visible",!1)},b=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=Object(r.computed)((function(){var e=f(c.item.node);return Array.isArray(e)&&e.length?e.join(" > "):"主文档"})),f=function e(t){var n,r,a=[];if("rename"===c.item.target){if(t.parent&&t.parent.label&&(a.unshift(t.parent.label),null!==(n=t.parent)&&void 0!==n&&n.parent&&null!==(r=t.parent)&&void 0!==r&&r.parent.label)){var o=e(t.parent);a.unshift.apply(a,Object(G.a)(o))}}else if(a.unshift(t.label),t.parent&&t.parent.label){var i=e(t.parent);a.unshift.apply(a,Object(G.a)(i))}return a},m=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(){var t,r,o,l,u,s,p,f,j,O,v,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.item,r=t.node,o=t.target,i.value=!0,l=5,"delete"!==o){e.next=13;break}return u=r.data.id,e.next=7,b(u);case 7:if(s=e.sent,i.value=!1,s){e.next=11;break}return e.abrupt("return",te.a.error("删除失败"));case 11:e.next=34;break;case 13:if("rename"!==o){e.next=24;break}return p=r.data,f=p.content_id,j=p.id,e.next=17,m({content_id:f,id:j,title:a.name});case 17:if(O=e.sent,i.value=!1,l=6,O){e.next=22;break}return e.abrupt("return",te.a.error("更新标题失败"));case 22:e.next=34;break;case 24:if("create"!==o){e.next=34;break}if(v=a.name){e.next=29;break}return i.value=!1,e.abrupt("return",te.a.warning("请填写子文档名称"));case 29:return h=r.data.id,n("updateData",1,{title:v,parent_id:h}),i.value=!1,d(),e.abrupt("return");case 34:n("updateData",l),d();case 36:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return function(t,n){var c=Object(r.resolveComponent)("el-form-item"),l=Object(r.resolveComponent)("el-input"),u=Object(r.resolveComponent)("el-form"),s=Object(r.resolveComponent)("el-button"),b=Object(r.resolveComponent)("el-dialog"),f=Object(r.resolveDirective)("trim");return Object(r.openBlock)(),Object(r.createBlock)(b,{title:e.item.dialogTitle,modelValue:e.visible,"onUpdate:modelValue":n[1]||(n[1]=function(e){return Object(r.isRef)(visible)?visible.value=e:null}),"close-on-press-escape":!1,width:"30%","before-close":d},{footer:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("span",null,[Object(r.createVNode)(s,{onClick:d},{default:Object(r.withCtx)((function(){return[ae]})),_:1}),Object(r.createVNode)(s,{loading:i.value,type:"delete"===e.item.target?"danger":"primary",onClick:j},{default:Object(r.withCtx)((function(){return[oe]})),_:1},8,["loading","type"])])]})),default:Object(r.withCtx)((function(){return["rename"===e.item.target||"create"===e.item.target?(Object(r.openBlock)(),Object(r.createBlock)(u,{key:0,model:Object(r.unref)(a),onSubmit:Object(r.withModifiers)(j,["prevent"])},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(c,null,{default:Object(r.withCtx)((function(){return[ne,Object(r.createElementVNode)("span",re,Object(r.toDisplayString)(Object(r.unref)(p)),1)]})),_:1}),Object(r.createVNode)(c,{label:""},{default:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("div",null,"子文档名称 ("+Object(r.toDisplayString)(Object(r.unref)(a).name.length)+"/32)",1),Object(r.withDirectives)(Object(r.createVNode)(l,{autofocus:"",ref_key:"inputRef",ref:o,modelValue:Object(r.unref)(a).name,"onUpdate:modelValue":n[0]||(n[0]=function(e){return Object(r.unref)(a).name=e}),modelModifiers:{trim:!0},placeholder:"请输入",maxlength:"32",autocomplete:"off"},null,8,["modelValue"]),[[f]])]})),_:1})]})),_:1},8,["model","onSubmit"])):(Object(r.openBlock)(),Object(r.createElementBlock)("div",ce,"删除文档会同时把其附件、子文档删除，并不可恢复，是否确认？"))]})),_:1},8,["title","modelValue"])}}}));n("c055");var le=ie,ue=n("d296"),se=function(e){return Object(r.pushScopeId)("data-v-4ccb8830"),e=e(),Object(r.popScopeId)(),e},de={class:"moveChildDialog"},be={class:"moveChildTitle"},pe=se((function(){return Object(r.createElementVNode)("div",{class:"moveChildTitle"},"选择目标文档 (即您想要移动到的文档)",-1)})),fe=se((function(){return Object(r.createElementVNode)("div",{style:{"font-weight":"700"}},"选择所属父文档",-1)})),me={class:"tree-menu-list"},je={class:"menu-tree-node"},Oe={key:0,style:{"font-size":"14px","margin-right":"10px"},class:"iconfont icon-document-artical"},ve={style:{"font-size":"14px"},class:"node-name"},he=Object(r.createTextVNode)("取消"),ke=Object(r.createTextVNode)("确认"),ge=Object(r.defineComponent)(Object(ee.a)(Object(ee.a)({},{name:""}),{},{props:{moveChildVisible:{type:Boolean,default:!1},item:null},emits:["update:moveChildVisible","updateData"],setup:function(e,t){var n=t.emit,c=e,a=Object(X.a)(),o=a.useGetModifyWikiList,i=a.useMoveWikiSort,l=a.useGetDocTreeList,u=Object(r.ref)(),s=Object(r.ref)(),d=Object(r.ref)(),b=Object(r.ref)(),p=Object(r.reactive)([]);Object(r.watch)((function(){return c.moveChildVisible}),(function(e){var t;e?(m(),setTimeout((function(){var e,t;f(null===(e=c.item.node)||void 0===e||null===(t=e.parent)||void 0===t?void 0:t.key)}),100),u.value=null===(t=c.item.node)||void 0===t?void 0:t.data.master_id,u.value&&h(u.value)):(f(null),u.value=void 0)}));var f=function(e){var t;null===(t=b.value)||void 0===t||t.setCurrentKey(e),d.value=e},m=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:(t=e.sent)&&(s.value=t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(e){d.value=e.id},O=function(){n("update:moveChildVisible",!1)},v=function(e){d.value=null,h(e)},h=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,l(t);case 4:n=e.sent,p.length=0,n&&p.push(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.value){e.next=4;break}return e.abrupt("return",te.a.warning("请选择目标文档"));case 4:if(d.value){e.next=8;break}return e.abrupt("return",te.a.warning("请选择所属父文档"));case 8:if((null===(t=c.item.node)||void 0===t?void 0:t.key)!==d.value){e.next=10;break}return e.abrupt("return",te.a.warning("移动目标不能移动到当前下面"));case 10:return a={current_id:null===(r=c.item.node)||void 0===r?void 0:r.key,target_id:d.value},e.next=13,i(a);case 13:if(e.sent){e.next=16;break}return e.abrupt("return");case 16:O(),n("updateData");case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return function(t,n){var c=Object(r.resolveComponent)("el-option"),a=Object(r.resolveComponent)("el-select"),o=Object(r.resolveComponent)("el-tree"),i=Object(r.resolveComponent)("el-button"),l=Object(r.resolveComponent)("el-dialog");return Object(r.openBlock)(),Object(r.createBlock)(l,{"custom-class":"moveChild","before-close":O,modelValue:e.moveChildVisible,"onUpdate:modelValue":n[1]||(n[1]=function(e){return Object(r.isRef)(moveChildVisible)?moveChildVisible.value=e:null}),title:"移动子文档",width:"30%"},{footer:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("span",null,[Object(r.createVNode)(i,{onClick:O},{default:Object(r.withCtx)((function(){return[he]})),_:1}),Object(r.createVNode)(i,{type:"primary",onClick:k},{default:Object(r.withCtx)((function(){return[ke]})),_:1})])]})),default:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("div",de,[Object(r.createElementVNode)("div",be,[pe,Object(r.createVNode)(a,{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=function(e){return u.value=e}),onChange:v,class:"m-2",filterable:"",placeholder:"请选择"},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(s.value,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(c,{key:e.id,label:e.title,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]),Object(r.createElementVNode)("div",null,[fe,Object(r.createElementVNode)("div",me,[Object(r.createVNode)(o,{style:{"background-color":"#fff"},data:Object(r.unref)(p),"highlight-current":!0,"expand-on-click-node":!1,ref_key:"treeRef",ref:b,"node-key":"id","current-node-key":d.value,"default-expand-all":"",props:{children:"children",label:"label"},onNodeClick:j},{default:Object(r.withCtx)((function(e){var t=e.node,n=e.data;return[Object(r.createElementVNode)("span",je,[n.parent_id?(Object(r.openBlock)(),Object(r.createElementBlock)("i",Oe)):Object(r.createCommentVNode)("",!0),Object(r.createElementVNode)("span",ve,Object(r.toDisplayString)(t.label),1)])]})),_:1},8,["data","current-node-key"])])])])]})),_:1},8,["modelValue"])}}})),Ce=(n("a68b"),n("d415"),n("6b0d")),we=n.n(Ce),ye=we()(ge,[["__scopeId","data-v-4ccb8830"]]),xe=n("2ef0"),Ve=n("5f12"),Ne=function(e){return Object(r.pushScopeId)("data-v-3ae78ed2"),e=e(),Object(r.popScopeId)(),e},Ee={class:"sidebar"},Be=[Ne((function(){return Object(r.createElementVNode)("i",{class:"icon-menu-show iconfont"},null,-1)}))],_e={key:0,class:"sidebar-top__title"},Ae=Ne((function(){return Object(r.createElementVNode)("span",null,"文档树",-1)})),Re=["onClick"],Se={class:"el-dropdown-link"},De=Object(r.createTextVNode)("重命名 "),Te=Object(r.createTextVNode)("移动文档 "),Ie=Object(r.createTextVNode)("导出为PDF"),Me=Ne((function(){return Object(r.createElementVNode)("span",null,"导入.docx为子文档",-1)})),Qe=Object(r.createTextVNode)("删除 "),Ue={name:"sidebar",components:{DocHandleDialog:le,MoveChildColumn:ye,MoreFilled:Ve.a}},Ke=Object(r.defineComponent)(Object(ee.a)(Object(ee.a)({},Ue),{},{props:{docId:{default:0},permission:{default:0}},emits:["onEvent"],setup:function(e,t){var n=t.expose,c=t.emit,a=e,o=Object(r.ref)(254),i=Object(r.reactive)([]),l=Object(r.ref)(),u=Object(r.ref)(!1),s=Object(r.ref)(!1),d=Object(r.ref)(!1),b=Object(r.ref)(),p=Object(r.reactive)({target:"rename",dialogTitle:"新建子文档",node:null}),f=Object(X.a)().useGetDocTreeList;Object(r.watch)((function(){return a.docId}),(function(e){e&&v()})),Object(r.onMounted)(Object(J.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:j(null!==(t=i[0].id)&&void 0!==t?t:"");case 3:case"end":return e.stop()}}),e)})))),n({menuData:i,getTreeList:function(){return v()}});var m=function(){o.value=o.value>0?0:254},j=function(e){var t;null===(t=b.value)||void 0===t||t.setCurrentKey(e),l.value=e},O=Object(xe.throttle)((function(e){c("onEvent",{type:2,data:Object(ee.a)({},e)})}),500,{leading:!0}),v=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.docId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,f(a.docId);case 4:t=e.sent,i.length=0,t&&i.push(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e,t){switch(e){case"rename":d.value=!0,p.dialogTitle="重命名";break;case"delete":d.value=!0,p.dialogTitle="删除文档";break;case"create":d.value=!0,p.dialogTitle="新建子文档";break;case"movedoc":s.value=!0;break;case"exportpdf":return void c("onEvent",{type:3,data:Object(ee.a)({},t)})}p.node=t,p.target=e},k=function(e,t){1===e?c("onEvent",{type:1,data:Object(ee.a)({},t),cb:function(e){e&&setTimeout((function(){return j(e)}),100)}}):6===e?v():g(e)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;v(),c("onEvent",{type:e})},C=function(e){return 1===e.level?"icon-house":"icon-document-artical"};return function(t,n){var a=Object(r.resolveComponent)("el-tooltip"),f=Object(r.resolveComponent)("el-icon"),v=Object(r.resolveComponent)("el-dropdown-item"),w=Object(r.resolveComponent)("el-upload"),y=Object(r.resolveComponent)("el-dropdown-menu"),x=Object(r.resolveComponent)("el-dropdown"),V=Object(r.resolveComponent)("el-tree");return Object(r.openBlock)(),Object(r.createElementBlock)("div",Ee,[o.value?(Object(r.openBlock)(),Object(r.createElementBlock)("i",{key:0,onClick:m,class:"sidebar-icon iconfont icon-youjiantou"})):(Object(r.openBlock)(),Object(r.createElementBlock)("div",{key:1,onClick:m,class:"sidebar-icon__show"},Be)),o.value?(Object(r.openBlock)(),Object(r.createElementBlock)("div",{key:2,class:Object(r.normalizeClass)(["".concat(o.value?"sidebar-show":"sidebar-hide"),"sidebar-top"])},[2===e.permission?(Object(r.openBlock)(),Object(r.createElementBlock)("div",_e,[Ae,Object(r.createElementVNode)("i",{onClick:n[0]||(n[0]=function(e){return u.value=!0}),class:"icon-sort iconfont"})])):Object(r.createCommentVNode)("",!0)],2)):Object(r.createCommentVNode)("",!0),Object(r.createElementVNode)("div",{class:Object(r.normalizeClass)(["".concat(o.value?"sidebar-show":"sidebar-hide"),"sidebar-menu-list"])},[Object(r.withDirectives)(Object(r.createVNode)(V,{data:Object(r.unref)(i),"highlight-current":!0,"expand-on-click-node":!1,ref_key:"menuRef",ref:b,"node-key":"id","current-node-key":l.value,"default-expand-all":"",props:{children:"children",label:"label"},onNodeClick:Object(r.unref)(O)},{default:Object(r.withCtx)((function(t){var o=t.node;return[Object(r.createElementVNode)("span",{class:Object(r.normalizeClass)(["menu-tree-node",1===o.level?"menu-tree-node-first":""])},[Object(r.createElementVNode)("i",{style:{"font-size":"14px","margin-right":"10px"},class:Object(r.normalizeClass)("iconfont ".concat(C(o)))},null,2),Object(r.createElementVNode)("span",{class:Object(r.normalizeClass)([{"node-name-pd":2===e.permission},"node-name"])},Object(r.toDisplayString)(o.label),3),2===e.permission?(Object(r.openBlock)(),Object(r.createBlock)(a,{key:0,"popper-class":"menu-tree-tooltip","show-after":"500",effect:"dark",enterable:!1,content:"新建子文档",placement:"top",offset:6},{default:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("i",{class:"menu-more-plus",onClick:Object(r.withModifiers)((function(e){return h("create",o)}),["stop"])},null,8,Re)]})),_:2},1024)):Object(r.createCommentVNode)("",!0),2===e.permission?(Object(r.openBlock)(),Object(r.createBlock)(x,{key:1,class:"menu-more-point"},{dropdown:Object(r.withCtx)((function(){return[Object(r.createVNode)(y,null,{default:Object(r.withCtx)((function(){return[1!==o.level?(Object(r.openBlock)(),Object(r.createBlock)(v,{key:0,onClick:Object(r.withModifiers)((function(e){return h("rename",o)}),["stop"])},{default:Object(r.withCtx)((function(){return[De]})),_:2},1032,["onClick"])):Object(r.createCommentVNode)("",!0),1!==o.level?(Object(r.openBlock)(),Object(r.createBlock)(v,{key:1,onClick:Object(r.withModifiers)((function(e){return h("movedoc",o)}),["stop"])},{default:Object(r.withCtx)((function(){return[Te]})),_:2},1032,["onClick"])):Object(r.createCommentVNode)("",!0),Object(r.createVNode)(v,{onClick:Object(r.withModifiers)((function(e){return h("exportpdf",o)}),["stop"])},{default:Object(r.withCtx)((function(){return[Ie]})),_:2},1032,["onClick"]),Object(r.createVNode)(v,{onClick:n[1]||(n[1]=Object(r.withModifiers)((function(e){return h("importdoc")}),["stop"]))},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(w,{"show-file-list":!1,action:"#",accept:".docx",onChange:function(e){!function(e,t){if(!t.name.includes(".docx"))return te.a.warning("请上传.docx格式的文件");c("onEvent",{type:4,data:{parent_id:e.data.id,uploadFile:null==t?void 0:t.raw},cb:function(e){e&&setTimeout((function(){return j(e)}),100)}})}(o,e)},"auto-upload":!1},{default:Object(r.withCtx)((function(){return[Me]})),_:2},1032,["onChange"])]})),_:2},1024),1!==o.level?(Object(r.openBlock)(),Object(r.createBlock)(v,{key:2,onClick:Object(r.withModifiers)((function(e){return h("delete",o)}),["stop"])},{default:Object(r.withCtx)((function(){return[Qe]})),_:2},1032,["onClick"])):Object(r.createCommentVNode)("",!0)]})),_:2},1024)]})),default:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("span",Se,[Object(r.createVNode)(f,{class:"menu-more-option"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(Object(r.unref)(Ve.a))]})),_:1})])]})),_:2},1024)):Object(r.createCommentVNode)("",!0)],2)]})),_:1},8,["data","current-node-key","onNodeClick"]),[[r.vShow,o.value]])],2),Object(r.createVNode)(le,{visible:d.value,"onUpdate:visible":n[2]||(n[2]=function(e){return d.value=e}),item:Object(r.unref)(p),onUpdateData:k},null,8,["visible","item"]),u.value?(Object(r.openBlock)(),Object(r.createBlock)(ue.a,{key:3,visible:u.value,"onUpdate:visible":n[3]||(n[3]=function(e){return u.value=e}),type:1,onUpdateTree:g,sortTreeDate:Object(r.unref)(i)},null,8,["visible","sortTreeDate"])):Object(r.createCommentVNode)("",!0),Object(r.createVNode)(ye,{item:Object(r.unref)(p),onUpdateData:k,moveChildVisible:s.value,"onUpdate:moveChildVisible":n[4]||(n[4]=function(e){return s.value=e})},null,8,["item","moveChildVisible"])])}}}));n("fd59"),n("0cb0");var He=we()(Ke,[["__scopeId","data-v-3ae78ed2"]]),Le=n("4328"),Pe=n.n(Le),Fe=(n("a9e3"),n("f6f2")),Ge={class:"rp-doc-share-classify"},Je=Object(r.createElementVNode)("div",{class:"rp-classify"},"分类",-1),Ye=Object(r.createElementVNode)("span",null,null,-1),qe=["onClick"],We=Object(r.createElementVNode)("div",null,"选择子分类",-1),ze={class:"share-classify-list"},Xe=Object(r.defineComponent)({props:{trees:null,classify_id:{default:""},shareVisible:{type:Boolean,default:!1}},emits:["change"],setup:function(e,t){var n,c=t.emit,a=e,o=Object(r.ref)(),i=Object(r.ref)(!1),l=Object(r.ref)([]),u=Object(r.ref)([]),s=Object(r.ref)("所有分类  "),d=Object(r.ref)(""),b=function(e,t){return!e||-1!==t.name.indexOf(e)},p=function(){s.value="所有分类  ",c("change",{id:0})},f=function(e){i.value=!1,s.value="所有分类  ",m({id:e.id}),c("change",e)};Object(r.watch)((function(){return d.value}),(function(e){o.value.filter(e)})),Object(r.watch)((function(){return a.shareVisible}),(function(e){!1===e&&(i.value=e)}));var m=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearTimeout(n),n=setTimeout(Object(J.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=2;break}return e.abrupt("return",s.value="所有分类  ");case 2:return e.next=4,Object(Y.i)(t);case 4:n=e.sent,r=n.data,l.value=r,r.forEach((function(e,t){t&&(t>1&&(s.value+="  > "+e.name),1==t&&(s.value+=" "+e.name))}));case 8:case"end":return e.stop()}}),e)}))),300);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.watch)((function(){return a.classify_id}),(function(){m({id:Number(a.classify_id)})}),{immediate:!0});var j=function(){d.value="",u.value=[a.trees[0].id]};return function(t,n){var c=Object(r.resolveComponent)("el-input"),a=Object(r.resolveComponent)("el-icon"),l=Object(r.resolveComponent)("el-tree"),m=Object(r.resolveComponent)("el-popover");return Object(r.openBlock)(),Object(r.createElementBlock)("div",Ge,[Je,Object(r.createVNode)(m,{placement:"bottom",onShow:j,"popper-class":"classify-tree-content",visible:i.value,"onUpdate:visible":n[4]||(n[4]=function(e){return i.value=e}),width:530,trigger:"click"},{reference:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("div",{class:"classify-value",onClick:n[1]||(n[1]=function(e){return i.value=!0})},[Ye,Object(r.createElementVNode)("i",{class:"iconfont icon-guanbi",onClick:Object(r.withModifiers)(p,["stop"])},null,8,qe),Object(r.withDirectives)(Object(r.createElementVNode)("input",{class:"classify-name-list","onUpdate:modelValue":n[0]||(n[0]=function(e){return s.value=e}),readonly:""},null,512),[[r.vModelText,s.value]])])]})),default:Object(r.withCtx)((function(){return[We,Object(r.createElementVNode)("div",ze,[Object(r.createVNode)(c,{class:"classify-search","prefix-icon":"el-icon-search",placeholder:"搜索分类",modelValue:d.value,"onUpdate:modelValue":n[2]||(n[2]=function(e){return d.value=e})},null,8,["modelValue"]),Object(r.createVNode)(a,{class:"share-classify-list-icon",onClick:n[3]||(n[3]=function(e){return i.value=!1})},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(Object(r.unref)(Fe.Close))]})),_:1}),Object(r.createVNode)(l,{class:"filter-classify-tree",data:e.trees,"node-key":"id","default-expanded-keys":u.value,"expand-on-click-node":!1,"highlight-current":!0,onNodeClick:f,props:{children:"children",label:"name"},"filter-node-method":b,ref_key:"shareTree",ref:o},null,8,["data","default-expanded-keys"])])]})),_:1},8,["visible"])])}}});n("e3ad");var Ze=Xe,$e=n("7063"),et=n("7676"),tt=Object(r.defineComponent)({name:"padIframe",components:{Notices:$.a,Sidebar:He,ShareClassify:Ze,Bell:$e.a,Close:et.a},data:function(){return{notices:0}},setup:function(){var e=window.location,t=(e.host.includes("tomato.petrvet.com")?"//online-editor.petrvet.com":"//test.online-editor.rvet.cn")+"?t=".concat(Date.now()),n=Object(r.ref)(Object(X.e)()),c=Object(q.f)(),a=Object(r.ref)(0),o=Object(r.ref)(!1),i=Object(r.ref)(""),l=Object(r.ref)(0),u=Object(r.ref)(1),s=Object(r.ref)(!1),d=Object(r.ref)(!0),b=Object(r.ref)(""),p=Object(r.ref)(!1),f=Object(r.ref)([]),m=!0,j=Object(r.ref)(),O=Object(r.ref)(!1),v=Object(r.ref)(),h=Object(r.ref)(!0),k={comment_permission:0,content_id:"",create_by:"",creator:"",id:0,is_collection:0,link_share:0,open_share:0,permission:0,status:0,title:""},g=Object(r.reactive)([{id:0,label:"新窗口打开"},{id:1,label:"复制链接"},{id:2,label:"收藏"},{id:3,label:"导出所有文档为PDF"},{id:4,label:"删除"},{id:5,label:"文档权限"}]),C=Object(r.reactive)({root_classify_id:"",id:57,status:1,content_id:"",classify_id:"",comment_permission:"1",link_share:"1",open_share:"1",tag_id:[],department:[],team_worker:[],title:""}),w=Object(X.a)(),y=w.useCreateChildren,x=w.useGetShareList,V=w.useGetTagList,N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tomato",t=arguments.length>1?arguments[1]:void 0,n=document.getElementById("padIframe"),r=function(e){return null!==e&&"IFRAME"===e.tagName};n&&r(n)&&n.contentWindow&&(null==n||n.contentWindow.postMessage({name:e,data:t},"*"))},E=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(W.G)("shortCode",!0)){e.next=3;break}return e.abrupt("return");case 3:if(!t.content.includes("is_link_share")){e.next=7;break}Object(z.a)(window.location.origin+"/document/padIframe?"+t.code),e.next=10;break;case 7:return n=t.content.indexOf("content_id")>-1?t.content+"&is_link_share=1":t.content,e.next=10,se(n,!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(e,t){N("download",{type:e,title:t})},_=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(t){var r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.d)({title:t,content_id:n.value});case 2:return r=e.sent,c=r.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(t,n,r){var c,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.E)({title:t,id:r,content_id:n});case 2:return c=e.sent,a=c.data,C.title=t,document.title=k.title,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),R=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.j)(t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.b)({type:t,wiki_id:a.value});case 2:200===e.sent.code&&Object(te.a)({type:"success",message:"申请成功"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){g.find((function(e){return 2===e.id})).label=2!==k.is_collection?"取消收藏":"收藏"},T=0,I=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.G)(C);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=Object(r.ref)([]),Q=Object(r.ref)(),U=Object(r.ref)(!1),K=Object(r.ref)(),H=Object(r.ref)(!1),L=Object(r.ref)([]),P=Object(r.ref)(!1),F=Object(r.ref)(!1),$=Object(r.ref)(!1);Object(r.watch)((function(){return P.value}),(function(e){T&&(C.comment_permission=e?"1":"0",I())})),Object(r.watch)((function(){return F.value}),(function(e){T&&(C.link_share=e?"1":"0",I())})),Object(r.watch)((function(){return $.value}),(function(e){T&&(C.open_share=e?"1":"0",I())}));var ee=Object(r.ref)([]),ne=Object(r.ref)(),re=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H.value=!0,d.value=!1,e.next=4,je();case 4:if(M.value.length){e.next=7;break}return e.next=7,Oe();case 7:setTimeout((function(){T=1}),100);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.watch)((function(){return K.value}),(function(e){null==ne||ne.value.filter(e)}));var ce=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae();case 2:U.value=!0;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){Object(Z.e)().then((function(e){Q.value=function e(t){for(var n=[],r=0;r<t.length;r+=1){var c=t[r],a=c.id,o=c.label,i=c.is_department,l=c.children,u={};u.id=a,u.label=o,u.is_department=i,l&&Array.isArray(l)&&l.length&&(u.children=e(l)),n.push(u)}return n}(e.data)}))},oe=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U.value=!1,C.team_worker=[],C.department=[],ee.value=[],L.value&&L.value.length&&L.value.forEach((function(e){e.is_department?C.department.push(1*e.staff_no):C.team_worker.push(e.staff_no),ee.value.push(e.staff_no)})),I();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(e){ee.value=[],C.team_worker=[],C.department=[];var t=e.id,n=e.status,r=e.classify_id,c=e.content_id,a=e.tag_ids,o=e.title,i=e.team_worker,l=e.department,u=e.root_classify_id;C.id=t,C.status=n,C.classify_id=r||"",C.root_classify_id=r?u+"":"",C.content_id=c,C.comment_permission=e.comment_permission+"",C.link_share=e.link_share+"",C.open_share=e.open_share+"",C.tag_id=a,C.title=o,i.forEach((function(e){C.team_worker.push(e.staff_no)})),l.forEach((function(e){C.department.push(1*e.staff_no)})),P.value=!!e.comment_permission,F.value=!!e.link_share,$.value=!!e.open_share;var s=[].concat(Object(G.a)(i),Object(G.a)(l));s.forEach((function(e){ee.value.push(e.staff_no)})),L.value=s},le=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.k)(t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var t=Object(J.a)(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.id>2&&2!==l.value)){t.next=2;break}return t.abrupt("return");case 2:t.t0=n.id,t.next=0===t.t0?5:1===t.t0?7:2===t.t0?9:3===t.t0?18:4===t.t0?21:5===t.t0?23:6===t.t0?27:28;break;case 5:return window.open(e.href,"_blank"),t.abrupt("break",29);case 7:return E(),t.abrupt("break",29);case 9:return r=1===k.is_collection?2:1,t.next=12,Object(X.c)(r,a.value);case 12:if(t.sent){t.next=15;break}return t.abrupt("return");case 15:return k.is_collection=r,D(),t.abrupt("break",29);case 18:return localStorage.setItem("tree",JSON.stringify(j.value.menuData)),N("tree",{tree:JSON.stringify(j.value.menuData),title:i.value}),t.abrupt("break",29);case 21:return Object(X.b)(a.value,i.value),t.abrupt("break",29);case 23:return setTimeout((function(){T=1}),100),H.value=!0,d.value=!0,t.abrupt("break",29);case 27:return t.abrupt("break",29);case 28:case 29:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),se=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(Y.A)({content:t}).then((function(e){200===e.code&&(Object(W.M)("shortCode",JSON.stringify(e.data)),r&&("newArtical"===r?window.history.replaceState({},"","/document/padIframe?".concat(e.data.code)):(window.location.href=window.location.origin+"/document/padIframe?"+e.data.code,location.reload())),n&&Object(z.a)(window.location.origin+"/document/padIframe?"+e.data.code))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),de=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href.split("?")[1],e.next=3,Object(Y.q)({id:t});case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.onMounted)(Object(J.a)(regeneratorRuntime.mark((function e(){var t,r,c,d,p,j;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.location.href.includes("docId")){e.next=4;break}return t=window.location.href.split("?")[1],se(t,!1,"oldUrl"),e.abrupt("return");case 4:return e.next=6,de();case 6:if(r=e.sent,(c=Pe.a.parse(r.content)).docId||c.content_id){e.next=18;break}return e.next=11,_("");case 11:d=e.sent,p=d.id,a.value=p,j="docId="+p+"&content_id="+n.value,se(j,!1,"newArtical"),e.next=21;break;case 18:a.value=parseInt(c.docId,10),n.value=c.content_id,Object(W.M)("shortCode",JSON.stringify(r));case 21:return e.next=23,R(a.value);case 23:return k=e.sent,l.value=k.permission,u.value=k.status,b.value=k.creator,2===l.value&&(o.value=!0),e.next=30,ie(k);case 30:1===k.is_collection&&D(),le(n.value).then((function(e){var t=e.title;i.value=t,C.title=t,document.title=k.title})),s.value=!0,pe(),window.addEventListener("message",(function(e){var t=e.data,n=t.name,r=t.onlineMembers,c=Array.isArray(r)&&r.filter((function(e){return e.name}));if("updateMembers"===n){var a={},o=Array.isArray(c)&&c.reduce((function(e,t){return!a[t.userId]&&(a[t.userId]=e.push(t)),e}),[]);f.value=o}else"getTomatoSuccess"===n&&(m=!1)}));case 35:case"end":return e.stop()}}),e)}))));var be=Object(W.G)("user",!0),pe=function e(){setTimeout((function(){N("tomato",{contentId:n.value,token:null==be?void 0:be.token,permission:l.value,docId:a.value,title:i.value,name:null==be?void 0:be.name,userId:null==be?void 0:be.userid}),m&&e()}),500)},fe=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(t){var r,c,a,o,i,u,s,d,b,p,f,m,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.type,c=t.data,a=void 0===c?{}:c,o=t.cb,i=a.uploadFile,u=a.content_id,s=a.data,d=a.parent_id,b=a.title,1!==r&&4!==r){e.next=12;break}return n.value=Object(X.e)(),p={title:b,parent_id:d,content_id:n.value},4===r&&null!=i&&i.name&&(p.title=null!==(f=i.name.replace(/\.docx/g,""))&&void 0!==f?f:"未命名文档"),e.next=8,me(p);case 8:(m=e.sent)&&(N("changeDoc",{contentId:n.value,token:null==be?void 0:be.token,permission:l.value,file:4===r?i:null}),null===(O=j.value)||void 0===O||O.getTreeList(),1!==r&&4!==r||"function"!=typeof o||o(m.id)),e.next=13;break;case 12:2===r?(n.value=u,N("changeDoc",{contentId:n.value,token:null==be?void 0:be.token,permission:l.value})):3===r?B("pdf",s.label):5===r&&N("changeDoc",{contentId:k.content_id,token:null==be?void 0:be.token,permission:l.value});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O.value=!0,e.next=3,x();case 3:t=e.sent,O.value=!1,v.value=t;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(J.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:(n=e.sent)&&(M.value=n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{handleShareDialog:function(e){return"linkShare"===e?F.value=!F.value:"openShare"===e?$.value=!$.value:"select"===e&&I(),!0},beforeClose:function(){H.value=!1},getTagList:Oe,isShareSidebar:h,onChangeSelect:function(e){C.classify_id=e.id,Object(Y.G)(C)},columnShareList:v,getShareColumnList:je,shareLoading:O,onEvent:fe,sidebar:j,articleId:a,toggleEditorFullScreen:function(){Object(W.I)((function(e){h.value=!e,N("fullScreen",{fullScreen:e})})),Object(W.P)(),h.value=!1,N("fullScreen",{fullScreen:!h.value})},onlineMembers:f,iframeHost:t,onDownload:B,visible:p,show:function(e){p.value="show"===e||!p.value},goBack:function(){var e;e=Object(W.G)("defaultActiveTab")||"documentCenter",c.push({name:e,replace:!0,query:{type:"docBack"}})},title:i,onUpdateDocTitle:function(){if(!i.value)return te.a.warning("请填写标题");A(i.value,n.value,a.value)},permission:l,onApplyPermission:S,isShowContainer:s,toggleFullScreen:W.P,dropList:g,handleMenuItem:ue,handleShare:re,dialogVisible:H,formParams:C,dialogShadow:U,allPeople:Q,handleCheckBoxEventByText:function(e){var t=Object(r.ref)([]);L.value.forEach((function(e){t.value.push(e.staff_no)})),t.value.includes(e.id)?L.value.forEach((function(t,n){t.staff_no===e.id&&L.value.splice(n,1)})):L.value.push({staff_name:e.label,staff_no:e.id,is_department:e.is_department})},checkedKeys:ee,selectPerson:L,deleteCheckedKeys:function(e,t){L.value.splice(t,1),Object(r.nextTick)((function(){null==ne||ne.value.setCheckedKeys(L.value.map((function(e){return e.staff_no})))}))},keywordTreeRef:ne,filterText:K,filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleAddPeople:ce,handleShadow:oe,open_share:$,link_share:F,classifyTag:M,hasPermissOpt:d,copyLink:E,CLASSIFY:W.d,LINKSHARE:W.i,PUBLICSHARE:W.m,creator:b,status:u}}});n("01e7"),n("1602");const nt=we()(tt,[["render",function(e,t,n,c,o,G){var J=Object(r.resolveComponent)("el-input"),Y=Object(r.resolveComponent)("el-avatar"),q=Object(r.resolveComponent)("el-button"),W=Object(r.resolveComponent)("Bell"),z=Object(r.resolveComponent)("el-icon"),X=Object(r.resolveComponent)("el-badge"),Z=Object(r.resolveComponent)("Notices"),$=Object(r.resolveComponent)("el-popover"),ee=Object(r.resolveComponent)("el-dropdown-item"),te=Object(r.resolveComponent)("el-dropdown-menu"),ne=Object(r.resolveComponent)("el-dropdown"),re=Object(r.resolveComponent)("Sidebar"),ce=Object(r.resolveComponent)("ShareClassify"),ae=Object(r.resolveComponent)("el-option"),oe=Object(r.resolveComponent)("el-select"),ie=Object(r.resolveComponent)("el-form-item"),le=Object(r.resolveComponent)("el-switch"),ue=Object(r.resolveComponent)("el-form"),se=Object(r.resolveComponent)("el-dialog"),de=Object(r.resolveComponent)("el-tree"),be=Object(r.resolveComponent)("el-scrollbar"),pe=Object(r.resolveComponent)("el-divider"),fe=Object(r.resolveComponent)("Close"),me=Object(r.resolveDirective)("loading");return Object(r.openBlock)(),Object(r.createElementBlock)("div",i,[Object(r.withDirectives)(Object(r.createElementVNode)("div",l,[Object(r.createElementVNode)("div",u,[Object(r.createElementVNode)("i",{onClick:t[0]||(t[0]=function(){return e.goBack&&e.goBack.apply(e,arguments)}),class:"iconfont icon-youjiantou pad-icon__back"}),Object(r.createElementVNode)("div",{class:"pad-top__left-wrap",style:Object(r.normalizeStyle)({marginTop:e.status?"0":"-12px"})},[Object(r.createVNode)(J,{disabled:2!==e.permission,onChange:e.onUpdateDocTitle,maxlength:"50",class:"pad-top__input",modelValue:e.title,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.title=t}),modelModifiers:{trim:!0},placeholder:"请输入标题"},null,8,["disabled","onChange","modelValue"]),Object(r.createElementVNode)("span",{class:Object(r.normalizeClass)([e.status?"doc-route-no":"doc-route"])},"文档存放于：我的空间/草稿箱",2)],4)]),e.onlineMembers.length?(Object(r.openBlock)(),Object(r.createElementBlock)("div",s,[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.onlineMembers,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(Y,{class:"pad-top__members-item",key:e.id,size:"15",style:Object(r.normalizeStyle)({backgroundColor:e.color})},{default:Object(r.withCtx)((function(){return[Object(r.createTextVNode)(Object(r.toDisplayString)(e.name),1)]})),_:2},1032,["style"])})),128))])):Object(r.createCommentVNode)("",!0),Object(r.createElementVNode)("div",d,[Object(r.createVNode)(q,{type:"primary",disabled:2!==e.permission,onClick:e.handleShare},{default:Object(r.withCtx)((function(){return[b]})),_:1},8,["disabled","onClick"]),Object(r.createElementVNode)("img",{class:"el-icon-full-screen",onClick:t[2]||(t[2]=function(){return e.toggleEditorFullScreen&&e.toggleEditorFullScreen.apply(e,arguments)}),src:a.a}),Object(r.createElementVNode)("div",{class:"side-wrapper__notice",onClick:t[5]||(t[5]=function(){return e.show()})},[Object(r.createVNode)($,{placement:"bottom-end",trigger:"hover",width:900,visible:e.visible,"onUpdate:visible":t[4]||(t[4]=function(t){return e.visible=t})},{reference:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("div",null,[Object(r.createVNode)(X,{value:e.notices,hidden:e.notices<=0,type:"danger",max:99},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(z,{class:"side-wrapper__notice-icon"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(W,{id:"icon"})]})),_:1})]})),_:1},8,["value","hidden"])])]})),default:Object(r.withCtx)((function(){return[Object(r.createVNode)(Z,{"onUpdate:show":e.show,notices:e.notices,"onUpdate:notices":t[3]||(t[3]=function(t){return e.notices=t})},null,8,["onUpdate:show","notices"])]})),_:1},8,["visible"])]),2!==e.status?(Object(r.openBlock)(),Object(r.createBlock)(ne,{key:0},{dropdown:Object(r.withCtx)((function(){return[Object(r.createVNode)(te,null,{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.dropList,(function(t){return Object(r.openBlock)(),Object(r.createBlock)(ee,{onClick:function(n){return e.handleMenuItem(t)},disabled:t.id>2&&2!==e.permission,key:t.id},{default:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("p",f,Object(r.toDisplayString)(t.label),1)]})),_:2},1032,["onClick","disabled"])})),128))]})),_:1})]})),default:Object(r.withCtx)((function(){return[p]})),_:1})):Object(r.createCommentVNode)("",!0)])],512),[[r.vShow,e.isShareSidebar]]),e.isShowContainer?(Object(r.openBlock)(),Object(r.createElementBlock)(r.Fragment,{key:0},[e.permission?(Object(r.openBlock)(),Object(r.createElementBlock)("div",m,[Object(r.withDirectives)(Object(r.createVNode)(re,{ref:"sidebar",docId:e.articleId,permission:e.permission,onOnEvent:e.onEvent},null,8,["docId","permission","onOnEvent"]),[[r.vShow,e.isShareSidebar]]),Object(r.createElementVNode)("iframe",{class:"pad-iframe",allowtransparency:!0,frameborder:"no",scrolling:"no",id:"padIframe",src:e.iframeHost},null,8,j)])):(Object(r.openBlock)(),Object(r.createElementBlock)(r.Fragment,{key:1},[2===e.status?(Object(r.openBlock)(),Object(r.createElementBlock)("div",O,"文档不存在")):0===e.status?(Object(r.openBlock)(),Object(r.createElementBlock)("div",v,"当前文档尚未分享，暂时无法查看。")):(Object(r.openBlock)(),Object(r.createElementBlock)("div",h,[Object(r.createElementVNode)("p",null,"文档设置了权限，您可以向 "+Object(r.toDisplayString)(e.creator)+" 申请权限",1),Object(r.createElementVNode)("p",null,[Object(r.createVNode)(q,{type:"primary",onClick:t[6]||(t[6]=function(t){return e.onApplyPermission(1)})},{default:Object(r.withCtx)((function(){return[k]})),_:1})]),Object(r.createElementVNode)("p",null,[Object(r.createVNode)(q,{onClick:t[7]||(t[7]=function(t){return e.onApplyPermission(2)})},{default:Object(r.withCtx)((function(){return[g]})),_:1})])]))],64))],64)):Object(r.createCommentVNode)("",!0),Object(r.withDirectives)((Object(r.openBlock)(),Object(r.createBlock)(se,{title:"分享",modelValue:e.dialogVisible,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.dialogVisible=t}),top:"8vh",width:"40%",center:"","append-to-body":!0,onClose:e.beforeClose,"before-close":e.beforeClose},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(ue,{model:e.formParams,"label-width":"100px",ref:"shareFormRef"},{default:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("ul",C,[e.hasPermissOpt?Object(r.createCommentVNode)("",!0):(Object(r.openBlock)(),Object(r.createElementBlock)("li",w,[Object(r.createVNode)(ce,{classify_id:e.formParams.classify_id,shareVisible:e.dialogVisible,onChange:e.onChangeSelect,trees:e.columnShareList},null,8,["classify_id","shareVisible","onChange","trees"])])),e.hasPermissOpt?Object(r.createCommentVNode)("",!0):(Object(r.openBlock)(),Object(r.createElementBlock)("li",y,[x,Object(r.createVNode)(ie,{class:"rp-select",label:""},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(oe,{modelValue:e.formParams.tag_id,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.formParams.tag_id=t}),onChange:t[9]||(t[9]=function(t){return e.handleShareDialog("select")}),props:{value:"id",label:"name"},"remote-method":e.getTagList,"multiple-limit":"3",multiple:"",remote:"",filterable:"",placeholder:"请搜索标签"},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.classifyTag,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(ae,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","remote-method"])]})),_:1})])),e.hasPermissOpt?Object(r.createCommentVNode)("",!0):(Object(r.openBlock)(),Object(r.createElementBlock)("li",V,[N,Object(r.createElementVNode)("div",E,[Object(r.createElementVNode)("div",B,[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.selectPerson,(function(e,t){return Object(r.openBlock)(),Object(r.createElementBlock)("span",{key:t},Object(r.toDisplayString)(e.staff_name),1)})),128))]),Object(r.createElementVNode)("span",{class:"rp-add-people",onClick:t[10]||(t[10]=function(){return e.handleAddPeople&&e.handleAddPeople.apply(e,arguments)})},"+")])])),Object(r.createElementVNode)("li",_,[Object(r.createElementVNode)("div",A,[R,Object(r.createVNode)(le,{"before-change":function(){return e.handleShareDialog("linkShare")},modelValue:e.link_share,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.link_share=t})},null,8,["before-change","modelValue"])]),e.link_share?(Object(r.openBlock)(),Object(r.createElementBlock)("div",S,[Object(r.createVNode)(oe,{modelValue:e.formParams.link_share,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.formParams.link_share=t}),onChange:t[13]||(t[13]=function(t){return e.handleShareDialog("select")}),placeholder:"请选择"},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.LINKSHARE,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(ae,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"]),e.link_share?(Object(r.openBlock)(),Object(r.createBlock)(q,{key:0,class:"rp-select-jurisdiction__permiss-btns",onClick:e.copyLink,type:"text"},{default:Object(r.withCtx)((function(){return[D]})),_:1},8,["onClick"])):Object(r.createCommentVNode)("",!0)])):(Object(r.openBlock)(),Object(r.createElementBlock)("div",T,"链接分享已关闭，仅协作者可查看和编辑（若公开分享开启，组织内其他成员也可查看或编辑）"))]),Object(r.createElementVNode)("li",I,[Object(r.createElementVNode)("div",M,[Q,Object(r.createVNode)(le,{"before-change":function(){return e.handleShareDialog("openShare")},modelValue:e.open_share,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.open_share=t})},null,8,["before-change","modelValue"])]),e.open_share?(Object(r.openBlock)(),Object(r.createBlock)(oe,{key:0,modelValue:e.formParams.open_share,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.formParams.open_share=t}),onChange:t[16]||(t[16]=function(t){return e.handleShareDialog("select")}),placeholder:"请选择"},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.PUBLICSHARE,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(ae,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])):(Object(r.openBlock)(),Object(r.createElementBlock)("div",U,"公开分享已关闭，仅协作者可查看和编辑（若链接分享开启，获得链接的人可查看或编辑）"))])])]})),_:1},8,["model"])]})),_:1},8,["modelValue","onClose","before-close"])),[[me,e.shareLoading]]),Object(r.createVNode)(se,{title:"添加成员","custom-class":"position-dialog",modelValue:e.dialogShadow,"onUpdate:modelValue":t[19]||(t[19]=function(t){return e.dialogShadow=t}),"append-to-body":!0,width:"40%"},{footer:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("span",P,[Object(r.createVNode)(q,{type:"primary",disabled:!e.dialogShadow,onClick:e.handleShadow},{default:Object(r.withCtx)((function(){return[F]})),_:1},8,["disabled","onClick"])])]})),default:Object(r.withCtx)((function(){return[e.allPeople?(Object(r.openBlock)(),Object(r.createElementBlock)("div",L,[Object(r.createVNode)(J,{placeholder:"输入姓名查找",modelValue:e.filterText,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.filterText=t})},null,8,["modelValue"]),Object(r.createVNode)(be,{height:"400px"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(de,{onCheck:e.handleCheckBoxEventByText,"node-key":"id","default-expand-all":"","show-checkbox":"","check-strictly":!0,data:e.allPeople,"default-checked-keys":e.checkedKeys,"filter-node-method":e.filterNode,ref:"keywordTreeRef"},null,8,["onCheck","data","default-checked-keys","filter-node-method"])]})),_:1})])):(Object(r.openBlock)(),Object(r.createElementBlock)("div",K,H)),Object(r.createElementVNode)("div",null,[Object(r.createVNode)(pe,{direction:"vertical"})]),Object(r.createElementVNode)("div",null,[Object(r.createVNode)(be,{height:"400px"},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.selectPerson,(function(t,n){return Object(r.openBlock)(),Object(r.createElementBlock)("div",{key:n,class:"current-checked-nodes"},[Object(r.createVNode)(q,{icon:"el-icon-user-solid",type:"text"},{default:Object(r.withCtx)((function(){return[Object(r.createTextVNode)(Object(r.toDisplayString)(t.staff_name),1)]})),_:2},1024),Object(r.createVNode)(z,{style:{"margin-right":"10px"},class:"el-icon-close",onClick:function(r){return e.deleteCheckedKeys(t,n)}},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(fe)]})),_:2},1032,["onClick"])])})),128))]})),_:1})])]})),_:1},8,["modelValue"])])}],["__scopeId","data-v-47b75cea"]]);t.default=nt},a26e:function(e,t,n){},a68b:function(e,t,n){"use strict";n("41e0")},c055:function(e,t,n){"use strict";n("f624")},cb04:function(e,t,n){},cc67:function(e,t,n){},d296:function(e,t,n){"use strict";var r=n("1da1"),c=(n("96cf"),n("a9e3"),n("d81d"),n("159b"),n("7a23")),a=n("d257"),o=n("8b6f"),i=n("1f63"),l={class:"rp-classify-list"},u={key:0,class:"drag-title"},s={class:"document-classify-content"},d={key:0,style:{"font-size":"14px","margin-right":"10px","margin-top":"2px"},class:"iconfont icon-document-artical"},b={key:1,style:{"font-size":"14px","margin-right":"10px","margin-top":"2px"},class:"iconfont icon-document"},p={style:{"font-size":"14px"},class:"el-tree-node__label node-name"},f={class:"dialog-footer"},m=Object(c.createTextVNode)("关 闭"),j=Object(c.defineComponent)({props:{visible:{type:Boolean,default:!1},sortTreeDate:{type:Object,default:function(){return{}}},type:{type:Number,default:0}},emits:["update:visible","updateTree"],setup:function(e,t){var n=t.emit,j=e,O=Object(c.ref)(),v=Object(i.a)().useModifyWikiSort,h=Object(c.reactive)({id:0,order:0,parent_id:0}),k=Object(c.computed)({get:function(){return j.visible},set:function(e){n("update:visible",e)}}),g=Object(c.computed)((function(){return["调整分类排序","调整子文档位置"][j.type]})),C=Object(c.computed)((function(){return j.sortTreeDate.map((function(e){return Object.assign(e,{})}))})),w=function(){n("update:visible",!1)},y=function(e){h.id=e.data.id},x=function(e,t){var n=t.data;if(t.parent.data.children&&t.parent.data.children.forEach((function(e){e.id===h.id&&(n=t.parent.data)})),t.data.children&&t.data.children.forEach((function(e){e.id===h.id&&(n=t.data)})),n.children&&n.children.length){var r=n.children;h.parent_id=n.id,1===r.length?h.order=1:r.forEach((function(e,t){var n,c,a;e.id===h.id&&(h.order=null!==(n=r[t-1])&&void 0!==n&&n.order?null===(c=r[t-1])||void 0===c?void 0:c.order:1,null!==(a=r[t-1])&&void 0!==a&&a.order&&++h.order)}))}if(t.data.parent_id||(h.parent_id=0,h.order=1),0===j.type)N(h);else{var c=h.id,a=h.order,o=h.parent_id;E({current_id:c,seq:a,target_id:o})}},V=function(e){return 1!==e.data.level},N=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.w)({asyncFunc:o.y,args:t});case 2:n("updateTree");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:return e.abrupt("return",n("updateTree"));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return function(t,n){var r=Object(c.resolveComponent)("el-tree"),a=Object(c.resolveComponent)("el-button"),o=Object(c.resolveComponent)("el-dialog");return Object(c.openBlock)(),Object(c.createElementBlock)("div",l,[Object(c.createVNode)(o,{top:"6vh",title:Object(c.unref)(g),modelValue:Object(c.unref)(k),"onUpdate:modelValue":n[1]||(n[1]=function(e){return Object(c.isRef)(k)?k.value=e:null}),onClose:w,width:"40%"},{footer:Object(c.withCtx)((function(){return[Object(c.createElementVNode)("span",f,[Object(c.createVNode)(a,{onClick:n[0]||(n[0]=function(e){return k.value=!1})},{default:Object(c.withCtx)((function(){return[m]})),_:1})])]})),default:Object(c.withCtx)((function(){return[1===e.type?(Object(c.openBlock)(),Object(c.createElementBlock)("span",u,"拖拽子文档，调整它在文档树导航的顺序和位置")):Object(c.createCommentVNode)("",!0),Object(c.createElementVNode)("div",s,[Object(c.createVNode)(r,{data:Object(c.unref)(C),"node-key":"id",draggable:"",ref_key:"classifyTree",ref:O,onNodeDrop:x,onNodeDragEnd:y,"default-expand-all":!0,props:{children:"children",label:"label"},"allow-drag":V,"highlight-current":!0},{default:Object(c.withCtx)((function(t){var n=t.node,r=t.data;return[r.parent_id&&1===e.type?(Object(c.openBlock)(),Object(c.createElementBlock)("i",d)):Object(c.createCommentVNode)("",!0),r.parent_id&&0===e.type?(Object(c.openBlock)(),Object(c.createElementBlock)("i",b)):Object(c.createCommentVNode)("",!0),Object(c.createElementVNode)("span",p,Object(c.toDisplayString)(n.label),1)]})),_:1},8,["data"])])]})),_:1},8,["title","modelValue"])])}}});n("11be");const O=j;t.a=O},d415:function(e,t,n){"use strict";n("a26e")},e3ad:function(e,t,n){"use strict";n("182a")},f624:function(e,t,n){},fd59:function(e,t,n){"use strict";n("cb04")}}]);