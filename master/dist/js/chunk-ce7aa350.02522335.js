(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ce7aa350"],{"645d":function(e,t,a){"use strict";a("8992")},8992:function(e,t,a){},c36d:function(e,t,a){"use strict";a.r(t);var n=a("2909"),r=a("1da1"),c=a("5530"),i=(a("96cf"),a("99af"),a("7db0"),a("b0c0"),a("7a23")),o=a("d257"),s=a("8897"),l=a("b781"),u=a("efa4"),b=a("fbaf"),d=a("59a4"),p=a("eaf6"),f=a("5a0c"),m=a.n(f),O=a("a4d4"),j=a("6c02"),v={class:"rp-work-todo"},k={class:"todo-list"},g={"infinite-scroll-immediate":!1,class:"todo-list-content"},x=["onClick"],D=Object(i.defineComponent)(Object(c.a)(Object(c.a)({},{name:"todoList"}),{},{props:{formParams:{type:Object,default:function(){return{}}},defaultMenu:{type:String,default:""}},emits:["updateData","lookDetail"],setup:function(e,t){var a,c=t.emit,f=e,D=Object(p.a)().tipMessage,w=Object(j.e)(),y=Object(i.ref)(!1),_=Object(i.ref)(!1),h=Object(i.ref)(!1),N=Object(i.ref)(),S=Object(i.reactive)({department:[],team_worker:[],selectPerson:[],day:{},type:4,abeyancenEditItem:{}}),B=JSON.parse(JSON.stringify(f.formParams)),E=Object(i.reactive)([{borderColor:"#737373",titleName:"todo",status:1,color:"#333",event:function(){E[0].page_index++,B.page_index=E[0].page_index,I(1)},listData:[],hasData:!0,page_index:1,page_size:30},{borderColor:"#1f9f85",titleName:"doing",event:function(){E[1].page_index++,B.page_index=E[1].page_index,I(2)},status:1,color:"#333",listData:[],hasData:!0,page_index:1,page_size:30},{borderColor:"#999",titleName:"done",event:function(){E[2].page_index++,B.page_index=E[2].page_index,I(3)},status:1,color:"#a0a0a0",listData:[],hasData:!0,page_index:1,page_size:30}]),I=function(e){clearTimeout(a),a=setTimeout(Object(r.a)(regeneratorRuntime.mark((function t(){var a,r,c,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.k)(B);case 2:if(!(a=t.sent).data){t.next=35;break}if(r=a.data,c=r.doing_row,i=r.done_row,o=r.todo_row,!e){t.next=30;break}if(2!==e){t.next=14;break}if(c){t.next=11;break}return t.abrupt("return",D(200,"到底啦~~"));case 11:E[1].listData=[].concat(Object(n.a)(E[1].listData),Object(n.a)(c));case 12:t.next=28;break;case 14:if(3!==e){t.next=22;break}if(i){t.next=19;break}return t.abrupt("return",D(200,"到底啦~~"));case 19:E[2].listData=[].concat(Object(n.a)(E[2].listData),Object(n.a)(i));case 20:t.next=28;break;case 22:if(1!==e){t.next=28;break}if(o){t.next=27;break}return t.abrupt("return",D(200,"到底啦~~"));case 27:E[0].listData=[].concat(Object(n.a)(E[0].listData),Object(n.a)(o));case 28:t.next=33;break;case 30:E[0].listData=o||[],E[1].listData=c||[],E[2].listData=i||[];case 33:t.next=38;break;case 35:E[0].listData=[],E[1].listData=[],E[2].listData=[];case 38:case"end":return t.stop()}}),t)}))),500)},V=function(e,t){var a=o.t.find((function(t){return t.value===e}));return t?{background:null==a?void 0:a.color}:null==a?void 0:a.label},C=Object(d.a)().useGetBackLogDetail,J=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(4!==t.type){e.next=7;break}return e.next=3,J({id:t.target_id,month:m()(t.start_time).format("YYYY-MM-DD")});case 3:(a=e.sent)&&(S.abeyancenEditItem=a,S.day={day:t.start_time},N.value=a,y.value=!0),e.next=8;break;case 7:c("lookDetail",t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){c("updateData"),y.value=!1,I()};O.a.on("drawStatus",(function(e){if(("/workbench/dashboard"===w.path||"/workbench/workItem"===w.path)&&!e){var t=Object(o.G)("workItemDefauldTab");t&&"2"===t&&(B.page_index=1,B.page_size=30,I())}}));var z=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.value=!0;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(e){h.value=e},U=function(e){var t=e.department,a=e.team_worker,n=e.selectPerson;S.department=t,S.team_worker=a,S.selectPerson=n};return Object(i.watch)((function(){return f.formParams}),(function(){B=JSON.parse(JSON.stringify(f.formParams)),E[0].page_index=1,E[1].page_index=1,E[2].page_index=1,Object(i.nextTick)((function(){I()}))}),{deep:!0,immediate:!0}),Object(i.watch)((function(){return f.defaultMenu}),(function(){B=JSON.parse(JSON.stringify(f.formParams)),I()}),{deep:!0,immediate:!0}),function(e,t){var a=Object(i.resolveDirective)("infinite-scroll");return Object(i.openBlock)(),Object(i.createElementBlock)("div",v,[(Object(i.openBlock)(!0),Object(i.createElementBlock)(i.Fragment,null,Object(i.renderList)(Object(i.unref)(E),(function(e,t){return Object(i.openBlock)(),Object(i.createElementBlock)("div",{class:"todo-content",key:t},[Object(i.createElementVNode)("div",{class:"todo-list-title",style:Object(i.normalizeStyle)({borderColor:e.borderColor})},Object(i.toDisplayString)(e.titleName),5),Object(i.createElementVNode)("div",k,[Object(i.withDirectives)((Object(i.openBlock)(),Object(i.createElementBlock)("ul",g,[(Object(i.openBlock)(!0),Object(i.createElementBlock)(i.Fragment,null,Object(i.renderList)(e.listData,(function(t,a){return Object(i.openBlock)(),Object(i.createElementBlock)("li",{key:a,class:"todo-list-item",onClick:Object(i.withModifiers)((function(e){return P(t)}),["stop"])},[Object(i.createElementVNode)("span",{class:"type-status-tag",style:Object(i.normalizeStyle)(V(t.type,1))},Object(i.toDisplayString)(V(t.type,0)),5),Object(i.createElementVNode)("span",{class:"project-title",style:Object(i.normalizeStyle)({color:e.color})},Object(i.toDisplayString)(t.name),5)],8,x)})),128))])),[[a,e.event]])])])})),128)),Object(i.createVNode)(u.a,{personInfo:Object(i.unref)(S),onHandleItem:z,item:N.value,onShow:M,onUpdateData:R,visible:_.value,"onUpdate:visible":t[0]||(t[0]=function(e){return _.value=e})},null,8,["personInfo","item","visible"]),Object(i.createVNode)(l.a,{personInfo:Object(i.unref)(S),onHandleItem:z,item:N.value,type:4,onUpdateData:R,tipsVisible:y.value,"onUpdate:tipsVisible":t[1]||(t[1]=function(e){return y.value=e})},null,8,["personInfo","item","tipsVisible"]),Object(i.createVNode)(b.a,{onSubmit:U,visible:h.value,"onUpdate:visible":t[2]||(t[2]=function(e){return h.value=e}),item:Object(i.unref)(S).abeyancenEditItem},null,8,["visible","item"])])}}})),w=(a("645d"),a("6b0d"));const y=a.n(w)()(D,[["__scopeId","data-v-e294bfd6"]]);t.default=y}}]);