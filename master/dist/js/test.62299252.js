(window.webpackJsonp=window.webpackJsonp||[]).push([["test"],{1577:function(e,t,a){"use strict";a.r(t);var n=a("7a23"),r=a("6b0d");const l=a.n(r)()({},[["render",function(e,t){return Object(n.openBlock)(),Object(n.createElementBlock)("div")}]]);t.default=l},"167f":function(e,t,a){},"39d7":function(e,t,a){},"3e85":function(e,t,a){"use strict";a("a4b0")},"436c":function(e,t,a){"use strict";a.r(t),a("b0c0"),a("caad"),a("a4d3"),a("e01a");var n=a("7a23"),r={key:0,class:"rp-test"},l={class:"search-header"},o={class:"search-left"},c={class:"search-right"},u=Object(n.createTextVNode)("导出"),i=Object(n.createTextVNode)("新增BUG"),d=["onClick"],s=["onClick"],f=Object(n.createTextVNode)("复制"),b={class:"rp-test-list-num"},p={key:0,class:"rp-use-task-opation"},m=Object(n.createTextVNode)(" 基础项 "),v={class:"dialog-footer"},O=Object(n.createTextVNode)("保 存"),j=Object(n.createTextVNode)("取 消"),h={class:"dialog-footer"},_=Object(n.createTextVNode)("保 存"),g=Object(n.createTextVNode)("取 消"),k={key:1,class:"empty-block"},w=a("5530"),y=a("1da1"),C=(a("96cf"),a("7db0"),a("a434"),a("fb6a"),a("d81d"),a("ac1f"),a("1276"),a("159b"),a("4de4"),a("d3b7"),a("3ca3"),a("ddb0"),a("5319"),a("5a0c")),V=a.n(C),B=a("afbc"),x=a("6c02"),N=a("3740"),F=a("0613"),D=a("7f6ba"),T=(a("a9e3"),a("b23d")),S=a("d257"),E=a("3532"),L=a("2ef0"),A=a("aa80"),R=a("eaf6"),U=a("7085"),I=a("f6f2"),M=a("38d1"),P=a("23c4"),H=a("81ab"),G={class:"rp-form-content"},z={style:{display:"flex","align-items":"center","margin-left":"10px"}},K={class:"default-form-item",style:{display:"flex","align-items":"center",width:"100px"}},Y=Object(n.createElementVNode)("i",{style:{width:"30px",position:"absolute",left:"110px"}},"小时",-1),q={class:"file-list"},J=Object(n.createElementVNode)("div",{class:"file-title"},"附件",-1),W={class:"upload-icon"},Q={class:"list-detail"},$=["onClick"],Z={class:"detail-right"},X=Object(n.defineComponent)(Object(w.a)(Object(w.a)({},{name:"FormBug"}),{},{props:{drawerForm:{type:Object,default:function(){}},staffList:{type:Array,default:function(){return[]}},currIterateId:{type:Number,default:0}},emits:["onHandle"],setup:function(e,t){var a=t.emit,r=e,l=Object(n.computed)((function(){return B.a.currentRoute.value.meta.inIteration})),o=Object(R.a)().tipMessage,c=Object(S.G)("user",!0),u=Object(n.ref)([]),i=Object(n.ref)([]),d=Object(n.ref)([]),s=Object(n.ref)([]),f=Object(n.ref)([]),b=Object(n.computed)((function(){return B.a.currentRoute.value})),p=S.b.slice().splice(1,S.b.length);Object(n.onMounted)((function(){h()}));var m=function(e){Object(U.a)({product_id:e}).then((function(e){200===e.code?i.value=e.data:i.value=[]}))},v=function(e){Object(H.t)({product_id:e}).then((function(e){200===e.code?d.value=e.data:d.value=[]}))},O=function(e){var t=0;!r.drawerForm.id&&l.value&&(t=r.currIterateId);var a={product_id:e,iteration_id:t};Object(H.m)(a).then((function(e){200===e.code?s.value=e.data:s.value=[]}))},j=function(e){var t=0;!r.drawerForm.id&&l.value&&(t=r.currIterateId);var a={product_id:e,iteration_id:t};Object(H.C)(a).then((function(e){200===e.code?f.value=e.data:f.value=[]}))},h=function(){Object(M.Z)().then((function(e){200===e.code&&e.data.length?u.value=e.data:u.value=[]}))},_=Object(n.computed)((function(){return r.drawerForm.attachment})),g=function(e,t,a){if(w.value=!1,e.url){var n=a.slice().map((function(e){return{title:e.name,addr:e.response?e.response.url:e.url,size:e.response?e.response.size:e.size,file_type:e.response?e.response.file_type:"",creator:null==c?void 0:c.name,create_time:V()().format("YYYY-MM-DD HH:mm:ss")}}));if(_.value.unshift(n[n.length-1]),r.drawerForm.attachment=_.value,!r.drawerForm.id)return;var l={id:[r.drawerForm.id],attachment:_.value,field:"attachment"};k(l)}},k=function(e,t){Object(A.o)(e).then((function(n){if(200===n.code)return a("onHandle",e.id[0]),o(200,t||"成功")}))},w=Object(n.ref)(!1),C=function(){w.value=!0},x=function(e,t){var a=Object(L.find)(t,(function(t){return e===t.name}));return null==a?void 0:a.id},N=function(){var e=Object(y.a)(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.drawerForm[a]=t,"product_id"!==a){e.next=14;break}return r.drawerForm.task_id=null,r.drawerForm.demand_id=null,r.drawerForm.iteration_id="",r.drawerForm.test_case_id=null,e.next=8,m(t);case 8:return e.next=10,v(t);case 10:return e.next=12,O(t);case 12:return e.next=14,j(t);case 14:if(r.drawerForm.id){e.next=16;break}return e.abrupt("return");case 16:if(n={id:[r.drawerForm.id],field:"".concat(a)},"hours"!==a){e.next=24;break}if(/^\+?[0-9][0-9]*$/.test(t)){e.next=21;break}return e.abrupt("return",o(400,"请输入大于0的正整数"));case 21:if(!((t=parseInt(t,10))>999||t<=0)){e.next=24;break}return e.abrupt("return",o(400,"请输入0到999的正整数"));case 24:["env","iteration_id","demand_id","task_id","test_case_id","cause"].includes(a)&&!t?n[a]=0:n[a]=t,k(n);case 26:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.watch)(r.drawerForm,Object(L.throttle)((function(e){var t,a,n,l;r.staffList[1]&&(Object(L.find)(null===(t=r.staffList[1])||void 0===t?void 0:t.options,(function(e){var t;return(null===(t=r.drawerForm)||void 0===t?void 0:t.staff_no)===e.staff_no}))||(null===(a=r.drawerForm)||void 0===a?void 0:a.staff_no)===(null===(n=r.drawerForm)||void 0===n?void 0:n.staff_name)||(r.drawerForm.staff_no=null===(l=r.drawerForm)||void 0===l?void 0:l.staff_name)),m(e.product_id),v(e.product_id),O(e.product_id),j(e.product_id)}),300),{immediate:!0}),function(t,a){var l=Object(n.resolveComponent)("el-option"),o=Object(n.resolveComponent)("el-select"),c=Object(n.resolveComponent)("el-form-item"),m=Object(n.resolveComponent)("el-option-group"),v=Object(n.resolveComponent)("el-input"),O=Object(n.resolveComponent)("el-form"),j=Object(n.resolveComponent)("el-icon"),h=Object(n.resolveComponent)("el-upload"),y=Object(n.resolveDirective)("loading");return Object(n.openBlock)(),Object(n.createElementBlock)("div",G,[Object(n.createVNode)(O,{model:e.drawerForm,ref:"ruleFormRef","label-position":"left","label-width":"100px"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(c,{label:"类型",prop:"type"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(o,{onChange:a[0]||(a[0]=function(e){return N(e,"type")}),popperAppendToBody:!1,class:"reset-select",filterable:"",modelValue:e.drawerForm.type,"onUpdate:modelValue":a[1]||(a[1]=function(t){return e.drawerForm.type=t}),placeholder:"请选择类型"},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(Object(n.unref)(S.c),(function(e){return Object(n.openBlock)(),Object(n.createBlock)(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n.createVNode)(c,{label:"状态",prop:"status"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(o,{onChange:a[2]||(a[2]=function(e){return function(e,t){if(r.drawerForm.id){var a="";[4,5].includes(e)&&(a="状态修改成功，请填写解决方案。"),[2].includes(e)&&(a="状态已修改为已解决，请填写修复耗时。");var n={id:[r.drawerForm.id],field:"".concat(t)};n[t]=e,k(n,a)}}(e,"status")}),popperAppendToBody:!1,class:"reset-select",filterable:"",disabled:!e.drawerForm.id,modelValue:e.drawerForm.status,"onUpdate:modelValue":a[3]||(a[3]=function(t){return e.drawerForm.status=t}),placeholder:"请选择状态"},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(Object(n.unref)(p),(function(e){return Object(n.openBlock)(),Object(n.createBlock)(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["disabled","modelValue"])]})),_:1}),Object(n.createVNode)(c,{label:"指派给",prop:"staff_no"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(o,{onChange:a[4]||(a[4]=function(e){return N(e,"staff_no")}),popperAppendToBody:!1,class:"reset-select",filterable:"",modelValue:e.drawerForm.staff_no,"onUpdate:modelValue":a[5]||(a[5]=function(t){return e.drawerForm.staff_no=t}),placeholder:"请选择指派人"},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(e.staffList,(function(e){return Object(n.openBlock)(),Object(n.createBlock)(m,{key:e.staff_no,label:e.label},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(e.options,(function(e){return Object(n.openBlock)(),Object(n.createBlock)(l,{key:e.staff_no,label:e.staff_name,value:e.staff_no},null,8,["label","value"])})),128))]})),_:2},1032,["label"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n.createVNode)(c,{label:"级别",prop:"level",required:""},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(o,{onChange:a[6]||(a[6]=function(e){return N(e,"level")}),popperAppendToBody:!1,class:"reset-select",filterable:"",modelValue:e.drawerForm.level,"onUpdate:modelValue":a[7]||(a[7]=function(t){return e.drawerForm.level=t}),placeholder:"请选择级别"},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(Object(n.unref)(S.a),(function(e){return Object(n.openBlock)(),Object(n.createBlock)(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n.createVNode)(c,{label:"优先级",prop:"priority",required:""},{default:Object(n.withCtx)((function(){return[Object(n.createElementVNode)("div",z,[Object(n.createElementVNode)("em",{style:Object(n.normalizeStyle)({width:"8px",height:"8px",marginRight:"4px",display:"inline-block",borderRadius:"5px",background:(t=e.drawerForm.priority,r=P.p.find((function(e){return e.id==t})),null==r?void 0:r.color)})},null,4),Object(n.createVNode)(o,{style:{display:"flex",flex:1},popperAppendToBody:!1,onChange:a[8]||(a[8]=function(e){return N(e,"priority")}),class:"reset-select",filterable:"",modelValue:e.drawerForm.priority,"onUpdate:modelValue":a[9]||(a[9]=function(t){return e.drawerForm.priority=t}),placeholder:"请选择优先级"},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(Object(n.unref)(P.p),(function(e){return Object(n.openBlock)(),Object(n.createBlock)(l,{key:e.id,label:e.value,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])])];var t,r})),_:1}),Object(n.createVNode)(c,{label:"所属环境",prop:"env"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(o,{onChange:a[10]||(a[10]=function(e){return N(e,"env")}),popperAppendToBody:!1,class:"reset-select",filterable:"",clearable:"",modelValue:e.drawerForm.env,"onUpdate:modelValue":a[11]||(a[11]=function(t){return e.drawerForm.env=t}),placeholder:"请选择环境"},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(Object(n.unref)(S.g),(function(e){return Object(n.openBlock)(),Object(n.createBlock)(l,{key:e.id,label:e.value,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n.createVNode)(c,{label:"所属项目",prop:"product_id",required:""},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(o,{onChange:a[12]||(a[12]=function(e){return N(x(e,u.value),"product_id")}),popperAppendToBody:!1,class:"reset-select",filterable:"",modelValue:e.drawerForm.product_name,"onUpdate:modelValue":a[13]||(a[13]=function(t){return e.drawerForm.product_name=t}),placeholder:"请选择项目",disabled:Object(n.unref)(b).meta.inIteration},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(u.value,(function(e){return Object(n.openBlock)(),Object(n.createBlock)(l,{key:e.id,label:e.name,value:e.name},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","disabled"])]})),_:1}),Object(n.createVNode)(c,{label:"所属迭代",prop:"iteration_id"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(o,{onChange:a[14]||(a[14]=function(e){return N(x(e,i.value),"iteration_id")}),popperAppendToBody:!1,class:"reset-select",filterable:"",clearable:"",modelValue:e.drawerForm.iteration_name,"onUpdate:modelValue":a[15]||(a[15]=function(t){return e.drawerForm.iteration_name=t}),placeholder:"请选择迭代",disabled:Object(n.unref)(b).meta.inIteration},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(i.value,(function(e){return Object(n.openBlock)(),Object(n.createBlock)(l,{key:e.id,label:e.name,value:e.name},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","disabled"])]})),_:1}),Object(n.createVNode)(c,{label:"关联需求",prop:"demand_id"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(o,{onChange:a[16]||(a[16]=function(e){return N(x(e,d.value),"demand_id")}),popperAppendToBody:!1,class:"reset-select",filterable:"",clearable:"",modelValue:e.drawerForm.demand_name,"onUpdate:modelValue":a[17]||(a[17]=function(t){return e.drawerForm.demand_name=t}),placeholder:"请选择需求"},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(d.value,(function(e){return Object(n.openBlock)(),Object(n.createBlock)(l,{key:e.id,label:e.name,value:e.name},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n.createVNode)(c,{label:"关联任务",prop:"task_id"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(o,{onChange:a[18]||(a[18]=function(e){return N(x(e,s.value),"task_id")}),popperAppendToBody:!1,class:"reset-select",filterable:"",clearable:"",modelValue:e.drawerForm.task_name,"onUpdate:modelValue":a[19]||(a[19]=function(t){return e.drawerForm.task_name=t}),placeholder:"请选择任务"},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(s.value,(function(e){return Object(n.openBlock)(),Object(n.createBlock)(l,{key:e.id,label:e.name,value:e.name},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n.createVNode)(c,{label:"关联用例",prop:"test_case_id"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(o,{onChange:a[20]||(a[20]=function(e){return N(x(e,f.value),"test_case_id")}),popperAppendToBody:!1,class:"reset-select",filterable:"",clearable:"",modelValue:e.drawerForm.test_case_name,"onUpdate:modelValue":a[21]||(a[21]=function(t){return e.drawerForm.test_case_name=t}),placeholder:"请选择用例"},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(f.value,(function(e){return Object(n.openBlock)(),Object(n.createBlock)(l,{key:e.id,label:e.name,value:e.name},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),e.drawerForm.id?(Object(n.openBlock)(),Object(n.createBlock)(c,{key:0,label:"解决方案",prop:"cause"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(o,{onChange:a[22]||(a[22]=function(e){return N(e,"cause")}),popperAppendToBody:!1,class:"reset-select",filterable:"",clearable:"",modelValue:e.drawerForm.cause,"onUpdate:modelValue":a[23]||(a[23]=function(t){return e.drawerForm.cause=t}),placeholder:"请选择解决方案"},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(Object(n.unref)(P.s),(function(e){return Object(n.openBlock)(),Object(n.createBlock)(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})):Object(n.createCommentVNode)("",!0),e.drawerForm.id?(Object(n.openBlock)(),Object(n.createBlock)(c,{key:1,label:"修复耗时",prop:"hours"},{default:Object(n.withCtx)((function(){return[Object(n.createElementVNode)("div",K,[Object(n.createVNode)(v,{type:"number",onChange:a[24]||(a[24]=function(e){return N(e,"hours")}),modelValue:e.drawerForm.hours,"onUpdate:modelValue":a[25]||(a[25]=function(t){return e.drawerForm.hours=t})},null,8,["modelValue"]),Y])]})),_:1})):Object(n.createCommentVNode)("",!0)]})),_:1},8,["model"]),Object(n.createElementVNode)("div",q,[J,Object(n.createElementVNode)("div",null,[Object(n.withDirectives)((Object(n.openBlock)(),Object(n.createBlock)(h,{"before-upload":C,"show-file-list":!1,"on-success":g,action:Object(n.unref)(T.a).uploadAssets,multiple:!1},{default:Object(n.withCtx)((function(){return[Object(n.createElementVNode)("span",W,[Object(n.createVNode)(j,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(Object(n.unref)(I.Plus))]})),_:1})])]})),_:1},8,["action"])),[[y,w.value]]),Object(n.createElementVNode)("ul",Q,[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(Object(n.unref)(_),(function(e){return Object(n.openBlock)(),Object(n.createElementBlock)("li",{key:e.addr,onClick:function(t){return a=e,void Object(E.a)(a.title,a.addr);var a}},[Object(n.createVNode)(j,{class:"list-detail-icon"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(Object(n.unref)(I.Document))]})),_:1}),Object(n.createElementVNode)("div",Z,[Object(n.createVNode)(j,{class:"icon-remove",onClick:Object(n.withModifiers)((function(t){return function(e){if(_.value.splice(e,1),r.drawerForm.id){var t={id:[r.drawerForm.id],attachment:_.value,field:"attachment"};k(t)}}(e)}),["stop"])},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(Object(n.unref)(I.Close))]})),_:2},1032,["onClick"]),Object(n.createElementVNode)("p",null,Object(n.toDisplayString)(e.title),1),Object(n.createElementVNode)("p",null,Object(n.toDisplayString)(e.creator)+" "+Object(n.toDisplayString)(e.create_time),1)])],8,$)})),128))])])])])}}}));a("b7c0"),a("7e02");var ee=X,te=a("3a3a"),ae=a("0472"),ne=a("913c"),re=a("c252");function le(){return oe.apply(this,arguments)}function oe(){return(oe=Object(y.a)(regeneratorRuntime.mark((function e(){var t,a,n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:1,a=r.length>1&&void 0!==r[1]?r[1]:20,n=r.length>2?r[2]:void 0,e.next=5,Object(A.h)(Object(w.a)(Object(w.a)({},n),{},{page_index:t,page_size:a}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ce=a("a069"),ue=a("71ee"),ie=a("9fe0"),de=a("5d09"),se=a("f4d4"),fe=Object(n.defineComponent)({name:"Refresh"});const be={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},pe=Object(n.createVNode)("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"},null,-1);fe.render=function(e,t,a,r,l,o){return Object(n.openBlock)(),Object(n.createBlock)("svg",be,[pe])},fe.__file="packages/components/Refresh.vue";var me=fe,ve=a("9b06"),Oe=Object(n.defineComponent)({name:"test",components:{Drawer:ae.a,FormBug:ee,ArrowUp:D.a,FullScreen:ue.a,WangEditor:ce.a,dialogDemand:de.a,ArrowDown:se.a,Refresh:me,selectOption:ve.a},setup:function(){var e,t,a=Object(F.c)(),r=Object(x.e)(),l=Object(n.ref)(),o=Object(R.a)().tipMessage,c=Object(n.ref)(!1),u=Object(n.reactive)({bug_id:0,remark:null,staff_no:""}),i=Object(n.ref)(!1),d=Object(n.ref)(!1),s=Object(n.ref)(!0),f=Object(n.ref)(!0),b=Object(n.ref)(!1),p=Object(n.ref)([]),m=Object(n.computed)((function(){return a.getters.iterateId})),v=Object(n.computed)((function(){return a.getters.currentIter})),O=Object(n.computed)((function(){var e;return null==a||null===(e=a.getters)||void 0===e?void 0:e.productId})),j=Object(n.computed)((function(){var e;return null==a||null===(e=a.getters)||void 0===e?void 0:e.productInfo})),h=Object(n.computed)((function(){return B.a.currentRoute.value.meta.inIteration})),_=Object(n.ref)(!0),g=function(){"test2"!==B.a.currentRoute.value.name||m.value?_.value=!0:_.value=!1};g();var k=Object(n.ref)([]),C=Object(n.ref)([]),D=Object(n.ref)([]),T=Object(n.ref)([]),E=Object(n.ref)([]),I=Object(n.ref)([]),M=Object(n.ref)([]),G=Object(n.ref)([]),z=Object(n.ref)([]),K=Object(n.ref)(1),Y=Object(n.ref)(20),q=Object(n.ref)([]),J={env:[],type:[],level:[],status:[],name:null,end_time:"",product_id:"",create_time:"",create_by:[],iteration_id:[],staff_no:[],staff_name:[]},W=Object(n.reactive)({list:[],total:0,bugType:{serious_num:0,unsolved_num:0,unvalidated_num:0}}),Q=Object(n.ref)(!1),$=Object(n.ref)("-1"),Z=Object(n.ref)(!1),X=Object(n.ref)({}),ee=Object(n.reactive)(Object(L.cloneDeep)(J)),ae=S.b.slice().splice(1,S.b.length),oe=[{id:"-1",label:"所有",key:""},{id:"0,1,6",label:"未解决",key:"status"},{id:"2,5",label:"待验证",key:"status"},{id:"4",label:"延期处理",key:"status"},{id:"6",label:"我创建的",key:"create_by"},{id:"7",label:"指给我的",key:"staff_no"},{id:"8",label:"本月",key:"create_time"}],ce=[{type:"input",label:"名称",key:"name",val:""},{type:"select",label:"状态",val:[],multiple:!0,key:"status",valueKey:["value","label"],listData:ae},{type:"select",label:"创建人",val:[],key:"create_by",showRecord:!0,multiple:!0,valueKey:["staff_no","staff_name"],listData:q},{type:"select",label:"指派给",val:[],key:"staff_no",showRecord:!0,multiple:!0,valueKey:["staff_no","staff_name"],listData:q},{type:"select",label:"优先级",val:[],key:"priority",multiple:!0,valueKey:["id","value"],listData:P.p},{type:"select",label:"级别",val:[],key:"level",multiple:!0,listData:S.a},{type:"select",label:"类型",multiple:!1,val:[],key:"type",listData:S.c},{type:"select",label:"所属环境",multiple:!1,val:[],key:"env",valueKey:["id","value"],listData:S.g},{type:"select",label:"关联需求",multiple:!1,val:[],key:"demand_id",valueKey:["id","name"],listData:k},{type:"select",label:"关联迭代",multiple:!1,val:[],key:"iteration_id",valueKey:["id","name"],listData:G},{type:"select",label:"关联任务",multiple:!1,val:[],key:"task_id",valueKey:["id","name"],listData:I},{type:"select",label:"关联用例",multiple:!1,val:[],key:"test_case_id",valueKey:["id","name"],listData:M},{type:"daterange",label:"创建时间",multiple:!1,val:[],key:"create_time",listData:[]}],ue=Object(n.reactive)({btnArray:oe,searchForm:ce}),de={id:null,env:1,type:1,hours:null,level:1,cause:null,status:0,task_id:null,priority:3,demand_id:null,test_case_id:null,name:"",remark:"",staff_no:"",task_name:"",staff_name:"",demand_name:"",test_case_name:"",list:[],attachment:[],iteration_id:"",iteration_name:"",product_name:null===(e=j.value)||void 0===e?void 0:e.name,product_id:null===(t=j.value)||void 0===t?void 0:t.id,description:"<p><b>[步骤]</b><br/><br/><br/><b>[结果]<br/></b><br/><br/><b>[期望]<br/></b><br/><br/></p>"},se=Object(n.ref)(Object(L.cloneDeep)(de)),fe=Object(n.ref)(!1),be=Object(n.ref)(1),pe=Object(n.ref)("view"),me=Object(n.ref)("view"),ve=Object(n.ref)("新增需求"),Oe=Object(n.ref)(),je=Object(n.ref)(),he=Object(n.ref)(1),_e=Object(n.ref)(!1),ge=Object(n.ref)([{value:"status",label:"状态",children:ae},{value:"priority",label:"优先级",children:P.p.map((function(e){return{value:e.id,label:e.value}}))},{value:"level",label:"级别",children:S.a},{value:"type",label:"类型",children:S.c},{value:"staff_no",label:"指派给",children:[]},{value:"iteration_id",label:"迭代",children:z}]);Object(n.onMounted)((function(){var e=r.query,t=e.status,a=e.detailId;if(t?(ee.status=null==t?void 0:t.split(",").map((function(e){return parseInt(e)})),ue.searchForm[1].val=ee.status,$.value="-10",Object(S.K)()):a&&Te(parseInt(a)),B.a.currentRoute.value.meta.inIteration){var n=T.value.find((function(e){return e.id===m.value}));n&&(ce[9].listData=[n])}})),Object(n.onDeactivated)((function(){fe.value=!1}));var ke,we=function(){var e=Object(y.a)(regeneratorRuntime.mark((function e(t,a,n){var r,l,o,c,u,i,d,s,f,b,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||null!=n&&n.product_id){e.next=3;break}return _.value=!1,e.abrupt("return");case 3:return Z.value=null!=a,K.value=t&&t.pageIndex||1,Y.value=t&&t.pageSize||20,r=Object(te.a)(le,n||Object.assign(ee)),l=r.response,o=Object(re.a)(l),c=o.pagation,e.next=10,c(t);case 10:u=e.sent,i=u.data,d=i.list,s=i.count,f=i.serious_num,b=i.unsolved_num,p=i.unvalidated_num,W.list=d,W.total=s,W.bugType.serious_num=f,W.bugType.unsolved_num=b,W.bugType.unvalidated_num=p;case 22:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ye=function(){var e=Object(y.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W.total){e.next=2;break}return e.abrupt("return",o(400,"暂无数据，无法导出"));case 2:Object(S.L)(ee,"/api/tomato/bug/export");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e,t=[];return null===(e=p.value)||void 0===e||e.forEach((function(e){t.push(e.id)})),t},Ve=function(){var e=Object(y.a)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b.value=!0,K.value=1,f.value=!f.value,!t){e.next=12;break}return null===(a=l.value)||void 0===a||a.setCurrentPage(),K.value=1,e.next=8,we({pageIndex:1,pageSize:Y.value},!0,Object.assign(ee));case 8:b.value=!1,Z.value=!1,e.next=13;break;case 12:Ne();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=Object(L.throttle)((function(){ee.product_id&&Object(ie.h)({product_id:ee.product_id,iteration_id:h.value?m.value:void 0,type:"all"}).then((function(e){200===e.code&&e.data?q.value=e.data:q.value=[]}))}),300),xe=Object(L.throttle)((function(){Be(),ee.product_id&&Object(ie.h)({product_id:ee.product_id,iteration_id:h.value?m.value:void 0}).then((function(e){if(200===e.code&&e.data){D.value=e.data;var t=e.data[1];C.value=null==t?void 0:t.options.map((function(e){return{value:e.staff_no,label:e.staff_name}}))}else D.value=[],C.value=[]}))}),300),Ne=function(){var e=Object(y.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.value){e.next=8;break}return null===(t=l.value)||void 0===t||t.setCurrentPage(),K.value=1,e.next=5,we({pageIndex:1,pageSize:Y.value},!0,Object.assign(ee));case 5:b.value=!1,e.next=10;break;case 8:return e.next=10,we(null===(a=l.value)||void 0===a?void 0:a.getCurrentPage(),!0,Object.assign(ee));case 10:Z.value=!1,setTimeout((function(){xe()}),500);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e,t;ve.value="新增BUG",pe.value="add",me.value="add",se.value=Object(L.cloneDeep)(de),h.value&&(se.value.iteration_id=null==v||null===(e=v.value)||void 0===e?void 0:e.id,se.value.iteration_name=null==v||null===(t=v.value)||void 0===t?void 0:t.name),fe.value=!0},De=function(e){var t=e.id,a=e.env,n=e.type,r=e.level,l=e.cause,o=e.task_id,c=e.priority,u=e.demand_id,i=e.test_case_id,d=e.iteration_id,s=e.name,f=e.hours,b=e.remark,p=e.status,m=e.staff_no,v=e.task_name,O=e.staff_name,j=e.demand_name,h=e.product_name,_=e.test_case_name,g=e.iteration_name,k=e.attachment,w=e.description,y=e.product_id;se.value=e,se.value.id=t||null,se.value.env=a||null,se.value.type=n||null,se.value.level=r||null,se.value.cause=l||null,se.value.task_id=o||null,se.value.priority=c||null,se.value.demand_id=u||null,se.value.test_case_id=i||null,se.value.iteration_id=d||null,se.value.hours=f,se.value.name=s,se.value.remark=b,se.value.staff_no=m,se.value.status=p,se.value.task_name=v,se.value.staff_name=O,se.value.demand_name=j,se.value.product_name=h,se.value.test_case_name=_,se.value.iteration_name=g,se.value.attachment=k,se.value.description=w,se.value.product_id=y},Te=function(e){e&&Promise.all([Object(A.f)(e),Object(A.g)(e)]).then((function(e){200===e[0].code&&e[0].data&&(De(e[0].data),ve.value="查看BUG详情",pe.value="view",me.value="view"),200===e[1].code&&e[1].data&&(se.value.list=e[1].data,Q.value=!0,fe.value=!0,Object(S.u)(se.value.id))})).finally((function(){Q.value=!1}))},Se=function(){var e=Object(y.a)(regeneratorRuntime.mark((function e(t,a,n){var r,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("cancel"!==t){e.next=3;break}return fe.value=!1,e.abrupt("return");case 3:if("title"!==n){e.next=10;break}if(r={id:[a.id],field:"name",name:a.title},!(a.title.length<4||a.title.length>100)){e.next=7;break}return e.abrupt("return",o(400,"请输入4-100个字数内的标题"));case 7:return se.value.name=a.title,Ee(r,"edit"),e.abrupt("return");case 10:if(!a.id){e.next=18;break}return l={id:[a.id],field:""},"rich"===a.who?(l.field="description",l.description=a.rich):(l.field="remark",l.remark=a.rich2),e.next=15,Ee(l,a.id?"edit":"add");case 15:"rich"===a.who?se.value.description=a.rich:se.value.remark=a.rich2,e.next=29;break;case 18:if(a.title){e.next=20;break}return e.abrupt("return",o(400,"标题不能为空"));case 20:if(se.value.name=a.title,se.value.description=a.rich,se.value.remark=a.rich2,(c={name:se.value.name,description:se.value.description,remark:se.value.remark,attachment:se.value.attachment,type:se.value.type,status:se.value.status,staff_no:se.value.staff_no,level:se.value.level,priority:se.value.priority,env:se.value.env,product_id:se.value.product_id,iteration_id:se.value.iteration_id,demand_id:se.value.demand_id,task_id:se.value.task_id,test_case_id:se.value.test_case_id}).staff_no){e.next=28;break}return e.abrupt("return",o(400,"请选择指派人"));case 28:Ee(Object(L.pickBy)(c,(function(e){return e})),"add");case 29:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(y.a)(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==a){e.next=5;break}n=N.a.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"}),Object(A.a)(t).then((function(e){if(200===e.code)return fe.value=!1,Ne(),n.close(),o(200,"成功")})),e.next=7;break;case 5:return e.next=7,Object(A.o)(t).then((function(e){if(200===e.code)return setTimeout((function(){Ne()}),500),o(200,"成功")}));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Le=function(){clearTimeout(ke),ke=setTimeout((function(){h.value&&m.value?(ee.iteration_id=parseInt(m.value,10),G.value=[{id:v.value.id,name:v.value.name}],z.value=[{value:v.value.id,label:v.value.name}]):($.value="-1",ee.iteration_id="",ue.searchForm[9].val="",G.value=T.value,z.value=E.value),Ne(),ee.product_id&&Object(U.a)({product_id:ee.product_id,iteration_id:h.value?m.value:0}).then((function(e){200===e.code?(T.value=e.data,G.value=T.value,E.value=e.data.map((function(e){return{value:e.id,label:e.name}}))):(T.value=[],E.value=[])})),ee.product_id&&Object(H.t)({product_id:ee.product_id}).then((function(e){200===e.code?k.value=e.data:k.value=[]})),function(){if(ee.product_id){var e={product_id:ee.product_id,iteration_id:h.value?m.value:0};Object(H.m)(e).then((function(e){200===e.code?I.value=e.data:I.value=[]}))}}(),function(){if(ee.product_id){var e={product_id:ee.product_id,iteration_id:h.value?m.value:0};Object(H.C)(e).then((function(e){200===e.code?M.value=e.data:M.value=[]}))}}()}),400)};return Object(n.watch)((function(){return r.query}),Object(L.throttle)((function(){var e=r.query,t=e.detailId,a=e.type,n=e.status,l=e.where;"test"===B.a.currentRoute.value.name&&t?(setTimeout((function(){Te(t)}),300),"workbench"===l&&setTimeout((function(){B.a.replace({path:r.path,query:Object(w.a)(Object(w.a)({},r.query),{},{iteration_id:void 0,id:void 0,name:void 0,where:void 0})})}),700)):("headerTest"===l&&"add"===a&&(Fe(),Object(S.K)()),"home"===l&&n&&(ee.status=null==n?void 0:n.split(",").map((function(e){return parseInt(e)})),ue.searchForm[1].val=ee.status,$.value="-10"))}),200),{immediate:!0}),Object(n.watch)((function(){return m.value}),(function(e,t){g(),e!=t&&Le()})),Object(n.watch)((function(){return O.value}),(function(e,t){e!=t&&(ee.product_id!=e&&(ee.iteration_id=null),ee.product_id=e,de.product_id=e,Le())}),{immediate:!0}),Object(n.watch)((function(){return h.value}),(function(e,t){e!=t&&"test"===B.a.currentRoute.value.name&&Le()})),Object(n.watch)((function(){return fe.value}),(function(e){e||(be.value++,Object(S.K)())})),Object(n.onActivated)((function(){var e;g(),Object(ne.e)(),we(null===(e=l.value)||void 0===e?void 0:e.getCurrentPage(),!0,Object.assign(ee))})),Object(w.a)(Object(w.a)({loading:Q,page:K,arrow:s,bugDrawer:fe,drawerCount:be,refersh:f,iterateId:m,basicBtn:Oe,taskLists:I,drawerForm:se,richStatus:pe,formParams:ee,dialogType:he,selectMore:p,rich2Status:me,headerTitle:ve,useCaseList:M,searchArray:ue,assignModal:c,statusModal:i,basicsOption:ge,temp_rowData:X,isFullScreen:d,pageTableRef:l,dialogDemand:_e,cascaderPanel:je,employeeLists:D,currentActive:$,assignFormData:u,newDemandLists:k,stopAutoGetData:Z,iterateList:G,iterateListData:T,employeeBasicLists:C,iterateBasicList:z,ENVLIST:S.g,PRIORITY:P.p,BUG_TYPE:S.c,BUG_LEVEL:S.a,BUG_STATUS:S.b,REJECTDEALREASON:P.s,BUG_STATUS_DELETE:ae,getData:we,getType:function(e){var t=S.c.find((function(t){return t.value===e}));return null==t?void 0:t.label},onHandle:Se,getStatus:function(e){var t=S.b.find((function(t){return t.value===e}));return null==t?void 0:t.label},updateVal:function(e){if("no"!==e){if(2===he.value){var t=e;t.id=Ce(),Ee(t,"edit")}_e.value=!1}else{var a;we(null===(a=l.value)||void 0===a?void 0:a.getCurrentPage(),!0,Object.assign(ee))}},sortChange:function(e){var t,a=e.prop,n=e.order;n&&(ee.sort_name=a,ee.sort_by="ascending"===n?1:2,we(null===(t=l.value)||void 0===t?void 0:t.getCurrentPage(),void 0,ee))},quickSeacrh:function(e){var t,n,r,l=e.key,o=e.id;switch(ee=Object(L.cloneDeep)(Object(L.assign)(J,{product_id:null===(t=j.value)||void 0===t?void 0:t.id,iteration_id:h.value?m.value:void 0})),l){case"status":ee[l]=null==o?void 0:o.split(",").map((function(e){return parseInt(e)})),""===ee.status&&(ee.is_reset=1);break;case"create_by":case"staff_no":ee[l]=a.getters.user.staff_no;break;case"create_time":n=V()().endOf("month").format("YYYY-MM-DD"),r=V()().format("YYYY-MM-01"),ee[l]=[r,n]}Ve(1)},changeSearch:function(e){var t;ee=Object(L.cloneDeep)(Object(L.assign)(J,{product_id:null===(t=j.value)||void 0===t?void 0:t.id,iteration_id:h.value?m.value:void 0})),Object(L.map)(e,(function(e,t){switch(t){case"name":case"create_by":case"staff_no":case"type":case"create_time":case"level":case"env":case"iteration_id":case"priority":case"demand_id":case"task_id":case"test_case_id":if("iteration_id"===t&&h.value&&!e)return;ee[t]=e;break;case"status":ee[t]=e,""===ee.status&&(ee.is_reset=1)}})),Ve()},onCancleSearch:function(){ue.btnArray=oe,ue.searchForm=ce},onChangeType:function(e,t,a){var n={id:[t.id]};"staff"===a&&(n.staff_no=e.value,n.staff_name=null==e?void 0:e.label,n.field="staff_no"),Object(A.o)(n).then((function(e){if(200===e.code)return Ne(),o(200,"成功")}))},getTextColor:function(e){var t=S.b.find((function(t){return t.value===e}));return{color:null==t?void 0:t.color}},onChangeLevel:function(e,t){var a={id:[t.id],level:e.id,field:"level"};Object(A.o)(a).then((function(e){if(200===e.code)return Ne(),o(200,"成功")}))},handleRefersh:Ve,showSearchList:function(){s.value=!s.value;var e=document.getElementsByClassName("content")[0],t=document.getElementsByClassName("search-header")[0];s.value?l.value.height=e.offsetHeight-t.offsetHeight-50:l.value.height=e.offsetHeight-t.offsetHeight-160},handleTypeList:function(e,t){ue.searchForm=ce,"serious"===e?(ee.level=t,ue.searchForm[5].val=t):(ee.status=t,ee.is_reset=0,ue.searchForm[1].val=t),$.value="-10",Ne()},handleCopyList:function(e){Object(A.f)(e.id).then((function(e){200===e.code&&e.data&&(De(e.data),se.value.id=null,se.value.status=0,se.value.list=[],se.value.name="",se.value.remark="",se.value.description="<p><b>[步骤]</b><br/><br/><br/><b>[结果]<br/></b><br/><br/><b>[期望]<br/></b><br/><br/></p>",ve.value="新增BUG",pe.value="add",me.value="add",fe.value=!0)}))},exportTaskDate:ye,handleCreateBug:Fe,handleBugDetail:function(e){e&&(function(e){Object(A.g)(e).then((function(e){200===e.code&&e.data&&(se.value.list=e.data)}))}(e),Object(A.f)(e).then((function(e){200===e.code&&e.data&&(ve.value="查看BUG详情",pe.value="view",me.value="view",fe.value=!0)})),we(l.value.getCurrentPage()),setTimeout((function(){xe()}),500))},onChangeSelect:function(e,t,a){var n={id:[t.id],field:a};if("priority"===a&&(n.priority=e),"status"===a&&(n.status=e),"level"===a&&(n.level=e),"staff_no"===a){var r=C.value.filter((function(t){return t.value===e}));n.staff_no=r[0].value,n.staff_name=r[0].label}Object(A.o)(n).then((function(e){if(200===e.code)return Ne(),o(200,"成功")}))},onChangePriority:function(e,t){var a={id:[t.id],priority:e.id,field:"priority"};Object(A.o)(a).then((function(e){if(200===e.code)return Ne(),o(200,"成功")}))},handleShowDetail:Te,handleBasicChange:function(e){if("staff_no"===e[0])he.value=2,_e.value=!0;else{var t={id:Ce()},a=je.value.getCheckedNodes()[0].value;if(t[e[0]]=a,["status","priority","level","type","iteration_id"].includes(e[0])&&(t[e[0]]=1*a),"staff_no"===e[0]){var n=C.value.filter((function(e){return e.value===a}));t.staff_name=n[0].label}t.field=e[0],Ee(t,"edit")}null==Oe||Oe.value.handleClose()},handleChangeStatus:function(e){Object(A.f)(e.id).then((function(e){if(200===e.code&&e.data){var t=e.data,a=t.id,n=t.status,r=t.cause,l=t.hours,o=t.remark;X.value.id=a,X.value.status=n,X.value.cause=r||1,X.value.hours=l||"",X.value.remark=o||"",i.value=!0}}))},handleChangeAssign:function(e){c.value=!0,u.remark=null,u.bug_id=e.id,u.staff_no=e.staff_no},handleConfirmChange:function(){var e=X.value,t=e.id,a=e.status,n=e.cause,r=e.hours,c={id:[t],status:a,remark:e.remark,field:"status"};if([4,5].includes(a))c.cause=n;else if([2].includes(a)){if(!/^\+?[0-9][0-9]*$/.test(r))return o(400,"请输入大于0的正整数");if(c.hours=parseInt(r,10),c.hours>999||c.hours<=0)return o(400,"请输入0到999的正整数")}Object(A.o)(c).then((function(e){200===e.code&&(o(200,"成功"),we(l.value.getCurrentPage()),i.value=!1)}))},handleConditionSearch:Ne,handleSelectionChange:function(e){p.value=e},handleConfirmChangeAssign:function(){var e={id:[u.bug_id],remark:u.remark,staff_no:u.staff_no,field:"staff_no"};Object(A.o)(e).then((function(e){200===e.code&&(o(200,"成功"),we(l.value.getCurrentPage()),c.value=!1,xe())}))}},Object(n.toRefs)(W)),{},{staffNo:a.getters.user.staff_no,hasData:_})}}),je=(a("3e85"),a("6b0d"));const he=a.n(je)()(Oe,[["render",function(e,t,a,w,y,C){var V=Object(n.resolveComponent)("search-form"),B=Object(n.resolveComponent)("Refresh"),x=Object(n.resolveComponent)("el-icon"),N=Object(n.resolveComponent)("el-button"),F=Object(n.resolveComponent)("el-table-column"),D=Object(n.resolveComponent)("ArrowDown"),T=Object(n.resolveComponent)("selectOption"),S=Object(n.resolveComponent)("page-table"),E=Object(n.resolveComponent)("ArrowUp"),L=Object(n.resolveComponent)("el-cascader-panel"),A=Object(n.resolveComponent)("el-dropdown"),R=Object(n.resolveComponent)("el-option"),U=Object(n.resolveComponent)("el-select"),I=Object(n.resolveComponent)("el-form-item"),M=Object(n.resolveComponent)("el-input"),P=Object(n.resolveComponent)("WangEditor"),H=Object(n.resolveComponent)("el-form"),G=Object(n.resolveComponent)("el-dialog"),z=Object(n.resolveComponent)("el-option-group"),K=Object(n.resolveComponent)("form-bug"),Y=Object(n.resolveComponent)("Drawer"),q=Object(n.resolveComponent)("dialog-demand"),J=Object(n.resolveComponent)("FullScreen"),W=Object(n.resolveComponent)("el-empty");return e.hasData?(Object(n.openBlock)(),Object(n.createElementBlock)("div",r,[Object(n.createVNode)(S,{tableData:e.list,currentPage:e.page,total:e.total,highlight:!0,bugType:e.bugType,ref:"pageTableRef",isFullScreen:e.isFullScreen,stopAutoGetData:e.stopAutoGetData,onSortChange:e.sortChange,onHandlePagationChange:e.getData,onHandleSelectionChange:e.handleSelectionChange},{header:Object(n.withCtx)((function(){return[Object(n.createElementVNode)("div",l,[Object(n.createElementVNode)("div",o,[Object(n.createVNode)(V,{searchArray:e.searchArray,currentActive:e.currentActive,onQuickSeacrh:e.quickSeacrh,onChangeSearch:e.changeSearch,onOnCancel:e.onCancleSearch},null,8,["searchArray","currentActive","onQuickSeacrh","onChangeSearch","onOnCancel"]),Object(n.createVNode)(x,{onClick:e.handleRefersh,class:Object(n.normalizeClass)(["el-icon-refresh",e.refersh?"icon-refresh":"icon-refresh-rotate"])},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(B)]})),_:1},8,["onClick","class"])]),Object(n.createElementVNode)("div",c,[Object(n.createVNode)(N,{plain:"",onClick:e.exportTaskDate},{default:Object(n.withCtx)((function(){return[u]})),_:1},8,["onClick"]),Object(n.createVNode)(N,{type:"primary",onClick:e.handleCreateBug},{default:Object(n.withCtx)((function(){return[i]})),_:1},8,["onClick"])])])]})),main:Object(n.withCtx)((function(){return[Object(n.createVNode)(F,{type:"selection",width:"55"}),Object(n.createVNode)(F,{sortable:"custom",prop:"id",label:"ID",width:"80"}),Object(n.createVNode)(F,{sortable:"custom",prop:"name","class-name":"table-column-left table-title","min-width":"200",label:"Bug标题"},{default:Object(n.withCtx)((function(t){return[Object(n.createElementVNode)("span",{class:"rp-Table__bug",onClick:function(a){return e.handleShowDetail(t.row.id)}},Object(n.toDisplayString)(t.row.name),9,d)]})),_:1}),Object(n.createVNode)(F,{sortable:"custom",prop:"status",label:"状态","min-width":140},{default:Object(n.withCtx)((function(t){return[Object(n.createElementVNode)("span",{onClick:function(a){return e.handleChangeStatus(t.row)},class:"rp-Table__common rp-Table__icons",style:Object(n.normalizeStyle)(e.getTextColor(t.row.status))},[Object(n.createTextVNode)(Object(n.toDisplayString)(e.getStatus(t.row.status))+" ",1),Object(n.createVNode)(x,{class:"rp-Table__icons-arrow"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(D)]})),_:1})],12,s)]})),_:1}),Object(n.createVNode)(F,{sortable:"custom",prop:"priority",label:"优先级","min-width":80},{default:Object(n.withCtx)((function(t){return[Object(n.createVNode)(T,{valueKey:["id","value"],keyVal:"priority",currentVal:t.row.priority,type:1,currentType:"priority",item:t.row,optionsData:e.PRIORITY,onOnChangeSelect:e.onChangeSelect},null,8,["currentVal","item","optionsData","onOnChangeSelect"])]})),_:1}),Object(n.createVNode)(F,{sortable:"custom",prop:"level",label:"级别","min-width":90},{default:Object(n.withCtx)((function(t){return[Object(n.createVNode)(T,{valueKey:["value","label"],keyVal:"level",currentVal:t.row.level,type:1,currentType:"level",item:t.row,optionsData:e.BUG_LEVEL,onOnChangeSelect:e.onChangeSelect},null,8,["currentVal","item","optionsData","onOnChangeSelect"])]})),_:1}),Object(n.createVNode)(F,{sortable:"custom",prop:"staff_name",label:"指派给","min-width":100},{default:Object(n.withCtx)((function(t){return[Object(n.createVNode)(T,{valueKey:["staff_no","staff_name"],keyVal:"staff_no",currentVal:t.row.staff_name,type:0,currentType:"staff_no",item:t.row,optionsData:e.employeeLists,onOnChangeSelect:e.onChangeSelect},null,8,["currentVal","item","optionsData","onOnChangeSelect"])]})),_:1}),Object(n.createVNode)(F,{sortable:"custom",prop:"end_time",label:"解决时间","min-width":140}),Object(n.createVNode)(F,{sortable:"custom",prop:"creator",label:"创建人","min-width":100}),Object(n.createVNode)(F,{sortable:"custom",prop:"create_time",label:"创建时间","min-width":140}),Object(n.createVNode)(F,{label:"操作",align:"right","min-width":60},{default:Object(n.withCtx)((function(t){return[Object(n.createVNode)(N,{type:"primary",link:"",onClick:function(a){return e.handleCopyList(t.row)}},{default:Object(n.withCtx)((function(){return[f]})),_:2},1032,["onClick"])]})),_:1})]})),qucikSelect:Object(n.withCtx)((function(){return[Object(n.createElementVNode)("div",b,[Object(n.createElementVNode)("span",{class:"rp-test-num",onClick:t[0]||(t[0]=function(t){return e.handleTypeList("unResolved",[0,1,6])})},"未解决 "+Object(n.toDisplayString)(e.bugType.unsolved_num)+" 条",1),Object(n.createElementVNode)("span",{class:"rp-test-num",onClick:t[1]||(t[1]=function(t){return e.handleTypeList("notVerified",[2,5])})},"待验证 "+Object(n.toDisplayString)(e.bugType.unvalidated_num)+" 条",1),Object(n.createElementVNode)("span",{class:"rp-test-num",onClick:t[2]||(t[2]=function(t){return e.handleTypeList("serious",[3])})},"严重 "+Object(n.toDisplayString)(e.bugType.serious_num)+" 条",1)])]})),_:1},8,["tableData","currentPage","total","bugType","isFullScreen","stopAutoGetData","onSortChange","onHandlePagationChange","onHandleSelectionChange"]),e.selectMore.length?(Object(n.openBlock)(),Object(n.createElementBlock)("div",p,[Object(n.createVNode)(A,{size:"small",trigger:"click",ref:"basicBtn"},{dropdown:Object(n.withCtx)((function(){return[Object(n.createVNode)(L,{onChange:e.handleBasicChange,ref:"cascaderPanel",options:e.basicsOption},null,8,["onChange","options"])]})),default:Object(n.withCtx)((function(){return[Object(n.createVNode)(N,null,{default:Object(n.withCtx)((function(){return[m,Object(n.createVNode)(x,null,{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(E)]})),_:1})]})),_:1})]})),_:1},512)])):Object(n.createCommentVNode)("",!0),Object(n.createVNode)(G,{title:"修改bug状态",modelValue:e.statusModal,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.statusModal=t}),width:"40%"},{footer:Object(n.withCtx)((function(){return[Object(n.createElementVNode)("span",v,[Object(n.createVNode)(N,{type:"primary",onClick:e.handleConfirmChange},{default:Object(n.withCtx)((function(){return[O]})),_:1},8,["onClick"]),Object(n.createVNode)(N,{onClick:t[7]||(t[7]=function(t){return e.statusModal=!1})},{default:Object(n.withCtx)((function(){return[j]})),_:1})])]})),default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(),Object(n.createBlock)(H,{key:Math.random(),"label-position":"top","label-width":"88px",class:"rp-Dialog__bugStatus"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(I,{label:"状态",prop:"status"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(U,{modelValue:e.temp_rowData.status,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.temp_rowData.status=t}),placeholder:"--所有--"},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(e.BUG_STATUS_DELETE,(function(e){return Object(n.openBlock)(),Object(n.createBlock)(R,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),[4,5].includes(e.temp_rowData.status)?(Object(n.openBlock)(),Object(n.createBlock)(I,{key:0,label:"方案或原因",prop:"cause"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(U,{modelValue:e.temp_rowData.cause,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.temp_rowData.cause=t})},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(e.REJECTDEALREASON,(function(e){return Object(n.openBlock)(),Object(n.createBlock)(R,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})):Object(n.createCommentVNode)("",!0),[2].includes(e.temp_rowData.status)?(Object(n.openBlock)(),Object(n.createBlock)(I,{key:1,label:"实际消耗工时",prop:"hours"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(M,{type:"number",modelValue:e.temp_rowData.hours,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.temp_rowData.hours=t}),placeholder:"请输入实际消耗工时"},null,8,["modelValue"])]})),_:1})):Object(n.createCommentVNode)("",!0),Object(n.createVNode)(I,{label:"备注",prop:"remark"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(P,{height:200,onGetWangEditorValue:t[6]||(t[6]=function(t){return e.temp_rowData.remark=t}),description:e.temp_rowData.remark,ref:"wangEditor"},null,8,["description"])]})),_:1})]})),_:1}))]})),_:1},8,["modelValue"]),Object(n.createVNode)(G,{title:"修改指派",modelValue:e.assignModal,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.assignModal=t}),width:"30%"},{footer:Object(n.withCtx)((function(){return[Object(n.createElementVNode)("span",h,[Object(n.createVNode)(N,{type:"primary",onClick:e.handleConfirmChangeAssign},{default:Object(n.withCtx)((function(){return[_]})),_:1},8,["onClick"]),Object(n.createVNode)(N,{onClick:t[11]||(t[11]=function(t){return e.assignModal=!1})},{default:Object(n.withCtx)((function(){return[g]})),_:1})])]})),default:Object(n.withCtx)((function(){return[Object(n.createVNode)(H,{"label-width":"70px",class:"rp-Dialog__bugStatus"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(I,{label:"指派给",prop:"status"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(U,{"value-key":"staff_no",filterable:"","collapse-tagsvalue-key":"staff_no",modelValue:e.assignFormData.staff_no,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.assignFormData.staff_no=t}),placeholder:"--所有--"},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(e.employeeLists,(function(e){return Object(n.openBlock)(),Object(n.createBlock)(z,{key:e.staff_no,label:e.label},{default:Object(n.withCtx)((function(){return[(Object(n.openBlock)(!0),Object(n.createElementBlock)(n.Fragment,null,Object(n.renderList)(e.options,(function(e){return Object(n.openBlock)(),Object(n.createBlock)(R,{key:e.staff_no,label:e.staff_name,value:e.staff_no},null,8,["label","value"])})),128))]})),_:2},1032,["label"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n.createVNode)(I,{label:"备注",prop:"remark"},{default:Object(n.withCtx)((function(){return[Object(n.createVNode)(M,{rows:"5","show-word-limit":"",placeholder:"请输入备注",type:"textarea",modelValue:e.assignFormData.remark,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.assignFormData.remark=t}),maxlength:"200"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),Object(n.createElementVNode)("div",null,[Object(n.createVNode)(Y,{id:e.drawerForm.id,drawer:e.bugDrawer,"onUpdate:drawer":t[13]||(t[13]=function(t){return e.bugDrawer=t}),title:e.drawerForm.name,headerTitle:e.headerTitle,rich:e.drawerForm.description,rich2:e.drawerForm.remark,richStatus:e.richStatus,rich2Status:e.rich2Status,statusList:e.drawerForm.list,loading:e.loading,onOnHandle:e.onHandle},{form:Object(n.withCtx)((function(){return[Object(n.createVNode)(K,{drawerForm:e.drawerForm,staffList:e.employeeLists,currIterateId:e.iterateId,onOnHandle:e.handleBugDetail},null,8,["drawerForm","staffList","currIterateId","onOnHandle"])]})),_:1},8,["id","drawer","title","headerTitle","rich","rich2","richStatus","rich2Status","statusList","loading","onOnHandle"])]),Object(n.createVNode)(q,{title:"指派给",onUpdateVal:e.updateVal,userList:e.employeeLists,type:e.dialogType,visible:e.dialogDemand,"onUpdate:visible":t[14]||(t[14]=function(t){return e.dialogDemand=t})},null,8,["onUpdateVal","userList","type","visible"]),Object(n.createVNode)(J,{fullscreen:e.isFullScreen,"onUpdate:fullscreen":t[15]||(t[15]=function(t){return e.isFullScreen=t})},null,8,["fullscreen"])])):(Object(n.openBlock)(),Object(n.createElementBlock)("div",k,[Object(n.createVNode)(W,{"image-size":200})]))}],["__scopeId","data-v-942af520"]]);t.default=he},"5d09":function(e,t,a){"use strict";var n=a("5530"),r=(a("a9e3"),a("4de4"),a("7a23")),l=a("8fa4f"),o={class:"rp-demand-dialog"},c={class:"demand-dialog"},u={class:"dialog-footer"},i=Object(r.createTextVNode)("取 消"),d=Object(r.createTextVNode)("确 定"),s=Object(r.defineComponent)(Object(n.a)(Object(n.a)({},{name:"demand-dialog"}),{},{props:{visible:{type:Boolean,default:!1},userList:{type:Array,default:function(){return[]}},type:{type:Number,default:1},title:{type:String,default:"批量编辑"}},emits:["update:visible","updateVal"],setup:function(e,t){var a=t.emit,n=e,s=Object(r.ref)(""),f=Object(r.computed)({get:function(){return n.visible},set:function(e){a("update:visible",e)}}),b=Object(r.ref)(""),p={field:"staff_no",staff_no:"",staff_name:""},m=function(e){s.value=e},v=function(){1===n.type?a("updateVal",JSON.parse(JSON.stringify(s.value))):a("updateVal",JSON.parse(JSON.stringify(p))),setTimeout((function(){s.value="",p.staff_no="",p.staff_name="",b.value=""}),1e3)},O=function(e){var t=n.userList[1];if(t){var a=t.options.filter((function(t){return t.staff_no===e}))||[];a.length?(p.staff_no=a[0].staff_no,p.staff_name=a[0].staff_name):(p.staff_no="",p.staff_name="")}else p.staff_no="",p.staff_name=""},j=function(){a("update:visible",!1),a("updateVal","no")};return function(t,a){var n=Object(r.resolveComponent)("el-option"),p=Object(r.resolveComponent)("el-option-group"),h=Object(r.resolveComponent)("el-select"),_=Object(r.resolveComponent)("el-button"),g=Object(r.resolveComponent)("el-dialog");return Object(r.openBlock)(),Object(r.createElementBlock)("div",o,[Object(r.createVNode)(g,{top:"10vh",title:e.title,modelValue:Object(r.unref)(f),"onUpdate:modelValue":a[2]||(a[2]=function(e){return Object(r.isRef)(f)?f.value=e:null}),onClose:j,width:"30%"},{footer:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("span",u,[Object(r.createVNode)(_,{onClick:a[1]||(a[1]=function(e){return f.value=!1})},{default:Object(r.withCtx)((function(){return[i]})),_:1}),Object(r.createVNode)(_,{type:"primary",onClick:v},{default:Object(r.withCtx)((function(){return[d]})),_:1})])]})),default:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("div",c,[1===e.type?(Object(r.openBlock)(),Object(r.createBlock)(l.a,{key:0,onUpdateOrigin:m,val:s.value},null,8,["val"])):(Object(r.openBlock)(),Object(r.createBlock)(h,{key:1,style:{width:"100%"},filterable:"",modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=function(e){return b.value=e}),clearable:"",onChange:O,placeholder:"请选择指派给"},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.userList,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(p,{key:e.label,label:e.label},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.options,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(n,{key:e.staff_no,label:e.staff_name,value:e.staff_no},null,8,["label","value"])})),128))]})),_:2},1032,["label"])})),128))]})),_:1},8,["modelValue"]))])]})),_:1},8,["title","modelValue"])])}}}));a("9f73");const f=s;t.a=f},"71ee":function(e,t,a){"use strict";var n=a("7a23"),r=a("d257"),l=Object(n.defineComponent)({props:{fullscreen:{type:Boolean,default:!1}},emits:["update:fullscreen"],setup:function(e,t){var a=t.emit,l=e,o=function(){return Object(n.createVNode)("span",{class:"fullscreen-icon-global iconfont icon-fullscreen",onClick:c},null)},c=function(){a("update:fullscreen",!l.fullscreen),Object(r.P)(),Object(r.I)((function(e){a("update:fullscreen",e)}))};return function(e,t){return Object(n.openBlock)(),Object(n.createBlock)(o)}}}),o=(a("9a6d"),a("6b0d"));const c=a.n(o)()(l,[["__scopeId","data-v-d63bdac2"]]);t.a=c},"77bb":function(e,t,a){},"7e02":function(e,t,a){"use strict";a("167f")},"9a6d":function(e,t,a){"use strict";a("39d7")},"9f73":function(e,t,a){"use strict";a("dbc5")},a4b0:function(e,t,a){},aa80:function(e,t,a){"use strict";a.d(t,"h",(function(){return l})),a.d(t,"o",(function(){return o})),a.d(t,"a",(function(){return c})),a.d(t,"g",(function(){return u})),a.d(t,"f",(function(){return i})),a.d(t,"k",(function(){return d})),a.d(t,"c",(function(){return s})),a.d(t,"i",(function(){return f})),a.d(t,"n",(function(){return b})),a.d(t,"m",(function(){return p})),a.d(t,"b",(function(){return m})),a.d(t,"e",(function(){return v})),a.d(t,"d",(function(){return O})),a.d(t,"j",(function(){return j})),a.d(t,"l",(function(){return h})),a("99af");var n=a("79f6"),r=a("b23d");function l(e){return n.a.get(r.a.getBugList,e)}function o(e){return n.a.put(r.a.updateBug,e)}function c(e){return n.a.post(r.a.createBug,e)}function u(e){return n.a.get(r.a.getBugDynamic+e)}function i(e){return n.a.get(r.a.getBugDetail+e)}function d(e){return n.a.get(r.a.getTestBill,e)}function s(e){return n.a.get(r.a.getAssociatedSelect,e)}function f(e){return n.a.get("".concat(r.a.creatorList,"?product_id=").concat(e))}function b(e){return n.a.put(r.a.modifyTestBillStatus,e)}function p(e){return n.a.put(r.a.getTestBill,e)}function m(e){return n.a.post(r.a.getTestBill,e)}function v(e){return n.a.get(r.a.availableTestBillList,e)}function O(e){return n.a.get(r.a.availableIterationTestBillList,e)}function j(e){return n.a.get("".concat(r.a.getTestBill,"/").concat(e))}function h(e){return n.a.get("".concat(r.a.getTestBill,"/").concat(e,"/logs"))}},b7c0:function(e,t,a){"use strict";a("77bb")},dbc5:function(e,t,a){},f4d4:function(e,t,a){"use strict";var n=a("7a23"),r=Object(n.defineComponent)({name:"ArrowDown"});const l={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},o=Object(n.createVNode)("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1);r.render=function(e,t,a,r,c,u){return Object(n.openBlock)(),Object(n.createBlock)("svg",l,[o])},r.__file="packages/components/ArrowDown.vue",t.a=r}}]);