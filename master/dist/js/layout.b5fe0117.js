(window.webpackJsonp=window.webpackJsonp||[]).push([["layout"],{"01f6":function(e,t,n){},"0d39":function(e,t,n){},1115:function(e,t,n){},"227a":function(e,t,n){"use strict";n("af45")},"259c":function(e,t,n){"use strict";n("7832")},"3dd4":function(e,t,n){"use strict";n("a0e7")},"3de0":function(e,t,n){},5202:function(e,t,n){"use strict";n("01f6")},6199:function(e,t,n){"use strict";n("b22b")},6345:function(e,t,n){e.exports=n.p+"img/rp_logo.68a51b8e.png"},6678:function(e,t,n){"use strict";n("f2a5")},"75cc":function(e,t,n){"use strict";n("3de0")},7832:function(e,t,n){},7836:function(e,t,n){"use strict";n("eca8")},"8e8c":function(e,t,n){"use strict";n("0d39")},"9cef":function(e,t,n){"use strict";n("f750")},a0e7:function(e,t,n){},a762:function(e,t,n){"use strict";var a=n("1da1"),r=n("2909"),c=(n("96cf"),n("d81d"),n("d3b7"),n("25f0"),n("6062"),n("3ca3"),n("ddb0"),n("0481"),n("4de4"),n("b0c0"),n("7a23")),o=n("0a56"),l=n("67a4"),i=n("7b31"),u=n("2ef0"),d={class:"collect"},s=Object(c.defineComponent)({props:{list:{type:Array,default:function(){return[]}},propVal:{type:Array,default:function(){return[]}}},emits:["onChange"],setup:function(e,t){var n,s=t.expose,b=t.emit,f=e,m={multiple:!0,label:"name",value:"id",children:"list"},p=Object(c.ref)(),j=Object(o.a)(),O=j.getGroupIds,v=j.boardBaseRt,h=j.useInitGetProductList,g=Object(c.ref)();s({currentVal:p,cascader:g}),Object(c.watch)((function(){return f.propVal}),(function(e){e&&(p.value=e)}),{deep:!0,immediate:!0});var _=function(){var e,t=null===(e=g.value)||void 0===e?void 0:e.getCheckedNodes();return Array.isArray(t)&&t.length?t.map((function(e){return e.value||e.data.id})):[]},k=function(e){if(!e){if(!_().length)return g.value.togglePopperVisible(!0),i.a.warning("至少选中一个项目");var t=O(_());v.currentGroupIds=_(),Object(l.c)("selectedProductIds",v.currentGroupIds.toString()),function(e){return Object(u.isEqual)(e,v.currentProIds)}(t)||b("onChange",t)}},C=function(e){var t,n=Object(r.a)(new Set(null===(t=p.value)||void 0===t?void 0:t.flat(1))),a=null==n?void 0:n.filter((function(t){return t!==e[0]}));v.currentGroupIds=_();var c=O(null!=a?a:[]);b("onChange",c)};return Object(c.onMounted)(Object(a.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!!_().length,e.next=3,h(t);case 3:t&&(n&&clearTimeout(n),n=setTimeout(Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0,t=_(),v.currentGroupIds=t.length?t:[v.teamProductList[0].id],v.currentProIds=O(t.length?t:[v.teamProductList[0].id]);case 1:case"end":return e.stop()}var t}),e)}))),500));case 4:case"end":return e.stop()}}),e)})))),function(t,n){var a=Object(c.resolveComponent)("el-cascader");return Object(c.openBlock)(),Object(c.createElementBlock)("div",d,[Object(c.createVNode)(a,{"popper-class":"collect-popper-class",options:e.list,"show-all-levels":!1,"collapse-tags":"",props:m,modelValue:p.value,"onUpdate:modelValue":n[0]||(n[0]=function(e){return p.value=e}),onVisibleChange:k,onRemoveTag:C,ref_key:"cascader",ref:g},{default:Object(c.withCtx)((function(e){var t=e.data;return[Object(c.createElementVNode)("div",{class:Object(c.normalizeClass)({"collect-item":t.isLast})},Object(c.toDisplayString)(t.name),3)]})),_:1},8,["options","modelValue"])])}}}),b=(n("227a"),n("6b0d"));const f=n.n(b)()(s,[["__scopeId","data-v-022c370c"]]);t.a=f},a8b0:function(e,t,n){"use strict";n("b658")},af45:function(e,t,n){},b22b:function(e,t,n){},b3be:function(e,t,n){"use strict";n("bcd0")},b5ad:function(e,t,n){"use strict";n("f040")},b658:function(e,t,n){},bcd0:function(e,t,n){},c1f7:function(e,t,n){"use strict";n.r(t);var a=n("5530"),r=n("7a23"),c=n("0613"),o=n("1da1"),l=(n("96cf"),n("ac1f"),n("466d"),n("5319"),n("caad"),n("a9e3"),n("2532"),n("7db0"),n("a434"),n("b0c0"),n("538c")),i=n("807a"),u=n("913c"),d=n("afbc"),s=n("0a56"),b=n("2d40"),f=n("6c02"),m=n("2909"),p=n("3835"),j=(n("498a"),n("99af"),n("4de4"),n("f6f2")),O={key:0,class:"search-ul"},v=["onClick"],h={key:1,class:"empty"},g=[function(e){return Object(r.pushScopeId)("data-v-c01b158e"),e=e(),Object(r.popScopeId)(),e}((function(){return Object(r.createElementVNode)("span",{class:"empty-text"},"无匹配数据",-1)}))],_=Object(r.defineComponent)(Object(a.a)(Object(a.a)({},{name:"projectNavSearch"}),{},{props:{buttonRef:{type:HTMLSpanElement},placeholder:{type:String,default:"项目名称搜索"},type:{type:String,default:"project"},list:{type:Array,default:function(){return[]}},currentId:{type:[Number,String],default:0}},emits:["onSelect"],setup:function(e,t){var n=t.expose,a=t.emit,c=e,o=[1,2,3,4,5,8],l=Object(r.ref)(),i=Object(r.ref)(),u=Object(r.ref)([1,2]),d=[{value:1,label:"未开始"},{value:2,label:"进行中"},{value:3,label:"搁置"},{value:4,label:"结项"}],s=[{value:0,label:"未开始"},{value:-1,label:"进行中"},{value:6,label:"已发布"},{value:7,label:"已搁置"}],b=Object(r.ref)(d),f=Object(r.ref)([]),_=Object(r.ref)();Object(r.watch)([function(){return c.currentId},function(){return c.list},function(){return c.type}],(function(e){var t=Object(p.a)(e,3),n=t[0],a=t[1],c=t[2];n&&(_.value=n),a&&(f.value=a),"project"===c?b.value=d:"iteration"===c&&(u.value.includes(2)&&(u.value=[-1,0]),b.value=s),f.value.length&&Object(r.nextTick)((function(){k()}))}),{immediate:!0,deep:!0}),n({popoverRef:l.value});var k=function(){var e,t=null===(e=i.value)||void 0===e?void 0:e.trim();f.value=c.list;var n=u.value,a="iteration"===c.type&&n.includes(-1)?[].concat(o,Object(m.a)(n)):n,r=f.value.filter((function(e){var r="project"===c.type?e.state:e.status;return(!n.length||a.includes(r))&&(!t||("iteration"===c.type?e.full_name:e.name).includes(t))}));f.value=r};return function(t,n){var o=Object(r.resolveComponent)("el-input"),d=Object(r.resolveComponent)("el-checkbox"),s=Object(r.resolveComponent)("el-checkbox-group"),m=Object(r.resolveComponent)("el-popover"),p=Object(r.resolveDirective)("trim");return Object(r.openBlock)(),Object(r.createBlock)(m,{width:350,"popper-class":"projectNavSearch",placement:"bottom-end",ref_key:"popoverRef",ref:l,"virtual-ref":e.buttonRef,trigger:"click","virtual-triggering":""},{default:Object(r.withCtx)((function(){return[Object(r.withDirectives)(Object(r.createVNode)(o,{onInput:k,class:"search-input","prefix-icon":Object(r.unref)(j.Search),modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=function(e){return i.value=e}),placeholder:e.placeholder},null,8,["prefix-icon","modelValue","placeholder"]),[[p]]),Object(r.createVNode)(s,{class:"search-ck",modelValue:u.value,"onUpdate:modelValue":n[1]||(n[1]=function(e){return u.value=e}),onChange:k},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(b.value,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(d,{key:e.value,value:e.value,label:e.value},{default:Object(r.withCtx)((function(){return[Object(r.createTextVNode)(Object(r.toDisplayString)(e.label),1)]})),_:2},1032,["value","label"])})),128))]})),_:1},8,["modelValue"]),f.value.length?(Object(r.openBlock)(),Object(r.createElementBlock)("ul",O,[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(f.value,(function(e,t){return Object(r.openBlock)(),Object(r.createElementBlock)("li",{class:Object(r.normalizeClass)(["search-ul-li",{"search-ul-li-active":e.id===_.value}]),onClick:function(t){return function(e){var t;null===(t=l.value)||void 0===t||t.hide(),_.value=e.id,a("onSelect",c.type,e)}(e)},key:t},Object(r.toDisplayString)("iteration"===c.type?e.full_name:e.name),11,v)})),128))])):(Object(r.openBlock)(),Object(r.createElementBlock)("ul",h,g))]})),_:1},8,["virtual-ref"])}}})),k=(n("259c"),n("6b0d")),C=n.n(k),V=C()(_,[["__scopeId","data-v-c01b158e"]]),w=n("a762"),N={class:"projectNav"},y={class:"projectNav-first"},x=Object(r.createTextVNode)(" > "),B=Object(r.createTextVNode)(" > "),I={key:1},D={name:"projectNav",components:{ProjectNavSearch:V,ProductCollect:w.a}},E=Object(r.defineComponent)(Object(a.a)(Object(a.a)({},D),{},{setup:function(e){var t=Object(f.f)(),n=Object(r.ref)(),m=Object(r.ref)(),p=Object(r.ref)(),j=Object(r.ref)(),O=Object(r.computed)((function(){return t.currentRoute.value.meta.disabledProjectSelect})),v=Object(r.reactive)({isMounted:!0,iterList:[],navName:"",currentIter:null}),h=[{label:"工作台",sLabel:"工作台",icon:"icon-gongzuotai2",path:"/workbench/dashboard",key:"workbench"},{label:"项目协作",sLabel:"项目",icon:"icon-gongzuotai4",path:"/project/iteration/homepage",key:"project"},{label:"文档中心",sLabel:"文档",icon:"icon-wendang",path:"/document/documentCenter",key:"document"},{label:"看板统计",sLabel:"看板",icon:"icon-kanban3x",path:"/lookBoard/monthOverview",key:"lookBoard"},{label:"配置中心",sLabel:"配置",icon:"icon-shezhi2",path:"/configure/environmentVariable",key:"configure"}],g=Object(i.a)().setProjectCache,_=Object(s.a)().boardBaseRt,k=Object(u.b)(!0).handleConditionSearch,C=function(e){return e.key===D.value&&(v.navName=F.value||G.value?e.sLabel:e.label,!0)},D=Object(r.computed)((function(){var e=d.a.currentRoute.value.path.match(/\/[A-Za-z]+/);return e?e[0].replace(/\//,""):""})),E=Object(r.computed)((function(){return c.b.getters.productList})),T=Object(r.computed)((function(){return c.b.getters.productId})),R=Object(r.computed)((function(){return c.b.getters.iterateList})),S=Object(r.computed)((function(){return c.b.getters.iterateId})),q=Object(r.computed)((function(){return c.b.getters.currentIter})),L=Object(r.computed)((function(){var e;return null===(e=c.b.state.permission)||void 0===e?void 0:e.config_operation})),P=Object(r.computed)((function(){return t.currentRoute.value.path})),U=Object(r.computed)((function(){return t.currentRoute.value.meta})),A=Object(r.computed)((function(){return d.a.currentRoute.value.query})),F=Object(r.computed)((function(){if(R.value.length){if(["/project/iteration/homepage","/project/iteration/exploitationAdd"].includes(P.value))return"/project/iteration/exploitationAdd"!==P.value||0!==Number(A.value.type);if(U.value.iterHight)return!0}return!1})),G=Object(r.computed)((function(){return E.value.length&&[""].includes(P.value)||P.value.includes("/project/")})),z=Object(r.computed)((function(){var e,t,n=null===c.b||void 0===c.b||null===(e=c.b.getters)||void 0===e?void 0:e.productInfo;if(v.isMounted&&n)return n;var a=(null===(t=E.value)||void 0===t?void 0:t.find((function(e){return e.id===T.value})))||E.value[0];return a?(c.b.commit(b.a.updateProductInfo,a),c.b.commit(b.a.updateIterateId,a.id),a):{}}));Object(r.onMounted)((function(){var e=A.value.iterateId;e&&(c.b.commit(b.a.updateIterateId,parseInt(e)),d.a.replace({path:P.value,query:Object(a.a)({},A.value)})),L.value||h.splice(4,1)}));var M=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.b.dispatch("GETITERATELIST",t);case 2:R.value.length?(n=q.value,a=n&&R.value.some((function(e){return e.id===n.id})),r=a?n:R.value[0],c.b.commit(b.a.updateIterateId,r.id),c.b.commit(b.a.updateCurrentIter,r)):(c.b.commit(b.a.updateIterateId,0),c.b.commit(b.a.updateIterateList,null),c.b.commit(b.a.updateCurrentIter,null));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.watch)((function(){return T.value}),(function(e){e&&M(e)}),{immediate:!0});var Y=function(){n.value.handleOpen()},H=function(){var e,t;null===(e=Object(r.unref)(m).popperRef)||void 0===e||null===(t=e.delayHide)||void 0===t||t.call(e)},J=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H(),"iteration"===t?(c.b.commit(b.a.updateIterateId,n.id),c.b.commit(b.a.updateCurrentIter,n),k(S.value),d.a.replace({query:Object.assign(Object(a.a)({},d.a.currentRoute.value.query),{iterateId:n.id||void 0})})):"project"===t&&(c.b.commit(b.a.updateProductId,n.id),c.b.commit(b.a.updateProductInfo),g(E.value,S.value),setTimeout((function(){P.value.includes("/project/product")?d.a.replace({query:Object.assign(Object(a.a)({},d.a.currentRoute.value.query),{productId:n.id})}):d.a.replace({query:Object.assign(Object(a.a)({},d.a.currentRoute.value.query),{productId:n.id,iterateId:S.value||void 0})})}),200));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(e){_.currentProIds=e};return function(e,a){var c,o,i,u=Object(r.resolveComponent)("el-dropdown-item"),d=Object(r.resolveComponent)("el-dropdown-menu"),s=Object(r.resolveComponent)("el-dropdown");return Object(r.openBlock)(),Object(r.createElementBlock)("div",N,[Object(r.createElementVNode)("span",null,[Object(r.createElementVNode)("i",{onClick:Y,class:"iconfont icon-nine-point"})]),Object(r.createElementVNode)("div",y,[Object(r.createVNode)(s,{ref_key:"dropdown1",ref:n,trigger:"contextmenu",placement:"bottom-start"},{dropdown:Object(r.withCtx)((function(){return[Object(r.createVNode)(d,null,{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(h,(function(e){return Object(r.createVNode)(u,{onClick:function(n){return a=e.path,void t.push(a);var a},class:Object(r.normalizeClass)([{"projectNav-first-item-active":C(e)},"projectNav-first-item"]),key:e.icon},{default:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("i",{class:Object(r.normalizeClass)("".concat(e.icon," iconfont"))},null,2),Object(r.createTextVNode)(Object(r.toDisplayString)(e.label),1)]})),_:2},1032,["onClick","class"])})),64))]})),_:1})]})),default:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("span",{class:"projectNav-first",onClick:Y},Object(r.toDisplayString)(Object(r.unref)(v).navName),1)]})),_:1},512)]),Object(r.unref)(U).showProductCollect?Object(r.createCommentVNode)("",!0):(Object(r.openBlock)(),Object(r.createElementBlock)(r.Fragment,{key:0},[Object(r.unref)(G)?(Object(r.openBlock)(),Object(r.createElementBlock)("div",{key:0,class:Object(r.normalizeClass)(["projectNav-item",[Object(r.unref)(O)?"no-click":"","projectNav-second"]])},[x,Object(r.createElementVNode)("span",{class:"projectNav-second-name",ref_key:"outRef",ref:p},Object(r.toDisplayString)(null===(c=Object(r.unref)(z))||void 0===c?void 0:c.name),513),Object(r.createVNode)(V,{list:Object(r.unref)(E),type:"project",currentId:null===(o=Object(r.unref)(z))||void 0===o?void 0:o.id,onOnSelect:J,"button-ref":p.value,ref_key:"popoverRef",ref:m},null,8,["list","currentId","button-ref"])],2)):Object(r.createCommentVNode)("",!0),Object(r.withDirectives)(Object(r.createElementVNode)("div",{class:Object(r.normalizeClass)(["projectNav-item",[Object(r.unref)(O)?"no-click":"","projectNav-second"]])},[B,Object(r.withDirectives)((Object(r.openBlock)(),Object(r.createElementBlock)("span",{class:"projectNav-second-name",ref_key:"outRef2",ref:j},[Object(r.createTextVNode)(Object(r.toDisplayString)(null===(i=Object(r.unref)(q))||void 0===i?void 0:i.name),1)])),[[Object(r.unref)(l.a),H]]),Object(r.createVNode)(V,{list:Object(r.unref)(R),currentId:Object(r.unref)(S),placeholder:"迭代名称/版本号",onOnSelect:J,"button-ref":j.value,ref_key:"popoverRef",ref:m,type:"iteration"},null,8,["list","currentId","button-ref"])],2),[[r.vShow,Object(r.unref)(F)]])],64)),Object(r.unref)(U).showProductCollect?(Object(r.openBlock)(),Object(r.createElementBlock)("span",I,">")):Object(r.createCommentVNode)("",!0),Object(r.unref)(U).showProductCollect?(Object(r.openBlock)(),Object(r.createBlock)(w.a,{key:2,"prop-val":Object(r.unref)(_).currentGroupIds,list:Object(r.unref)(_).teamProductList,onOnChange:Z,class:Object(r.normalizeClass)(["projectNav-product-collect reset-select",{"projectNav-product-collect2":Object(r.unref)(_).currentGroupIds.length>1}])},null,8,["prop-val","list","class"])):Object(r.createCommentVNode)("",!0)])}}}));n("8e8c"),n("6199");var T=C()(E,[["__scopeId","data-v-9dc25892"]]),R=n("d257"),S={class:"routerNav"},q={class:"routerNav-ul"},L=["onClick"],P=Object(r.defineComponent)(Object(a.a)(Object(a.a)({},{name:"routerNav"}),{},{setup:function(e){var t=Object(f.f)(),n=Object(r.reactive)({routeMap:{workbench:[{title:"仪表盘",path:"/workbench/dashboard",id:1},{title:"工作项",path:"/workbench/workItem",id:2},{title:"动态",path:"/workbench/projectDynamics",id:3}],project:[{title:"主页",path:"/project/home",id:0},{title:"产品",path:"/project/product/demandPool",id:1},{title:"迭代",path:"/project/iteration/homepage",id:2},{title:"任务",path:"/project/exploitation",id:3},{title:"BUG",path:"/project/test",id:4},{title:"提测单",path:"/project/testBill",id:5}],document:[{title:"文档中心",path:"/document/documentCenter",id:0},{title:"我的空间",path:"/document/mySpace",id:1}],lookBoard:[{title:"月度总览",path:"/lookBoard/monthOverview",id:0},{title:"项目",path:"/lookBoard/project/pmo",id:1},{title:"人员",path:"/lookBoard/personal/jobEvaluation",id:2}],configure:[{title:"环境变量",path:"/configure/environmentVariable",id:0},{title:"应用设置",path:"/configure/applicationVariable",id:1},{title:"全局变量",path:"/configure/globalVariable",id:3}]}}),o=Object(r.computed)((function(){var e=t.currentRoute.value.path.match(/\/[A-Za-z]+/);return e?e[0].replace(/\//,""):""})),l=Object(r.computed)((function(){return t.currentRoute.value.path})),i=Object(r.computed)((function(){return t.currentRoute.value.query})),u=Object(r.computed)((function(){return c.b.getters.productId})),d=Object(r.computed)((function(){var e=o.value;return n.routeMap[e]}));return function(e,n){return Object(r.openBlock)(),Object(r.createElementBlock)("div",S,[Object(r.createElementVNode)("ul",q,[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(Object(r.unref)(d),(function(e){return Object(r.openBlock)(),Object(r.createElementBlock)("li",{onClick:function(n){return function(e){var n=Object(R.E)(),r=t.currentRoute.value.query;t.push({path:e.path,query:Object(a.a)(Object(a.a)({},r),{},{productId:"project"===n?u.value:void 0})})}(e)},class:Object(r.normalizeClass)([{"routerNav-ul-li-active":(n=e,"/project/iteration/exploitationAdd"===l.value&&3===n.id&&0===Number(i.value.type)||"/project/product/planManagement"===l.value&&1===n.id||"/project/product/demandDoc"===l.value&&1===n.id||"/project/product/planDetail"===l.value&&1===n.id||"/lookBoard/project/pmo"===l.value&&1===n.id||"/lookBoard/project/qualityOverview"===l.value&&1===n.id||"/lookBoard/personal/peopleOverview"===l.value&&2===n.id||n.path===l.value||"/project/iteration/homepage"===n.path&&(t.currentRoute.value.meta.iterHight||1===parseInt(i.value.type)))},"routerNav-ul-li"]),key:e.id},Object(r.toDisplayString)(e.title),11,L);var n})),128))])])}}}));n("b3be");var U=C()(P,[["__scopeId","data-v-3d1ae388"]]),A=Object(r.defineComponent)({name:"CirclePlusFilled"});const F={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},G=Object(r.createVNode)("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-38.4 409.6H326.4a38.4 38.4 0 1 0 0 76.8h147.2v147.2a38.4 38.4 0 0 0 76.8 0V550.4h147.2a38.4 38.4 0 0 0 0-76.8H550.4V326.4a38.4 38.4 0 1 0-76.8 0v147.2z"},null,-1);A.render=function(e,t,n,a,c,o){return Object(r.openBlock)(),Object(r.createBlock)("svg",F,[G])},A.__file="packages/components/CirclePlusFilled.vue";var z=A,M=n("7063"),Y=n("d6c0"),H=n("671c"),J=n("9fe0"),Z=n("1990"),Q={class:"flex-layout iteration-msg"},$=Object(r.createTextVNode)("V"),K={class:"flex-layout"},W={key:0,class:"flex-layout"},X=function(e){return Object(r.pushScopeId)("data-v-5313c908"),e=e(),Object(r.popScopeId)(),e}((function(){return Object(r.createElementVNode)("span",null,"暂不排期",-1)})),ee={class:"dialog-footer"},te=Object(r.createTextVNode)("确 定"),ne=Object(r.createTextVNode)("取 消"),ae=Object(r.createTextVNode)(" 迭代 "),re={style:{"font-weight":"700",margin:"0 8px"}},ce=Object(r.createTextVNode)("添加成功，您还可以： "),oe={class:"dialog-footer",style:{display:"inline-block",height:"50px"}},le=Object(r.createTextVNode)("添加成员"),ie=Object(r.createTextVNode)("关联需求"),ue=Object(r.createTextVNode)("拆分任务"),de=Object(r.createTextVNode)("新增用例"),se=Object(r.createTextVNode)("稍后设置");n("d3b7"),n("25f0"),n("159b");var be=n("81ab"),fe=n("eaf6"),me=Object(r.ref)(!1),pe=Object(r.ref)(!1),je=Object(r.ref)("新增迭代"),Oe=function(e,t,n){t?/https:\/\/qyapi.weixin.qq.com\/cgi-bin\/webhook\/send\?key=(\w|\d|-){1,}/g.test(t)?n():n(new Error("格式错误，正确格式为 https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=")):n()},ve=Object(r.ref)({"iteration_manager.staff_name":[{required:!0,message:"请选择产品负责人",trigger:"blur"}],"backend_manager.staff_name":[{required:!0,message:"请选择后端负责人",trigger:"blur"}],"frontend_manager.staff_name":[{required:!0,message:"请选择前端负责人",trigger:"blur"}],"test_manager.staff_name":[{required:!0,message:"请选择测试负责人",trigger:"blur"}],version:[{required:!0,pattern:"^([0-9]+)(.([0-9]){1,3}){1,9}$",message:"请输入数字与“.”组成的版本号,如1.2.3",trigger:"blur"}],name:[{required:!0,message:"请输入迭代名称",trigger:"blur"}],dev_time:[{required:!0,message:"请选择开发时间",trigger:"blur"}],union_time:[{required:!0,message:"请选择联调时间",trigger:"blur"}],test_time:[{required:!0,message:"请选择提测时间",trigger:"blur"}],release_time:[{required:!0,message:"请选择发布时间",trigger:"blur"}],notify_url:[{validator:Oe,trigger:"blur",required:!1}]}),he={plan_id:[{required:!0,message:"请选择产品计划",trigger:"blur"}],"iteration_manager.staff_name":[{required:!0,message:"请选择产品负责人",trigger:"blur"}],"backend_manager.staff_name":[{required:!0,message:"请选择后端负责人",trigger:"blur"}],"frontend_manager.staff_name":[{required:!0,message:"请选择前端负责人",trigger:"blur"}],"test_manager.staff_name":[{required:!0,message:"请选择测试负责人",trigger:"blur"}],name:[{required:!0,message:"请输入迭代名称",trigger:"blur"}],notify_url:[{validator:Oe,trigger:"blur",required:!1}]},ge={plan_id:[{required:!0,message:"请选择产品计划",trigger:"blur"}],"iteration_manager.staff_name":[{required:!0,message:"请选择产品负责人",trigger:"blur"}],"backend_manager.staff_name":[{required:!0,message:"请选择后端负责人",trigger:"blur"}],"frontend_manager.staff_name":[{required:!0,message:"请选择前端负责人",trigger:"blur"}],"test_manager.staff_name":[{required:!0,message:"请选择测试负责人",trigger:"blur"}],name:[{required:!0,message:"请输入迭代名称",trigger:"blur"}],dev_time:[{required:!0,message:"请选择开发时间",trigger:"blur"}],union_time:[{required:!0,message:"请选择联调时间",trigger:"blur"}],test_time:[{required:!0,message:"请选择提测时间",trigger:"blur"}],release_time:[{required:!0,message:"请选择发布时间",trigger:"blur"}],notify_url:[{validator:Oe,trigger:"blur",required:!1}]},_e=Object(r.reactive)({notify_url:"",backend_manager:{staff_name:null,staff_no:null},dev_time:null,frontend_manager:{staff_name:null,staff_no:null},id:null,version:"",iteration_manager:{staff_name:null,staff_no:null},name:"",is_schedule:0,plan_id:null,release_time:null,test_manager:{staff_name:null,staff_no:null},test_time:null,union_time:null}),ke=Object(r.ref)(!1),Ce=n("867b"),Ve=Object(r.defineComponent)({emits:["refresh"],setup:function(){var e=Object(c.c)(),t=Object(r.ref)(!1),n=Object(r.ref)(!1),a=Object(r.ref)(),l=function(){var e=Object(r.ref)(null),t=function(){var t,n;null===(t=e.value)||void 0===t||t.clearValidate(),null===(n=e.value)||void 0===n||n.resetFields()};return Object(r.watch)((function(){return me.value}),(function(e){e||t()})),Object(r.watch)((function(){return pe}),(function(e){ve.value=e?he:ge})),{reset:t,formData:_e,ruleFormRef:e,title:je,rules:ve,handleChangeDialogStatus:function(e,t){!0!==e?t?(je.value="修改迭代",Object(r.nextTick)((function(){var e=Object(r.unref)(t),n=e.id,a=e.name,c=e.version,o=e.backend_manager,l=e.dev_time,i=e.frontend_manager,u=e.iteration_manager,d=e.release_time,s=e.test_manager,b=e.test_time,f=e.union_time,m=e.notify_url,p=e.is_schedule;_e.id=n,_e.name=a,_e.version=c,_e.plan_id=n,_e.notify_url=m,_e.backend_manager.staff_no=o.staff_no,_e.backend_manager.staff_name=o.staff_name,_e.dev_time=l,_e.frontend_manager.staff_name=i.staff_name,_e.frontend_manager.staff_no=i.staff_no,_e.iteration_manager.staff_name=u.staff_name,_e.iteration_manager.staff_no=u.staff_no,_e.is_schedule=p,_e.release_time=d,_e.test_manager.staff_name=s.staff_name,_e.test_manager.staff_no=s.staff_no,_e.test_time=b,_e.union_time=f,ke.value=!!p,pe.value=!p,setTimeout((function(){me.value=!0}),100)}))):Object(r.nextTick)((function(){ke.value=!1,je.value="新增迭代",_e.version="",_e.name="",_e.is_schedule=0,_e.release_time="",_e.dev_time="",_e.union_time="",_e.test_time="",_e.id=null,["backend_manager","frontend_manager","iteration_manager","test_manager"].forEach((function(e){_e[e].staff_no="",_e[e].staff_name=void 0})),me.value=!0})):me.value=!1},isShowIteration:me,hasTime:ke,checkBoxStatus:pe}}(),i=l.rules,s=l.handleChangeDialogStatus,f=l.isShowIteration,m=l.title,p=l.ruleFormRef,j=l.formData,O=l.hasTime,v=l.checkBoxStatus,h=Object(fe.a)().tipMessage,g=Object(r.computed)((function(){return e.getters.currentIter}));Object(r.watch)((function(){return f.value}),(function(e){var t;e?Object(J.h)({product_id:u.d.value,iteration_id:j.id?null===(t=g.value)||void 0===t?void 0:t.id:void 0}).then((function(e){a.value=e.data})):v.value=!1}));var _=Object(r.ref)(""),k=Object(u.b)(!0),C=k.searchParams,V=k.setIterationDetail,w=k.demandList,N=Object(Ce.a)(),y=function(t,n){N(t).then((function(a){C.demand=n,w.value=a;var r=a.find((function(e){return e.id===n}));e.commit(b.a.updateCurrentIter,r),e.commit(b.a.updateIterateId,n);var c=Object(R.G)("cacheProject",!0);c.forEach((function(e,a){e.projectId===t&&(c[a].iterationId=n)})),Object(R.M)("cacheProject",JSON.stringify(c))}))};return{isDisable:t,handleChangeDevTime:function(){j.union_time=null,j.test_time=null,j.release_time=null},handleChangeUnionTime:function(){if(!j.dev_time)return j.union_time=null,h(500,"请按顺序选择时间(开发-联调-提测-发布)");j.test_time=null,j.release_time=null},handleChangeTestTime:function(){if(!j.dev_time||!j.union_time)return j.test_time=null,h(500,"请按顺序选择时间(开发-联调-提测-发布)");j.release_time=null},handleChangeReleaseTime:function(){if(!j.dev_time||!j.union_time||!j.test_time)return j.release_time=null,h(500,"请按顺序选择时间(开发-联调-提测-发布)")},disabledReleaseDateTime:function(e){if(j.test_time)return e.getTime()<=new Date(j.test_time).getTime()-864e5},disabledTestDateTime:function(e){if(j.union_time)return e.getTime()<=new Date(j.union_time).getTime()-864e5},disabledUnionDateTime:function(e){if(j.dev_time)return e.getTime()<=new Date(j.dev_time).getTime()-864e5},ruleFormRef:p,rules:i,title:m,formData:j,isShowIteration:f,handleCreateIteration:function(){p.value.validate((function(a){if(!a)return!1;"[object Array]"==Reflect.toString.call(j.plan_id)&&(j.plan_id=j.plan_id[1]),j.product_id=u.d.value;var r=JSON.parse(JSON.stringify(j));v.value?(delete r.dev_time,delete r.release_time,delete r.test_time,delete r.union_time,r.is_schedule=0):r.is_schedule=1,t.value=!0,Object(be.d)(r).then(function(){var a=Object(o.a)(regeneratorRuntime.mark((function a(c){var o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(200===c.code){a.next=2;break}return a.abrupt("return");case 2:return h(c.code),s(!0),a.next=6,e.dispatch("GETITERATELIST",j.product_id);case 6:o=c.data.id,y(u.d.value,o),V(c.data),t.value=!1,r.id||(n.value=!0,_.value=r.name);case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}))},handleChangeDialogStatus:s,employeeLists:a,setFiled:function(e,t){var n,r=null===(n=a.value[1])||void 0===n?void 0:n.options.find((function(t){return t.staff_no===e}));j[t].staff_no=r.staff_no,j[t].staff_name=r.staff_name},hasTime:O,checkBoxStatus:v,isSuccessAfter:n,handleConfirmGo:function(t){if(!t)return n.value=!1;if(t&&"homepage"!==t&&"addmember"!==t)d.a.push({name:t});else if("homepage"===t){if("/project/iteration/homepage"!==d.a.currentRoute.value.path)return d.a.push({name:"homepage"}),n.value=!1,void setTimeout((function(){e.commit(b.a.iterateContentVisible,!0)}),1e3);e.commit(b.a.iterateContentVisible,!0)}else if("addmember"===t){if("/project/iteration/homepage"!==d.a.currentRoute.value.path)return d.a.push({name:"homepage"}),n.value=!1,void setTimeout((function(){e.commit(b.a.addMemberVisible,!0)}),2e3);e.commit(b.a.addMemberVisible,!0)}n.value=!1},iterationName:_}}});n("7836");var we=C()(Ve,[["render",function(e,t,n,a,c,o){var l=Object(r.resolveComponent)("el-input"),i=Object(r.resolveComponent)("el-form-item"),u=Object(r.resolveComponent)("el-option"),d=Object(r.resolveComponent)("el-option-group"),s=Object(r.resolveComponent)("el-select"),b=Object(r.resolveComponent)("el-date-picker"),f=Object(r.resolveComponent)("el-checkbox"),m=Object(r.resolveComponent)("el-form"),p=Object(r.resolveComponent)("el-button"),j=Object(r.resolveComponent)("el-dialog"),O=Object(r.resolveDirective)("debounce");return Object(r.openBlock)(),Object(r.createElementBlock)(r.Fragment,null,[Object(r.createVNode)(j,{"custom-class":"iterationDialog","close-on-press-escape":!1,title:e.title,modelValue:e.isShowIteration,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.isShowIteration=t}),width:"740px","close-on-click-modal":!1},{footer:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("span",ee,[Object(r.withDirectives)((Object(r.openBlock)(),Object(r.createBlock)(p,{type:"primary",onClick:e.handleCreateIteration,disabled:e.isDisable},{default:Object(r.withCtx)((function(){return[te]})),_:1},8,["onClick","disabled"])),[[O]]),Object(r.createVNode)(p,{onClick:t[16]||(t[16]=function(t){return e.handleChangeDialogStatus(!0)})},{default:Object(r.withCtx)((function(){return[ne]})),_:1})])]})),default:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("span",null,[Object(r.createVNode)(m,{model:e.formData,"label-width":"100px","label-position":"top",rules:e.rules,ref:"ruleFormRef"},{default:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("div",Q,[Object(r.createVNode)(i,{label:"迭代版本号","label-width":"100px",prop:"version"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(l,{placeholder:"如2.9.3",modelValue:e.formData.version,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.formData.version=t})},{prepend:Object(r.withCtx)((function(){return[$]})),_:1},8,["modelValue"])]})),_:1}),Object(r.createVNode)(i,{label:"迭代名称","label-width":"100px",prop:"name"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(l,{placeholder:"请输入简称",modelValue:e.formData.name,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formData.name=t}),maxlength:"12"},null,8,["modelValue"])]})),_:1})]),Object(r.createElementVNode)("div",K,[Object(r.createVNode)(i,{label:"产品负责人","label-width":"100px",prop:"iteration_manager.staff_no"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(s,{modelValue:e.formData.iteration_manager.staff_no,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.formData.iteration_manager.staff_no=t}),filterable:"",placeholder:"请选择",onChange:t[3]||(t[3]=function(t){return e.setFiled(t,"iteration_manager")})},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.employeeLists,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(d,{key:e.staff_no,label:e.label},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.options,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(u,{key:e.staff_no,label:e.staff_name,value:e.staff_no},null,8,["label","value"])})),128))]})),_:2},1032,["label"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(r.createVNode)(i,{label:"后端负责人","label-width":"100px",prop:"backend_manager.staff_no"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(s,{modelValue:e.formData.backend_manager.staff_no,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.formData.backend_manager.staff_no=t}),filterable:"",placeholder:"请选择",onChange:t[5]||(t[5]=function(t){return e.setFiled(t,"backend_manager")})},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.employeeLists,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(d,{key:e.staff_no,label:e.label},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.options,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(u,{key:e.staff_no,label:e.staff_name,value:e.staff_no},null,8,["label","value"])})),128))]})),_:2},1032,["label"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(r.createVNode)(i,{label:"前端负责人","label-width":"100px",prop:"frontend_manager.staff_no"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(s,{modelValue:e.formData.frontend_manager.staff_no,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.formData.frontend_manager.staff_no=t}),filterable:"",placeholder:"请选择",onChange:t[7]||(t[7]=function(t){return e.setFiled(t,"frontend_manager")})},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.employeeLists,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(d,{key:e.staff_no,label:e.label},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.options,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(u,{key:e.staff_no,label:e.staff_name,value:e.staff_no},null,8,["label","value"])})),128))]})),_:2},1032,["label"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(r.createVNode)(i,{label:"测试负责人","label-width":"100px",prop:"test_manager.staff_no"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(s,{modelValue:e.formData.test_manager.staff_no,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.formData.test_manager.staff_no=t}),filterable:"",placeholder:"请选择",onChange:t[9]||(t[9]=function(t){return e.setFiled(t,"test_manager")})},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.employeeLists,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(d,{key:e.staff_no,label:e.label},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.options,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(u,{key:e.staff_no,label:e.staff_name,value:e.staff_no},null,8,["label","value"])})),128))]})),_:2},1032,["label"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]),e.checkBoxStatus?Object(r.createCommentVNode)("",!0):(Object(r.openBlock)(),Object(r.createElementBlock)("div",W,[Object(r.createVNode)(i,{label:"开发时间","label-width":"100px",prop:"dev_time"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(b,{size:"default",onChange:e.handleChangeDevTime,"value-format":"YYYY-MM-DD",modelValue:e.formData.dev_time,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.formData.dev_time=t}),type:"date",placeholder:"选择日期"},null,8,["onChange","modelValue"])]})),_:1}),Object(r.createVNode)(i,{label:"联调时间","label-width":"100px",prop:"union_time"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(b,{onChange:e.handleChangeUnionTime,disabledDate:e.disabledUnionDateTime,"value-format":"YYYY-MM-DD",modelValue:e.formData.union_time,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.formData.union_time=t}),type:"date",placeholder:"选择日期",size:"default"},null,8,["onChange","disabledDate","modelValue"])]})),_:1}),Object(r.createVNode)(i,{label:"提测时间","label-width":"100px",prop:"test_time"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(b,{onChange:e.handleChangeTestTime,disabledDate:e.disabledTestDateTime,"value-format":"YYYY-MM-DD",modelValue:e.formData.test_time,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.formData.test_time=t}),type:"date",size:"default",placeholder:"选择日期"},null,8,["onChange","disabledDate","modelValue"])]})),_:1}),Object(r.createVNode)(i,{label:"发布时间","label-width":"100px",prop:"release_time"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(b,{onChange:e.handleChangeReleaseTime,disabledDate:e.disabledReleaseDateTime,"value-format":"YYYY-MM-DD",modelValue:e.formData.release_time,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.formData.release_time=t}),type:"date",size:"default",placeholder:"选择日期"},null,8,["onChange","disabledDate","modelValue"])]})),_:1})])),Object(r.createElementVNode)("div",null,[X,Object(r.createVNode)(f,{style:{"margin-left":"14px"},modelValue:e.checkBoxStatus,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.checkBoxStatus=t}),label:""},null,8,["modelValue"])]),Object(r.createVNode)(i,{label:"提醒地址","label-width":"100px",prop:"notify_url"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(l,{placeholder:"提醒群机器人地址，多个地址用','隔开",modelValue:e.formData.notify_url,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.formData.notify_url=t})},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])])]})),_:1},8,["title","modelValue"]),Object(r.createVNode)(j,{"custom-class":"iterationDialog",title:"迭代添加成功",modelValue:e.isSuccessAfter,"onUpdate:modelValue":t[23]||(t[23]=function(t){return e.isSuccessAfter=t}),width:"500px","close-on-click-modal":!0},{footer:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("span",oe,[Object(r.withDirectives)((Object(r.openBlock)(),Object(r.createBlock)(p,{type:"primary",onClick:t[18]||(t[18]=function(t){return e.handleConfirmGo("addmember")})},{default:Object(r.withCtx)((function(){return[le]})),_:1})),[[O]]),Object(r.withDirectives)((Object(r.openBlock)(),Object(r.createBlock)(p,{type:"primary",onClick:t[19]||(t[19]=function(t){return e.handleConfirmGo("homepage")})},{default:Object(r.withCtx)((function(){return[ie]})),_:1})),[[O]]),Object(r.withDirectives)((Object(r.openBlock)(),Object(r.createBlock)(p,{type:"primary",onClick:t[20]||(t[20]=function(t){return e.handleConfirmGo("exploitation")})},{default:Object(r.withCtx)((function(){return[ue]})),_:1})),[[O]]),Object(r.withDirectives)((Object(r.openBlock)(),Object(r.createBlock)(p,{type:"primary",onClick:t[21]||(t[21]=function(t){return e.handleConfirmGo("useCase")})},{default:Object(r.withCtx)((function(){return[de]})),_:1})),[[O]]),Object(r.createVNode)(p,{onClick:t[22]||(t[22]=function(t){return e.handleConfirmGo()})},{default:Object(r.withCtx)((function(){return[se]})),_:1})])]})),default:Object(r.withCtx)((function(){return[Object(r.createElementVNode)("div",null,[ae,Object(r.createElementVNode)("span",re,Object(r.toDisplayString)(e.iterationName),1),ce])]})),_:1},8,["modelValue"])],64)}],["__scopeId","data-v-5313c908"]]),Ne=n("8b6f"),ye=n("a4d4"),xe={class:"toolNav"},Be={class:"toolNav-add"},Ie={class:"header-pageName__profiles"},De=["src"],Ee={key:0,class:"header-pageName__avatar"},Te=["src"],Re={key:1},Se={style:{margin:"6px 0"}},qe={name:"toolNav",components:{CirclePlusFilled:z,Notices:Y.a,HandleProduct:H.a,CreateIterationDialog:we}},Le=Object(r.defineComponent)(Object(a.a)(Object(a.a)({},qe),{},{setup:function(e){var t=Object(c.c)().getters,n=Object(c.c)(),l=Object(f.f)(),i=Object(r.reactive)({visible:!1,show:!1,notices:0,bug_alert:!0,task_alert:!0,addList:[{value:1,label:"新增项目"},{value:2,label:"新增迭代"},{value:3,label:"新增需求"},{value:4,label:"新增任务"},{value:5,label:"新增BUG"},{value:6,label:"新增文档"}]}),d=Object(r.computed)((function(){var e=l.currentRoute.value.path.match(/\/[A-Za-z]+/);return e?e[0].replace(/\//,""):""})),s=Object(Z.a)().dialogVisible,m=Object(u.b)(!0),j=m.getIterationDetail,O=m.dialogRef,v=m.handleChangeDialogStatus,h=Object(r.computed)((function(){return t.user})),g=Object(r.computed)((function(){return n.state.permission})),_=Object(r.computed)((function(){return n.state.productId})),k=Object(r.computed)((function(){var e=Object(p.a)(i.addList,6),t=e[0],n=e[1],a=e[2],r=e[3],c=e[4],o=e[5];return"document"===d.value?[o]:"project"===d.value?[t,n,a,r,c]:[]})),C=Object(r.computed)((function(){var e=Object(R.E)();return k.value.length&&("document"===e||!!_.value)})),V=function(e){i.visible="show"===e||!i.visible},w=function(){var e={bug_alert:i.bug_alert?"1":"0",task_alert:i.task_alert?"1":"0"};Object(J.l)(e).then((function(){N()}))};ye.a.on("tomsg",(function(){V("show1")}));var N=function(){Object(J.i)().then((function(e){if(e&&e.data){var t=e.data;i.bug_alert=!!t.bug_alert,i.task_alert=!!t.task_alert}}))};N(),document.getElementById("app").addEventListener("click",(function(e){"icon"!=e.target.id&&"H3"!=e.target.nodeName&&(i.visible=!1)}));var y=function(e){var t;switch(e){case 1:if(null===(t=g.value)||void 0===t||!t.create_product)return;s.value=!0;break;case 2:v(0);break;case 3:l.push({path:"/project/product/demandPool",query:{type:"add",where:"headerDemand"}});break;case 4:l.push({path:"/project/exploitation",query:{type:"add",where:"headerExploitation"}});break;case 5:l.push({path:"/project/test",query:{type:"add",where:"headerTest"}});break;case 6:x()}},x=function(){var e="&type=update&origin="+Object(R.G)("defaultActiveTab");Object(Ne.A)({content:e}).then((function(e){200===e.code&&window.open(window.location.origin+"/document/padIframe?"+e.data.code,"_self")}))},B=function(){window.localStorage.clear(),Object(R.z)("_yapi_uid","/",Object(R.D)()),Object(R.z)("_yapi_token","/",Object(R.D)()),n.commit("USER",null),l.push({name:"login"})},I=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(r.nextTick)(Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==n?void 0:n.dispatch("GETPRODUCTLIST");case 2:n.commit(b.a.updateProductId,n.getters.productList[0].id),l.replace({path:l.currentRoute.value.path,query:Object(a.a)(Object(a.a)({},l.currentRoute.value.query),{},{productId:n.getters.productList[0].id})});case 4:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return function(e,t){var n=Object(r.resolveComponent)("el-icon"),a=Object(r.resolveComponent)("el-dropdown-item"),c=Object(r.resolveComponent)("el-dropdown-menu"),o=Object(r.resolveComponent)("el-dropdown"),l=Object(r.resolveComponent)("el-badge"),u=Object(r.resolveComponent)("el-popover"),d=Object(r.resolveComponent)("el-divider"),b=Object(r.resolveComponent)("el-switch");return Object(r.openBlock)(),Object(r.createElementBlock)("div",xe,[Object(r.createElementVNode)("div",Be,[Object(r.withDirectives)(Object(r.createVNode)(o,{onCommand:y},{dropdown:Object(r.withCtx)((function(){return[Object(r.createVNode)(c,{class:"toolNav-menu"},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(Object(r.unref)(k),(function(e){var t;return Object(r.openBlock)(),Object(r.createBlock)(a,{disabled:1===e.value&&!(null!==(t=Object(r.unref)(g))&&void 0!==t&&t.create_product),class:"toolNav-menu-item",key:e.value,command:e.value},{default:Object(r.withCtx)((function(){return[Object(r.createTextVNode)(Object(r.toDisplayString)(e.label),1)]})),_:2},1032,["disabled","command"])})),128))]})),_:1})]})),default:Object(r.withCtx)((function(){return[Object(r.createVNode)(n,{class:"toolNav-plus",color:"#1f9f85",size:"24px"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(Object(r.unref)(z))]})),_:1})]})),_:1},512),[[r.vShow,Object(r.unref)(C)]])]),Object(r.createElementVNode)("div",{class:"side-wrapper__notice",onClick:V},[Object(r.createVNode)(u,{placement:"bottom-end",trigger:"click",width:900,visible:Object(r.unref)(i).visible,"onUpdate:visible":t[1]||(t[1]=function(e){return Object(r.unref)(i).visible=e})},{reference:Object(r.withCtx)((function(){return[Object(r.createVNode)(l,{value:Object(r.unref)(i).notices,hidden:Object(r.unref)(i).notices<=0,type:"danger",max:99},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(n,{class:"side-wrapper__notice-icon"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(Object(r.unref)(M.a),{id:"icon"})]})),_:1})]})),_:1},8,["value","hidden"])]})),default:Object(r.withCtx)((function(){return[Object(r.createVNode)(Y.a,{"onUpdate:show":V,notices:Object(r.unref)(i).notices,"onUpdate:notices":t[0]||(t[0]=function(e){return Object(r.unref)(i).notices=e})},null,8,["notices"])]})),_:1},8,["visible"])]),Object(r.createElementVNode)("div",Ie,[Object(r.createVNode)(u,{"popper-class":"header-pageName__profiles--popover",placement:"bottom-end",width:150,trigger:"hover"},{reference:Object(r.withCtx)((function(){var e,t;return[Object(r.createElementVNode)("img",{class:"logo-wrapper__collapse",src:null!==(e=null===(t=Object(r.unref)(h))||void 0===t?void 0:t.avatar)&&void 0!==e?e:"../../assets/collapse-logo.png",alt:""},null,8,De)]})),default:Object(r.withCtx)((function(){var e,n,a,c;return[Object(r.createElementVNode)("div",null,[null!==(e=Object(r.unref)(h))&&void 0!==e&&e.avatar?(Object(r.openBlock)(),Object(r.createElementBlock)("div",Ee,[Object(r.createElementVNode)("img",{src:null===(n=Object(r.unref)(h))||void 0===n?void 0:n.avatar,alt:"avatar"},null,8,Te)])):(Object(r.openBlock)(),Object(r.createElementBlock)("p",Re,Object(r.toDisplayString)(null===(a=Object(r.unref)(h))||void 0===a?void 0:a.name),1)),Object(r.createElementVNode)("p",null,Object(r.toDisplayString)(null===(c=Object(r.unref)(h))||void 0===c?void 0:c.job_name),1),Object(r.createVNode)(d),Object(r.createElementVNode)("div",Se,[Object(r.createVNode)(b,{style:{"margin-bottom":"6px"},modelValue:Object(r.unref)(i).bug_alert,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Object(r.unref)(i).bug_alert=e}),onChange:w,"inactive-text":"bug企微提醒"},null,8,["modelValue"]),Object(r.createVNode)(b,{modelValue:Object(r.unref)(i).task_alert,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Object(r.unref)(i).task_alert=e}),onChange:w,"inactive-text":"任务企微提醒"},null,8,["modelValue"])]),Object(r.createElementVNode)("div",{class:"header-pageName__logout",onClick:B},"退出登录")])]})),_:1})]),Object(r.createVNode)(H.a,{visible:Object(r.unref)(s),"onUpdate:visible":t[4]||(t[4]=function(e){return Object(r.isRef)(s)?s.value=e:null}),onUpdateInfo:I},null,8,["visible"]),Object(r.createVNode)(we,{isAdd:"",onRefresh:Object(r.unref)(j),ref_key:"dialogRef",ref:O},null,8,["onRefresh"])])}}}));n("5202");var Pe=C()(Le,[["__scopeId","data-v-1c78455e"]]),Ue={class:"header"},Ae={name:"header",components:{ProjectNav:T,RouterNav:U,ToolNav:Pe}},Fe=Object(r.defineComponent)(Object(a.a)(Object(a.a)({},Ae),{},{setup:function(e){return function(e,t){return Object(r.openBlock)(),Object(r.createElementBlock)("header",Ue,[Object(r.createVNode)(T),Object(r.createVNode)(U),Object(r.createVNode)(Pe)])}}}));n("b5ad");var Ge=C()(Fe,[["__scopeId","data-v-17e940bb"]]);n("1276"),n("a15b");var ze=n("38d1"),Me=n("67a4");Object(r.defineComponent)({data:function(){return{notices:0,a:!0}},components:{ToolsNav:Pe,HandleProduct:H.a},setup:function(){var e=Object(c.c)().getters,t=Object(f.e)(),n=Object(f.f)(),o=Object(c.c)(),l=Object(u.b)(!0),i=l.searchParams,d=l.demandList,s=l.getIterationDetail,b=Object(r.ref)(),m=Object(r.ref)(),p=Object(r.ref)(!1),j=Object(r.ref)(!1),O=Object(r.ref)(""),v=function(e){p.value="show"===e||!p.value};Object(r.watch)((function(){return t.path}),(function(){var e,a;"/project/iteration/interface"!==t.path&&"/project/interfaceDoc"!==t.path||history.pushState(null,"",document.URL),b.value=null!==(e=t.matched[1])&&void 0!==e&&e.children?null===(a=t.matched[1])||void 0===a?void 0:a.children:[],b.value=b.value.filter((function(e){var t;return!1!==(null===(t=e.meta)||void 0===t?void 0:t.hidden)})),j.value=n.currentRoute.value.meta.disabledProjectSelect,O.value=n.currentRoute.value.meta.isDocument;var r=t.path.split("/");!1!==t.meta.hidden&&(r.length>3&&r.pop(),m.value=r.join("/"),Object(Me.c)("defaultActivePath",m.value),Object(Me.c)("defaultActiveTab",r[2]||"knowledgeBase"))}),{immediate:!0}),ye.a.on("tomsg",(function(){v("show1")}));var h=Object(Me.b)("defaultActivePath",!1);m.value=h||"/project/iteration",document.getElementById("app").addEventListener("click",(function(e){"icon"!=e.target.id&&"H3"!=e.target.nodeName&&(p.value=!1)}));var g=function(e,t,n){return document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:""),!0},_=Object(r.reactive)({bug_alert:!0,task_alert:!0}),k=function(){Object(J.i)().then((function(e){if(e&&e.data){var t=e.data;_.bug_alert=!!t.bug_alert,_.task_alert=!!t.task_alert}}))};k();var C=Object(Ce.a)(),V=function(e){d.value=[],C(e).then((function(t){d.value=t;var n=function(e){var t;return null===(t=Object(Me.b)("cacheProject",!0).find((function(t){return t.projectId===e})))||void 0===t?void 0:t.iterationId}(e);i.demand=n?Number(n):t.length?t[0].id:null}))};Object(u.a)(s);var w=Object(u.e)(),N=w.productLists,y=w.productId;Object(ze.Z)().then((function(e){var t;if(e.data){N.value=e.data,y.value=N.value[0]?N.value[0].id:[];var n=null===(t=Object(Me.b)("productInfo",!0))||void 0===t?void 0:t.id;n&&(y.value=n),Object(u.e)(),V(y.value);var a=[];N.value.forEach((function(e){a.push({projectId:e.id,iterationId:null,yapi_default_iteration_id:e.yapi_default_iteration_id})})),Object(Me.c)("cacheProject",JSON.stringify(a))}}));var x=Object(Z.a)(),B=x.dialogParams,I=x.handleShowDialog,D=x.dialogVisible,E=x.dialogVisibleBtn,T=x.ConfirmGo;return Object(a.a)(Object(a.a)({productLists:N,handleLogout:function(){Object(R.A)("user"),Object(R.A)("jumpUrl"),Object(R.A)("cacheProject"),Object(R.A)("defaultActivePath"),g("_yapi_uid","/",Object(R.D)()),g("_yapi_token","/",Object(R.D)()),o.commit("USER",null),n.push({name:"login"})},user:Object(r.computed)((function(){return e.user})),show:v,childRouter:b,defaultActivePath:m,visible:p,productId:y,handleChangeProduct:function(e){var t=N.value.find((function(t){return t.id===e}));Object(R.Q)(t),n.replace({query:Object.assign(Object(a.a)({},n.currentRoute.value.query),{productId:y.value})}),V(e)},dialogVisible:D,dialogVisibleBtn:E,dialogParams:B,handleShowDialog:I,isDisableProjectSelect:j},Object(r.toRefs)(_)),{},{handleTip:function(){var e={bug_alert:_.bug_alert?"1":"0",task_alert:_.task_alert?"1":"0"};Object(J.l)(e).then((function(){k()}))},isDocument:O,handleAddDoc:function(){var e="&type=update&origin="+Object(Me.b)("defaultActiveTab");Object(Ne.A)({content:e}).then((function(e){200===e.code&&window.open(window.location.origin+"/document/padIframe?"+e.data.code,"_self")}))},handleConfirmGo:function(e){return T(e)}})}}),n("75cc"),n("9cef");var Ye=n("6345"),He=n.n(Ye),Je=function(e){return Object(r.pushScopeId)("data-v-e12cf4ec"),e=e(),Object(r.popScopeId)(),e},Ze=Je((function(){return Object(r.createElementVNode)("div",{class:"side-wrapper__collapse"},null,-1)})),Qe=Je((function(){return Object(r.createElementVNode)("div",{class:"logo-wrapper"},[Object(r.createElementVNode)("img",{style:{width:"40px","margin-top":"-10px"},src:He.a,alt:""})],-1)})),$e={class:"iconfont-margin"},Ke=Object(r.defineComponent)({setup:function(){var e=Object(c.c)(),t=Object(f.f)(),n=Object(r.computed)((function(){return e.getters.productId}));return{linkToPage:function(e){var r=t.currentRoute.value.query;t.push({path:e.path,query:Object(a.a)(Object(a.a)({},r),{},{productId:"project"===e.name?n.value:void 0})})},path:Object(r.computed)((function(){return Object(R.A)("jumpUrl"),document.title="番茄-".concat(t.currentRoute.value.meta.title),"/".concat(t.currentRoute.value.path.split("/")[1])})),menu:Object(r.computed)((function(){var n=t.getRoutes().find((function(e){return"layout"===e.name})).children.filter((function(e){var t,n=e.children?e.children:[];return e.children=n.filter((function(e){var t;return!1!==(null===(t=e.meta)||void 0===t?void 0:t.hidden)})),!1!==(null===(t=e.meta)||void 0===t?void 0:t.hidden)}));return e.state.permission&&(e.state.permission.config_operation||n.forEach((function(e,t){"configure"===e.name&&n.splice(t,1)}))),n}))}}});n("6678"),n("a8b0");var We=C()(Ke,[["render",function(e,t,n,a,c,o){var l=Object(r.resolveComponent)("el-menu-item"),i=Object(r.resolveComponent)("el-menu"),u=Object(r.resolveComponent)("el-col"),d=Object(r.resolveComponent)("el-row"),s=Object(r.resolveComponent)("el-aside");return Object(r.openBlock)(),Object(r.createBlock)(s,{class:"side-wrapper",width:"auto"},{default:Object(r.withCtx)((function(){return[Ze,Object(r.createVNode)(d,{class:"tac"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(u,{span:24},{default:Object(r.withCtx)((function(){return[Qe,Object(r.createVNode)(i,{"default-active":e.path,"text-color":"#fff","active-text-color":"rgb(255, 255, 255)","background-color":"rgba(31, 159, 133, 1)",class:"el-menu-vertical-collapse",router:!0},{default:Object(r.withCtx)((function(){return[(Object(r.openBlock)(!0),Object(r.createElementBlock)(r.Fragment,null,Object(r.renderList)(e.menu,(function(t,n){return Object(r.openBlock)(),Object(r.createBlock)(l,{index:t.path,key:n,onClick:function(n){return e.linkToPage(t)}},{title:Object(r.withCtx)((function(){var e,n;return[Object(r.createElementVNode)("i",{class:Object(r.normalizeClass)([null==t||null===(e=t.meta)||void 0===e?void 0:e.icon,"iconfont"])},null,2),Object(r.createElementVNode)("span",$e,Object(r.toDisplayString)(null==t||null===(n=t.meta)||void 0===n?void 0:n.title),1)]})),_:2},1032,["index","onClick"])})),128))]})),_:1},8,["default-active"])]})),_:1})]})),_:1})]})),_:1})}],["__scopeId","data-v-e12cf4ec"]]),Xe=n("a161"),et=Object(r.defineComponent)({components:{TransitionRouter:Xe.a}});n("3dd4");var tt=C()(et,[["render",function(e,t,n,a,c,o){var l=Object(r.resolveComponent)("transition-router"),i=Object(r.resolveComponent)("el-main");return Object(r.openBlock)(),Object(r.createBlock)(i,{class:"el-main"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(l)]})),_:1})}],["__scopeId","data-v-41a8040d"]]),nt={components:{Header2:Ge,Side:We,Main:tt}},at=Object(r.defineComponent)(Object(a.a)(Object(a.a)({},nt),{},{setup:function(e){return Object(r.onBeforeMount)((function(){null===c.b||void 0===c.b||c.b.dispatch("GETPRODUCTLIST")})),function(e,t){var n=Object(r.resolveComponent)("el-container");return Object(r.openBlock)(),Object(r.createBlock)(n,{class:"layout-container"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(Object(r.unref)(We)),Object(r.createVNode)(n,{direction:"vertical"},{default:Object(r.withCtx)((function(){return[Object(r.createVNode)(Object(r.unref)(Ge)),Object(r.createVNode)(Object(r.unref)(tt),{class:"main-content"})]})),_:1})]})),_:1})}}}));n("dc64");const rt=at;t.default=rt},dc64:function(e,t,n){"use strict";n("1115")},eca8:function(e,t,n){},f040:function(e,t,n){},f2a5:function(e,t,n){},f750:function(e,t,n){}}]);